<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#6366f1" />

    <!-- SEO Meta Tags -->
    <title>
      Financia Suite - Gestor de Finanzas Personales Gratis con IA | Control de
      Gastos 2025
    </title>
    <meta
      name="description"
      content="‚≠ê Aplicaci√≥n GRATIS de finanzas personales con IA. Controla gastos, ahorra dinero, establece metas financieras y recibe consejos inteligentes. ¬°Mejora tus finanzas hoy! üìäüí∞"
    />
    <meta
      name="keywords"
      content="gestor finanzas personales gratis, control de gastos app, presupuesto familiar, ahorro dinero, finanzas personales 2025, app gastos gratis, gestor financiero IA, control gastos mensuales, presupuesto personal, administrador dinero, finanzas inteligentes, app ahorro, calculadora gastos, presupuesto online gratis, gestor gastos espa√±ol"
    />
    <meta name="author" content="Financia Suite" />
    <meta
      name="robots"
      content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
    />
    <link rel="canonical" href="https://dangivcontrol.com" />

    <!-- Additional SEO -->
    <meta name="language" content="Spanish" />
    <meta name="geo.region" content="ES" />
    <meta name="geo.placename" content="Espa√±a" />
    <meta name="distribution" content="global" />
    <meta name="rating" content="general" />
    <meta name="revisit-after" content="7 days" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="mobile-web-app-capable" content="yes" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://dangivcontrol.com/" />
    <meta
      property="og:title"
      content="üéØ Financia Suite - App GRATIS de Finanzas Personales con IA"
    />
    <meta
      property="og:description"
      content="Controla tus gastos, ahorra m√°s dinero y alcanza tus metas financieras. 100% gratis, sin publicidad, con inteligencia artificial. ¬°Mejora tus finanzas hoy!"
    />
    <meta
      property="og:image"
      content="https://dangivcontrol.com/img/og-image-2025.jpg"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta
      property="og:image:alt"
      content="Financia Suite - Gestor de Finanzas Personales"
    />
    <meta property="og:site_name" content="Financia Suite" />
    <meta property="og:locale" content="es_ES" />
    <meta property="og:locale:alternate" content="es_MX" />
    <meta property="og:locale:alternate" content="es_AR" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://dangivcontrol.com/" />
    <meta name="twitter:site" content="@dangivcontrol" />
    <meta name="twitter:creator" content="@dangivcontrol" />
    <meta
      name="twitter:title"
      content="üéØ Financia Suite - Gestor de Finanzas Gratis con IA"
    />
    <meta
      name="twitter:description"
      content="Controla gastos, ahorra dinero y alcanza metas financieras. 100% gratis con IA. ¬°Comienza hoy!"
    />
    <meta
      name="twitter:image"
      content="https://dangivcontrol.com/img/twitter-card-2025.jpg"
    />
    <meta
      name="twitter:image:alt"
      content="Financia Suite - Control de Gastos Inteligente"
    />

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- Performance & Security -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Nunito+Sans:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="style.css?v=3.2" />
    <link rel="stylesheet" href="user-system.css" />
    <link rel="stylesheet" href="store.css" />
    <link rel="stylesheet" href="config.css" />
    <link rel="stylesheet" href="avatar-sidebar.css" />
    <link rel="stylesheet" href="daily-messages.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Schema.org Structured Data (JSON-LD) -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Financia Suite",
        "alternateName": "Financia Suite - Gestor de Finanzas",
        "url": "https://financiasuite.com",
        "logo": "https://dangivcontrol.com/img/logo-512.png",
        "description": "Aplicaci√≥n web gratuita de gesti√≥n de finanzas personales con inteligencia artificial. Controla gastos, establece metas financieras y recibe consejos personalizados.",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web Browser",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "EUR"
        },
        "featureList": [
          "Control de gastos personales",
          "Metas financieras",
          "An√°lisis con IA",
          "Presupuesto mensual",
          "Gesti√≥n de ahorros",
          "Lista de compras inteligente",
          "M√∫ltiples usuarios",
          "Exportaci√≥n de datos"
        ],
        "browserRequirements": "Requires JavaScript. Requires HTML5.",
        "inLanguage": "es",
        "audience": {
          "@type": "Audience",
          "audienceType": "Personas interesadas en finanzas personales"
        },
        "creator": {
          "@type": "Organization",
          "name": "Financia Suite",
          "url": "https://financiasuite.com"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "ratingCount": "127",
          "bestRating": "5",
          "worstRating": "1"
        }
      }
    </script>

    <!-- Organization Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Financia Suite",
        "url": "https://financiasuite.com",
        "logo": "https://financiasuite.com/img/logo-512.png",
        "sameAs": [
          "https://twitter.com/dangivcontrol",
          "https://facebook.com/dangivcontrol"
        ],
        "contactPoint": {
          "@type": "ContactPoint",
          "contactType": "Customer Support",
          "email": "soporte@dangivcontrol.com"
        }
      }
    </script>

    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Inicio",
            "item": "https://dangivcontrol.com"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Gestor de Finanzas",
            "item": "https://dangivcontrol.com/#dashboard"
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": "Control de Gastos",
            "item": "https://dangivcontrol.com/#expenses"
          }
        ]
      }
    </script>

    <!-- FAQ Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "¬øFinancia Suite es gratis?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "S√≠, Financia Suite es 100% gratuito. No tiene costo de suscripci√≥n, sin publicidad intrusiva y sin l√≠mites en el n√∫mero de transacciones que puedes registrar."
            }
          },
          {
            "@type": "Question",
            "name": "¬øNecesito instalar algo para usar Financia Suite?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "No, Financia Suite funciona directamente en tu navegador web. Puedes acceder desde cualquier dispositivo con conexi√≥n a Internet sin necesidad de descargar aplicaciones."
            }
          },
          {
            "@type": "Question",
            "name": "¬øMis datos est√°n seguros en Financia Suite?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "S√≠, tus datos se guardan de forma segura. Puedes usar la aplicaci√≥n de forma an√≥nima con almacenamiento local, o crear una cuenta para sincronizar tus datos de manera cifrada en la nube."
            }
          },
          {
            "@type": "Question",
            "name": "¬øQu√© funciones tiene Financia Suite?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Financia Suite incluye control de gastos, metas de ahorro, presupuestos mensuales, an√°lisis con IA, lista de compras inteligente, gesti√≥n multi-usuario y exportaci√≥n de datos en JSON/CSV."
            }
          }
        ]
      }
    </script>
  </head>
  <body>
    <!-- Loading Spinner -->
    <div id="loader-wrapper">
      <div class="spinner"></div>
      <p>Cargando datos...</p>
    </div>

    <!-- SEO Landing Section (Hidden after load, visible to crawlers) -->
    <noscript>
      <div
        style="
          padding: 40px;
          text-align: center;
          font-family: Arial, sans-serif;
        "
      >
        <h1>Financia Suite - Gestor de Finanzas Personales Gratis</h1>
        <p>Esta aplicaci√≥n requiere JavaScript para funcionar.</p>
        <p>Por favor, habilita JavaScript en tu navegador para continuar.</p>
      </div>
    </noscript>

    <div
      id="seo-content"
      style="
        position: absolute;
        left: -9999px;
        width: 1px;
        height: 1px;
        overflow: hidden;
      "
    >
      <h1>
        Financia Suite - Gestor de Finanzas Personales Gratis con Inteligencia
        Artificial
      </h1>

      <h2>Controla tus Gastos y Ahorra Dinero de Forma Inteligente</h2>
      <p>
        Financia Suite es una <strong>aplicaci√≥n web gratuita</strong> de
        gesti√≥n financiera personal que te ayuda a
        <strong>controlar gastos</strong>, establecer
        <strong>metas de ahorro</strong> y alcanzar tus objetivos financieros.
        Con nuestra tecnolog√≠a de <strong>inteligencia artificial</strong>,
        recibir√°s consejos personalizados para mejorar tus finanzas.
      </p>

      <h2>Caracter√≠sticas Principales</h2>
      <ul>
        <li>
          <strong>Control de Gastos Autom√°tico:</strong> Registra y categoriza
          tus gastos mensualmente
        </li>
        <li>
          <strong>Metas Financieras:</strong> Establece objetivos de ahorro y
          sigue tu progreso
        </li>
        <li>
          <strong>An√°lisis con IA:</strong> Recibe recomendaciones inteligentes
          personalizadas
        </li>
        <li>
          <strong>Presupuesto de Ocio:</strong> Planifica tus gastos extras y
          caprichos
        </li>
        <li>
          <strong>Gesti√≥n Multi-Usuario:</strong> Comparte finanzas con tu
          familia
        </li>
        <li>
          <strong>Lista de Compras Inteligente:</strong> Planifica tus compras
          por prioridad
        </li>
        <li>
          <strong>Exportaci√≥n de Datos:</strong> Descarga tus datos en JSON o
          CSV
        </li>
        <li>
          <strong>100% Gratis:</strong> Sin suscripciones, sin publicidad
          intrusiva
        </li>
      </ul>

      <h2>¬øPor qu√© elegir Financia Suite?</h2>
      <p>
        A diferencia de otras aplicaciones de finanzas personales, Financia Suite
        Control es:
      </p>
      <ul>
        <li>
          <strong>Totalmente Gratis:</strong> No hay cargos ocultos ni planes
          premium obligatorios
        </li>
        <li>
          <strong>Privado y Seguro:</strong> Tus datos se guardan localmente o
          en tu cuenta personal
        </li>
        <li><strong>F√°cil de Usar:</strong> Interfaz intuitiva en espa√±ol</li>
        <li>
          <strong>Sin Instalaci√≥n:</strong> Funciona directamente en tu
          navegador
        </li>
        <li>
          <strong>Multiplataforma:</strong> Accede desde PC, tablet o m√≥vil
        </li>
      </ul>

      <h2>¬øC√≥mo funciona Financia Suite?</h2>
      <p>
        1. <strong>Registra tus gastos:</strong> A√±ade tus gastos diarios con
        categor√≠as como alimentaci√≥n, transporte, entretenimiento, salud,
        servicios, compras y m√°s.
      </p>
      <p>
        2. <strong>Establece tu presupuesto:</strong> Define cu√°nto quieres
        gastar mensualmente por categor√≠a y recibe alertas cuando te acerques al
        l√≠mite.
      </p>
      <p>
        3. <strong>Crea metas de ahorro:</strong> Visualiza tu progreso hacia
        objetivos como vacaciones, compra de auto, fondo de emergencia, etc.
      </p>
      <p>
        4. <strong>Analiza tus finanzas:</strong> Visualiza gr√°ficos y
        estad√≠sticas de tus gastos para identificar patrones y √°reas de mejora.
      </p>
      <p>
        5. <strong>Recibe consejos de IA:</strong> Nuestro asistente inteligente
        analiza tus h√°bitos y te ofrece recomendaciones personalizadas.
      </p>

      <h2>Preguntas Frecuentes sobre Finanzas Personales</h2>

      <h3>¬øC√≥mo puedo ahorrar dinero cada mes?</h3>
      <p>
        El primer paso es saber en qu√© gastas tu dinero. Financia Suite te
        ayuda a identificar gastos innecesarios y establecer presupuestos
        realistas por categor√≠a.
      </p>

      <h3>¬øQu√© es un presupuesto personal?</h3>
      <p>
        Un presupuesto personal es un plan que indica cu√°nto dinero gastar√°s en
        diferentes categor√≠as durante un per√≠odo (generalmente un mes). Te ayuda
        a no gastar m√°s de lo que ganas.
      </p>

      <h3>¬øCu√°nto debo ahorrar al mes?</h3>
      <p>
        Los expertos recomiendan ahorrar al menos el 20% de tus ingresos
        mensuales. Con Financia Suite puedes establecer esta meta y seguir tu
        progreso autom√°ticamente.
      </p>

      <h3>¬øC√≥mo controlar mis gastos mensuales?</h3>
      <p>
        La clave es registrar todos tus gastos, categorizarlos y compararlos con
        tu presupuesto. Nuestra app hace esto de forma autom√°tica y te env√≠a
        alertas cuando gastas de m√°s.
      </p>

      <h2>Categor√≠as de Gastos que Puedes Gestionar</h2>
      <ul>
        <li>
          <strong>Alimentaci√≥n:</strong> Supermercado, restaurantes, comida a
          domicilio
        </li>
        <li>
          <strong>Transporte:</strong> Gasolina, transporte p√∫blico,
          mantenimiento del auto
        </li>
        <li>
          <strong>Entretenimiento:</strong> Cine, streaming, hobbies, salidas
        </li>
        <li><strong>Salud:</strong> Medicinas, seguros, consultas m√©dicas</li>
        <li><strong>Servicios:</strong> Luz, agua, internet, tel√©fono, gas</li>
        <li><strong>Compras:</strong> Ropa, electr√≥nicos, muebles</li>
        <li>
          <strong>Otros:</strong> Cualquier gasto que no encaje en las
          anteriores
        </li>
      </ul>

      <h2>Seguridad y Privacidad</h2>
      <p>
        Tus datos financieros son sensibles y los tratamos con el m√°ximo
        cuidado:
      </p>
      <ul>
        <li>Almacenamiento local en tu dispositivo (modo an√≥nimo)</li>
        <li>Sincronizaci√≥n segura con Firebase (modo autenticado)</li>
        <li>No vendemos ni compartimos tus datos con terceros</li>
        <li>Cifrado de datos en tr√°nsito</li>
        <li>Puedes exportar o eliminar tus datos en cualquier momento</li>
      </ul>

      <h2>Comienza a Controlar tus Finanzas Hoy</h2>
      <p>
        Financia Suite es la herramienta perfecta para personas que quieren:
      </p>
      <ul>
        <li>Dejar de vivir al d√≠a y empezar a ahorrar</li>
        <li>Saber exactamente en qu√© gastan su dinero</li>
        <li>Alcanzar metas financieras espec√≠ficas</li>
        <li>Mejorar sus h√°bitos de consumo</li>
        <li>Tener control total sobre sus finanzas personales</li>
      </ul>

      <p>
        <strong
          >100% Gratis | Sin Publicidad | En Espa√±ol | Funciona en cualquier
          navegador</strong
        >
      </p>

      <h2>
        Palabras clave: Gestor finanzas personales, control de gastos, app
        presupuesto gratis, ahorro dinero, finanzas familiares, gestor
        financiero IA
      </h2>
    </div>

    <!-- Navbar -->
    <header class="navbar">
      <div class="navbar__container">
        <div class="navbar__logo">
          <div class="logo-icon">
            <svg
              class="logo-svg"
              viewBox="0 0 40 40"
              xmlns="http://www.w3.org/2000/svg"
            >
              <defs>
                <linearGradient
                  id="logoGradient"
                  x1="0%"
                  y1="0%"
                  x2="100%"
                  y2="100%"
                >
                  <stop
                    offset="0%"
                    style="stop-color: var(--color-primary); stop-opacity: 1"
                  />
                  <stop
                    offset="100%"
                    style="stop-color: var(--color-teal-600); stop-opacity: 1"
                  />
                </linearGradient>
              </defs>
              <!-- C√≠rculo base -->
              <circle
                cx="20"
                cy="20"
                r="18"
                fill="url(#logoGradient)"
                stroke="white"
                stroke-width="2"
              />
              <!-- Gr√°fico estilizado -->
              <path
                d="M12 28 L16 22 L20 25 L24 18 L28 20"
                stroke="white"
                stroke-width="2.5"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <!-- Puntos de datos -->
              <circle cx="16" cy="22" r="2.5" fill="white" />
              <circle cx="20" cy="25" r="2.5" fill="white" />
              <circle cx="24" cy="18" r="2.5" fill="white" />
              <!-- S√≠mbolo de moneda $ -->
              <text
                x="20"
                y="15"
                text-anchor="middle"
                fill="white"
                font-size="8"
                font-weight="bold"
              >
                $
              </text>
            </svg>
          </div>
          <span class="logo-text">
            <span class="brand-name">Financia</span>
            <span class="brand-suite"
              >Suite Pro <span class="beta-badge">BETA</span></span
            >
          </span>
        </div>
        <button
          class="icon-btn hamburger-menu"
          id="hamburgerBtn"
          aria-label="Abrir men√∫"
        >
          <i class="fas fa-bars"></i>
        </button>
        <div class="navbar__actions">
          <div
            id="notificationArea"
            class="notifications icon-btn"
            style="position: relative"
          >
            <i id="notificationBell" class="fas fa-bell"></i>
            <span
              id="notificationCount"
              class="notification-badge"
              style="display: none"
            >
              <i class="fas fa-exclamation"></i>
            </span>
          </div>

          <button
            id="mobileProfileBtn"
            class="icon-btn mobile-profile-btn"
            title="Mi cuenta"
          >
            <i class="fas fa-user"></i>
          </button>

          <button
            id="mobileLogoutBtn"
            class="icon-btn mobile-logout-btn"
            title="Cerrar sesi√≥n"
          >
            <i class="fas fa-sign-out-alt"></i>
          </button>

          <div id="notificationDropdown" class="notification-dropdown hidden">
            <div class="notification-header">
              <h4>Notificaciones</h4>
              <button
                class="notification-header-action"
                id="markAllReadBtn"
                title="Marcar todo como le√≠do"
              >
                <i class="fas fa-check-double"></i>
              </button>
            </div>

            <div class="notification-body" id="notificationBody">
              <div class="notification-list" id="notificationList">
                <!-- Notifications will be rendered here -->
              </div>

              <div class="notification-empty hidden" id="notificationEmpty">
                <div class="notification-empty-icon">
                  <i class="fas fa-bell-slash"></i>
                </div>
                <h5>¬°Todo al d√≠a!</h5>
                <p>No tienes notificaciones pendientes</p>
              </div>
            </div>

            <div class="notification-footer">
              <button
                class="notification-settings-btn"
                id="notificationSettingsBtn"
                title="Configuraci√≥n de notificaciones"
              >
                <i class="fas fa-cog"></i>
                <span>Configuraci√≥n</span>
              </button>
            </div>
          </div>
          <button
            class="icon-btn"
            id="themeToggle"
            aria-label="Cambiar a modo oscuro"
          >
            <i class="fas fa-moon"></i>
          </button>

          <!-- Login Icon (shown when not logged in) -->
          <button
            class="login-icon-btn"
            id="navbarLoginBtn"
            aria-label="Iniciar sesi√≥n"
            title="Iniciar sesi√≥n"
          >
            <i class="fas fa-user-circle"></i>
          </button>

          <!-- Profile Menu (shown when logged in) -->
          <div
            class="profile-menu-container"
            id="profileMenuContainer"
            style="display: none"
          >
            <button
              class="profile-avatar-btn"
              id="profileAvatarBtn"
              aria-label="Abrir men√∫ de perfil"
            >
              <div class="profile-avatar-wrapper" id="profileAvatarWrapper">
                <!-- Animated ring for Pro users -->
                <div class="profile-ring" id="profileRing">
                  <svg class="profile-ring-svg" viewBox="0 0 60 60">
                    <circle
                      class="profile-ring-track"
                      cx="30"
                      cy="30"
                      r="28"
                      fill="none"
                      stroke-width="2"
                    ></circle>
                    <circle
                      class="profile-ring-progress"
                      cx="30"
                      cy="30"
                      r="28"
                      fill="none"
                      stroke-width="2"
                    ></circle>
                  </svg>
                </div>

                <!-- Avatar image -->
                <img
                  class="profile-avatar"
                  id="profileAvatar"
                  src=""
                  alt="Foto de perfil"
                />

                <!-- Verification badge for Pro users -->
                <div class="profile-verification-badge" id="profileBadge">
                  <i class="fas fa-check"></i>
                </div>
              </div>
            </button>

            <!-- Profile Dropdown Menu -->
            <div class="profile-dropdown hidden" id="profileDropdown">
              <div class="profile-dropdown-header">
                <div class="profile-header-avatar">
                  <img
                    class="profile-header-img"
                    id="profileHeaderImg"
                    src=""
                    alt="Avatar"
                  />
                  <div class="profile-header-badge" id="profileHeaderBadge">
                    <i class="fas fa-crown"></i>
                  </div>
                </div>
                <div class="profile-header-info">
                  <h4 class="profile-name" id="profileName">Usuario</h4>
                  <span class="profile-plan" id="profilePlan">Plan Free</span>
                </div>
              </div>

              <div class="profile-dropdown-menu">
                <button class="profile-menu-item" id="viewProfileBtn">
                  <i class="fas fa-user"></i>
                  <span>Ver Perfil</span>
                </button>
                <button class="profile-menu-item" id="profileSettingsBtn">
                  <i class="fas fa-cog"></i>
                  <span>Configuraci√≥n</span>
                </button>
                <div class="profile-menu-divider"></div>
                <button
                  class="profile-menu-item profile-menu-logout"
                  id="profileLogoutBtn"
                >
                  <i class="fas fa-sign-out-alt"></i>
                  <span>Cerrar Sesi√≥n</span>
                </button>
              </div>

              <div class="profile-dropdown-footer">
                <button class="profile-upgrade-btn" id="profileUpgradeBtn">
                  <i class="fas fa-star"></i>
                  <span>Actualizar a Pro</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Mobile Profile Banner (INDEPENDIENTE - Fuera del sidebar) -->
    <div class="mobile-profile-banner" id="mobileProfileBanner">
      <div class="mobile-banner-cover" id="mobileBannerCover">
        <!-- Banner de fondo personalizable -->

        <!-- Bot√≥n HAMBURGUESA (esquina superior izquierda) -->
        <button class="banner-hamburger-btn" id="mobileHamburgerBtn">
          <i class="fas fa-bars"></i>
        </button>

        <!-- CAMPANA DE NOTIFICACIONES (esquina superior derecha) -->
        <div class="banner-notification-btn" id="bannerNotificationArea">
          <button class="banner-notification-bell">
            <i class="fas fa-bell" id="bannerNotificationBell"></i>
            <span class="banner-notification-badge" id="bannerNotificationCount" style="display: none;">
              <i class="fas fa-exclamation"></i>
            </span>
          </button>
        </div>
      </div>

      <div class="mobile-profile-info">
        <div class="mobile-avatar-container" id="mobileAvatarContainer">
          <img class="mobile-avatar" id="mobileAvatar" src="" alt="Avatar" />
          <div class="mobile-avatar-ring"></div>
        </div>
        <div class="mobile-user-details">
          <h3 class="mobile-username" id="mobileUsername">Usuario</h3>
          <p class="mobile-user-quote" id="mobileUserQuote">
            Agrega una frase inspiradora...
          </p>
          <p class="mobile-user-stats" id="mobileUserStats">Balance: $0</p>
        </div>
      </div>

      <!-- Logros minimalistas dorados -->
      <div class="mobile-achievements" id="mobileAchievements">
        <!-- Se llenar√° din√°micamente con JS -->
      </div>
    </div>

    <!-- ============================================
         MEN√ö DEL AVATAR (NUEVO - Arquitectura Moderna)
         ============================================ -->
    <aside class="avatar-sidebar" id="avatarSidebar" role="dialog" aria-label="Men√∫ de usuario" aria-hidden="true">
      <!-- Header del men√∫ -->
      <header class="avatar-sidebar__header">
        <div class="avatar-sidebar__profile">
          <img class="avatar-sidebar__image" id="avatarSidebarImage" src="https://ui-avatars.com/api/?name=Usuario&background=21808D&color=fff&size=128&font-size=0.6" alt="Foto de perfil" />
          <div class="avatar-sidebar__info">
            <h3 class="avatar-sidebar__name" id="avatarSidebarName">Usuario</h3>
            <p class="avatar-sidebar__email" id="avatarSidebarEmail">email@ejemplo.com</p>
          </div>
        </div>
        <button class="avatar-sidebar__close" id="avatarSidebarClose" aria-label="Cerrar men√∫">
          <i class="fas fa-times"></i>
        </button>
      </header>

      <!-- Contenido del men√∫ -->
      <nav class="avatar-sidebar__content">
        <!-- Perfil -->
        <section class="avatar-sidebar__section">
          <h4 class="avatar-sidebar__section-title">Perfil</h4>
          <ul class="avatar-sidebar__menu">
            <li>
              <button class="avatar-sidebar__item" data-action="change-photo">
                <i class="fas fa-camera"></i>
                <span>Cambiar foto</span>
              </button>
            </li>
            <li>
              <button class="avatar-sidebar__item" data-action="change-name">
                <i class="fas fa-user-edit"></i>
                <span>Cambiar nombre</span>
              </button>
            </li>
            <li>
              <button class="avatar-sidebar__item" data-action="edit-quote">
                <i class="fas fa-quote-right"></i>
                <span>Frase personal</span>
              </button>
            </li>
          </ul>
        </section>

        <!-- Funciones -->
        <section class="avatar-sidebar__section">
          <h4 class="avatar-sidebar__section-title">Funciones</h4>
          <ul class="avatar-sidebar__menu">
            <li>
              <button class="avatar-sidebar__item" data-action="my-achievements">
                <i class="fas fa-trophy"></i>
                <span>Mis logros</span>
              </button>
            </li>
            <li>
              <button class="avatar-sidebar__item avatar-sidebar__item--premium" data-action="go-premium">
                <i class="fas fa-crown"></i>
                <span>Ir a Premium</span>
                <span class="avatar-sidebar__badge">PRO</span>
              </button>
            </li>
          </ul>
        </section>

        <!-- Configuraci√≥n -->
        <section class="avatar-sidebar__section">
          <h4 class="avatar-sidebar__section-title">Configuraci√≥n</h4>
          <ul class="avatar-sidebar__menu">
            <li>
              <div class="avatar-sidebar__item avatar-sidebar__item--toggle">
                <div class="avatar-sidebar__toggle-label">
                  <i class="fas fa-moon"></i>
                  <span>Tema oscuro</span>
                </div>
                <label class="avatar-sidebar__switch">
                  <input type="checkbox" id="avatarThemeToggle" />
                  <span class="avatar-sidebar__slider"></span>
                </label>
              </div>
            </li>
          </ul>
        </section>

        <!-- Ayuda -->
        <section class="avatar-sidebar__section">
          <h4 class="avatar-sidebar__section-title">Ayuda</h4>
          <ul class="avatar-sidebar__menu">
            <li>
              <button class="avatar-sidebar__item" data-action="report-problem">
                <i class="fas fa-bug"></i>
                <span>Reportar problema</span>
              </button>
            </li>
          </ul>
        </section>

        <!-- Cuenta -->
        <section class="avatar-sidebar__section">
          <h4 class="avatar-sidebar__section-title">Cuenta</h4>
          <ul class="avatar-sidebar__menu">
            <li>
              <button class="avatar-sidebar__item avatar-sidebar__item--danger" data-action="delete-account">
                <i class="fas fa-trash-alt"></i>
                <span>Eliminar cuenta</span>
              </button>
            </li>
            <li>
              <button class="avatar-sidebar__item" data-action="logout">
                <i class="fas fa-sign-out-alt"></i>
                <span>Cerrar sesi√≥n</span>
              </button>
            </li>
          </ul>
        </section>
      </nav>
    </aside>

    <!-- Backdrop para cerrar el men√∫ -->
    <div class="avatar-sidebar-backdrop" id="avatarSidebarBackdrop" aria-hidden="true"></div>

    <!-- Panel de notificaciones -->
    <div class="notification-panel" id="notificationPanel">
      <div class="notification-panel-header">
        <h3>Notificaciones</h3>
        <button class="notification-close-btn" id="notificationCloseBtn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="notification-panel-body" id="notificationPanelBody">
        <!-- Se llenar√° din√°micamente con JS -->
      </div>
    </div>

    <!-- Backdrop para cerrar men√∫s -->
    <div class="menu-backdrop" id="menuBackdrop"></div>

    <!-- Sidebar (solo navegaci√≥n) -->
    <aside class="sidebar">
      <nav class="sidebar-nav">
        <button class="nav-item active" data-section="dashboard">
          <i class="fas fa-chart-line"></i>
          <span>Inicio</span>
        </button>
        <button class="nav-item" data-section="expenses">
          <i class="fas fa-plus-circle"></i>
          <span>Registrar Gasto</span>
        </button>
        <button class="nav-item requires-auth" data-section="goals">
          <i class="fas fa-bullseye"></i>
          <span>Metas</span>
        </button>
        <button class="nav-item requires-auth" data-section="budget">
          <i class="fas fa-wallet"></i>
          <span>Presupuesto</span>
        </button>
        <!-- COMENTADO: An√°lisis - Funcionalidad duplicada con Dashboard -->
        <!-- <button class="nav-item requires-auth" data-section="analysis">
          <i class="fas fa-chart-pie"></i>
          <span>An√°lisis</span>
        </button> -->
        <button class="nav-item requires-auth" data-section="history">
          <i class="fas fa-history"></i>
          <span>Historial</span>
        </button>
        <button class="nav-item requires-auth" data-section="achievements">
          <i class="fas fa-trophy"></i>
          <span>Logros</span>
        </button>
        <button class="nav-item requires-auth" data-section="shopping">
          <i class="fas fa-shopping-cart"></i>
          <span>Lista de Compras</span>
        </button>
        <button
          class="nav-item premium-only"
          data-section="store"
          style="display: none"
        >
          <i class="fas fa-store"></i>
          <span>Tienda</span>
        </button>
        <!-- COMENTADO: Historial de Auditor√≠a antiguo (registra modificaciones/ediciones)
             Puede ser √∫til en el futuro para un historial de cambios m√°s t√©cnico -->
        <!-- <button class="nav-item requires-auth" data-section="audit">
          <i class="fas fa-history"></i>
          <span>Historial</span>
        </button> -->
        <button class="nav-item requires-auth" data-section="config">
          <i class="fas fa-cog"></i>
          <span>Config</span>
        </button>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Secci√≥n Inicio -->
      <section id="dashboard" class="section active">
        <div class="section-header">
          <h1>¬°Bienvenido a tu asistente financiero!</h1>
          <p>Gestiona tus finanzas de manera inteligente y alcanza tus metas</p>
        </div>
        <!-- Financial Summary -->
        <div class="stats-grid">
          <!-- Tarjeta de Balance Total -->
          <div
            class="stat-card stat-card--primary animate-on-scroll"
            data-animation="fadeInUp"
            data-delay="100"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-wallet stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Balance Disponible</h3>
              <p class="stat-value" id="totalBalance">$0</p>
              <span class="stat-change">&nbsp;</span>
              <button
                class="btn-save-to-goals"
                id="btnSaveToGoals"
                style="
                  margin-top: 8px;
                  padding: 6px 12px;
                  font-size: 0.85rem;
                  background: var(--color-primary);
                  color: white;
                  border: none;
                  border-radius: 6px;
                  cursor: pointer;
                  transition: all 0.2s;
                "
              >
                <i class="fas fa-arrow-right" style="margin-right: 4px"></i>
                Ahorrar
              </button>
            </div>
          </div>

          <!-- Tarjeta de Gastos Totales -->
          <div
            class="stat-card stat-card--clickable animate-on-scroll"
            id="totalExpensesCard"
            data-animation="fadeInUp"
            data-delay="200"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-chart-bar stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Gastos Totales</h3>
              <p class="stat-value" id="totalExpenses">$0</p>
              <span class="stat-change negative" id="expensesChange"
                >+0% vs mes anterior</span
              >
            </div>
          </div>

          <!-- Tarjeta de Ahorros -->
          <div
            class="stat-card stat-card--savings animate-on-scroll"
            id="savingsCard"
            data-animation="fadeInUp"
            data-delay="300"
          >
            <div class="stat-icon-wrapper savings-icon-wrapper">
              <div class="savings-progress-ring" id="savingsProgressRing">
                <svg class="progress-circle" width="48" height="48">
                  <circle
                    class="progress-circle-bg"
                    cx="24"
                    cy="24"
                    r="20"
                    fill="none"
                    stroke-width="4"
                  ></circle>
                  <circle
                    class="progress-circle-fill"
                    cx="24"
                    cy="24"
                    r="20"
                    fill="none"
                    stroke-width="4"
                    stroke-dasharray="125.6"
                    stroke-dashoffset="125.6"
                    id="savingsProgressCircle"
                  ></circle>
                </svg>
                <i class="fas fa-piggy-bank stat-icon"></i>
              </div>
            </div>
            <div class="stat-details">
              <div class="savings-header">
                <h3>Ahorros</h3>
                <i class="fas fa-check savings-check" id="savingsCheck"></i>
              </div>
              <p class="stat-value" id="totalSavings">$0</p>
              <span
                class="stat-change savings-progress-text"
                id="savingsProgressText"
                >0% de la meta</span
              >
            </div>
          </div>

          <!-- Tarjeta de Transacciones -->
          <div
            class="stat-card stat-card--clickable animate-on-scroll"
            id="transactionsCard"
            data-animation="fadeInUp"
            data-delay="400"
            style="cursor: pointer"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-receipt stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Transacciones</h3>
              <p class="stat-value" id="totalTransactions">0</p>
              <span class="stat-change">Este mes</span>
            </div>
          </div>

          <!-- Tarjeta de Progreso Mensual -->
          <div
            class="stat-card stat-card--progress animate-on-scroll"
            data-animation="fadeInUp"
            data-delay="500"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-calendar-alt stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Progreso Mensual</h3>
              <p class="stat-value" id="monthlyProgress">0%</p>
              <span class="stat-change" id="monthlyProgressText"
                >Comenzaste con $0</span
              >
            </div>
          </div>

          <!-- Tarjeta de Presupuesto de Extras -->
          <div
            class="stat-card stat-card--clickable stat-card--budget animate-on-scroll"
            id="budgetCard"
            data-animation="fadeInUp"
            data-delay="600"
            style="cursor: pointer"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-gift stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Presupuesto Extras</h3>
              <p class="stat-value" id="budgetValue">$0</p>
              <span class="stat-change" id="budgetRemaining"
                >Para gustos: $0</span
              >
            </div>
          </div>
        </div>

        <!-- Panel Interactivo Premium -->
        <div
          class="premium-dashboard animate-on-scroll"
          data-animation="fadeIn"
          data-delay="600"
        >
          <div class="dashboard-grid">
            <!-- Left Column: Chart -->
            <div
              class="chart-column animate-on-scroll"
              data-animation="slideInLeft"
              data-delay="700"
            >
              <div class="chart-container-premium">
                <div class="chart-header">
                  <h3 class="chart-title">Distribuci√≥n de Gastos</h3>
                  <div class="chart-subtitle">
                    An√°lisis detallado de tus finanzas
                  </div>
                </div>
                <div class="burger-chart-wrapper">
                  <canvas id="premiumChart" width="400" height="400"></canvas>
                  <div class="chart-center-info">
                    <div class="total-amount" id="totalAmount">$0</div>
                    <div class="total-label">Total gastado</div>
                  </div>
                </div>
                <div class="chart-legend" id="chartLegend"></div>
              </div>

              <!-- Tendencia de Gastos Chart -->
              <div class="chart-container-premium">
                <div class="chart-header">
                  <h3 class="chart-title">Tendencia de Gastos</h3>
                  <div class="chart-subtitle">√öltimos 6 meses</div>
                </div>
                <div class="trend-chart-wrapper">
                  <canvas id="trendChart"></canvas>
                </div>
              </div>
            </div>

            <!-- Right Column: Individual Cards -->
            <div
              class="cards-column animate-on-scroll"
              data-animation="slideInRight"
              data-delay="800"
            >
              <!-- Cash Flow Card -->
              <div class="card">
                <div class="card__header">
                  <h3>Flujo de Caja</h3>
                  <span class="main-value" id="cashFlowTotal">$2,000</span>
                </div>
                <div class="card__body">
                  <div class="progress-bars">
                    <div class="progress-item">
                      <div class="progress-label">
                        <span>Gastos Necesarios</span>
                        <span class="progress-value" id="necessaryValue"
                          >$1,200</span
                        >
                      </div>
                      <div class="progress-bar">
                        <div
                          class="progress-fill necessary"
                          id="necessaryProgress"
                        ></div>
                      </div>
                    </div>
                    <div class="progress-item">
                      <div class="progress-label">
                        <span>Gastos No Necesarios</span>
                        <span class="progress-value" id="unnecessaryValue"
                          >$800</span
                        >
                      </div>
                      <div class="progress-bar">
                        <div
                          class="progress-fill unnecessary"
                          id="unnecessaryProgress"
                        ></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Upcoming Payments Card -->
              <div
                class="card upcoming-payments-card"
                id="upcomingPaymentsCard"
              >
                <div class="card__header">
                  <h3>Pr√≥ximos Pagos</h3>
                  <span class="payment-count" id="paymentCount"
                    >0 pendientes</span
                  >
                </div>
                <div class="card__body">
                  <div
                    class="payments-scroll-container"
                    id="paymentsScrollContainer"
                  >
                    <div class="payments-list" id="paymentsList">
                      <!-- Payments will be dynamically inserted -->
                      <div class="empty-state-small">
                        <i class="fas fa-money-bill-wave"></i>
                        <p>No hay pagos registrados</p>
                        <p class="empty-state-hint">
                          Configura tus pagos recurrentes en Configuraci√≥n
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Goals Progress Card -->
              <div class="card">
                <div class="card__header">
                  <h3>Progreso de Metas</h3>
                  <button class="cta-button" id="addGoalBtn">
                    <i class="fas fa-plus"></i> Nueva Meta
                  </button>
                </div>
                <div class="card__body">
                  <div class="goals-summary">
                    <div class="circular-progress">
                      <svg class="progress-ring" width="80" height="80">
                        <circle
                          class="progress-ring-bg"
                          cx="40"
                          cy="40"
                          r="35"
                          stroke-width="6"
                        ></circle>
                        <circle
                          class="progress-ring-fill"
                          cx="40"
                          cy="40"
                          r="35"
                          stroke-width="6"
                          id="goalsProgressRing"
                        ></circle>
                      </svg>
                      <div class="progress-center">
                        <i class="fas fa-piggy-bank"></i>
                      </div>
                    </div>
                    <div class="goals-info">
                      <div class="goals-text" id="goalsProgressText">
                        $4,200 / $6,000
                      </div>
                      <div
                        class="goals-percentage"
                        id="goalsProgressPercentage"
                      >
                        70%
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Quick Access Card -->
              <div class="card">
                <div class="card__header">
                  <h3>Acceso R√°pido</h3>
                  <span class="greeting" id="quickAccessGreeting"
                    >¬°Hola, Usuario!</span
                  >
                </div>
                <div class="card__body">
                  <div class="quick-access-content">
                    <div class="last-transaction" id="lastTransactionInfo">
                      <div class="transaction-label">√öltima transacci√≥n:</div>
                      <div
                        class="transaction-detail"
                        id="lastTransactionDetail"
                      >
                        <span class="transaction-desc">Sin transacciones</span>
                        <span class="transaction-amount">$0</span>
                      </div>
                    </div>
                    <button class="quick-action-btn" id="quickAddExpenseBtn">
                      <i class="fas fa-plus"></i>
                      <span>Registrar Gasto</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Bottom Panel: Floating Keywords & Insights -->
          <!-- <div class="insights-panel">
            <div class="floating-keywords">
              <div class="keyword-cloud">
                <span class="keyword" data-delay="0">Ahorro Inteligente</span>
                <span class="keyword" data-delay="200">Control Total</span>
                <span class="keyword" data-delay="400">Metas Claras</span>
                <span class="keyword" data-delay="600">Finanzas Sanas</span>
                <span class="keyword" data-delay="800">Inversi√≥n Segura</span>
                <span class="keyword" data-delay="1000">Futuro Pr√≥spero</span>
                <span class="keyword" data-delay="1200">Decisiones Sabias</span>
                <span class="keyword" data-delay="1400"
                  >Libertad Financiera</span
                >
              </div>
            </div>

            <div class="insights-cards">
              <div class="insight-card" id="insightCard1">
                <div class="insight-icon">üí°</div>
                <div class="insight-content">
                  <h4>Consejo del D√≠a</h4>
                  <p id="dailyTip">
                    Revisa tus gastos semanalmente para mantener el control
                  </p>
                </div>
              </div>

              <div class="insight-card" id="insightCard2">
                <div class="insight-icon">üìà</div>
                <div class="insight-content">
                  <h4>Tu Progreso</h4>
                  <p id="progressInsight">
                    Vas por buen camino hacia tus metas
                  </p>
                </div>
              </div>

              <div class="insight-card" id="insightCard3">
                <div class="insight-icon">üéØ</div>
                <div class="insight-content">
                  <h4>Pr√≥ximo Objetivo</h4>
                  <p id="nextGoal">Contin√∫a ahorrando para alcanzar tu meta</p>
                </div>
              </div>
            </div>
          </div> -->
        </div>

        <!-- Brand Carousel Section -->
        <div class="brand-carousel-container">
          <div class="brand-carousel-wrapper">
            <div class="brand-carousel-track" id="brandCarouselTrack">
              <!-- Brand Card 1 -->
              <div class="brand-card">
                <div class="brand-icon gradient-blue">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="brand-content">
                  <h3>An√°lisis Inteligente</h3>
                  <p>Rastrea y analiza gastos</p>
                </div>
              </div>

              <!-- Brand Card 2 -->
              <div class="brand-card">
                <div class="brand-icon gradient-purple">
                  <i class="fas fa-bullseye"></i>
                </div>
                <div class="brand-content">
                  <h3>Metas Personalizadas</h3>
                  <p>Define objetivos financieros</p>
                </div>
              </div>

              <!-- Brand Card 3 -->
              <div class="brand-card">
                <div class="brand-icon gradient-green">
                  <i class="fas fa-brain"></i>
                </div>
                <div class="brand-content">
                  <h3>IA Financiera</h3>
                  <p>Recomendaciones autom√°ticas</p>
                </div>
              </div>

              <!-- Brand Card 4 -->
              <div class="brand-card">
                <div class="brand-icon gradient-orange">
                  <i class="fas fa-trophy"></i>
                </div>
                <div class="brand-content">
                  <h3>Sistema de Logros</h3>
                  <p>Gamificaci√≥n motivacional</p>
                </div>
              </div>

              <!-- Brand Card 5 -->
              <div class="brand-card">
                <div class="brand-icon gradient-red">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <div class="brand-content">
                  <h3>Seguridad Total</h3>
                  <p>Protecci√≥n de grado bancario</p>
                </div>
              </div>

              <!-- Brand Card 6 -->
              <div class="brand-card">
                <div class="brand-icon gradient-teal">
                  <i class="fas fa-mobile-alt"></i>
                </div>
                <div class="brand-content">
                  <h3>Multiplataforma</h3>
                  <p>Sincronizaci√≥n en la nube</p>
                </div>
              </div>

              <!-- Brand Card 7 -->
              <div class="brand-card">
                <div class="brand-icon gradient-pink">
                  <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="brand-content">
                  <h3>Lista Inteligente</h3>
                  <p>Compras organizadas</p>
                </div>
              </div>

              <!-- Brand Card 8 -->
              <div class="brand-card">
                <div class="brand-icon gradient-indigo">
                  <i class="fas fa-chart-pie"></i>
                </div>
                <div class="brand-content">
                  <h3>Visualizaci√≥n</h3>
                  <p>Gr√°ficos interactivos</p>
                </div>
              </div>

              <!-- Duplicate set for infinite scroll -->
              <div class="brand-card">
                <div class="brand-icon gradient-blue">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="brand-content">
                  <h3>An√°lisis Inteligente</h3>
                  <p>Rastrea y analiza gastos</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-purple">
                  <i class="fas fa-bullseye"></i>
                </div>
                <div class="brand-content">
                  <h3>Metas Personalizadas</h3>
                  <p>Define objetivos financieros</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-green">
                  <i class="fas fa-brain"></i>
                </div>
                <div class="brand-content">
                  <h3>IA Financiera</h3>
                  <p>Recomendaciones autom√°ticas</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-orange">
                  <i class="fas fa-trophy"></i>
                </div>
                <div class="brand-content">
                  <h3>Sistema de Logros</h3>
                  <p>Gamificaci√≥n motivacional</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-red">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <div class="brand-content">
                  <h3>Seguridad Total</h3>
                  <p>Protecci√≥n de grado bancario</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-teal">
                  <i class="fas fa-mobile-alt"></i>
                </div>
                <div class="brand-content">
                  <h3>Multiplataforma</h3>
                  <p>Sincronizaci√≥n en la nube</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-pink">
                  <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="brand-content">
                  <h3>Lista Inteligente</h3>
                  <p>Compras organizadas</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-indigo">
                  <i class="fas fa-chart-pie"></i>
                </div>
                <div class="brand-content">
                  <h3>Visualizaci√≥n</h3>
                  <p>Gr√°ficos interactivos</p>
                </div>
              </div>

              <!-- Third set for seamless loop -->
              <div class="brand-card">
                <div class="brand-icon gradient-blue">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="brand-content">
                  <h3>An√°lisis Inteligente</h3>
                  <p>Rastrea y analiza gastos</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-purple">
                  <i class="fas fa-bullseye"></i>
                </div>
                <div class="brand-content">
                  <h3>Metas Personalizadas</h3>
                  <p>Define objetivos financieros</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-green">
                  <i class="fas fa-brain"></i>
                </div>
                <div class="brand-content">
                  <h3>IA Financiera</h3>
                  <p>Recomendaciones autom√°ticas</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-orange">
                  <i class="fas fa-trophy"></i>
                </div>
                <div class="brand-content">
                  <h3>Sistema de Logros</h3>
                  <p>Gamificaci√≥n motivacional</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- AI Recommendations -->
        <div class="card">
          <div class="card__header">
            <h3>Recomendaciones de Ahorro <i class="fas fa-robot"></i></h3>
          </div>
          <div class="card__body">
            <div id="aiRecommendations"></div>
          </div>
        </div>

        <!-- Recent Transactions -->
        <div class="card">
          <div class="card__header">
            <h3>Transacciones Recientes</h3>
          </div>
          <div class="card__body">
            <div id="recentTransactions"></div>
          </div>
        </div>
      </section>

      <!-- Expense Registration Section - Premium Enterprise -->
      <section id="expenses" class="section">
        <div class="section-header">
          <h1>üí≥ Registro de Gastos</h1>
          <p>Sistema avanzado de registro con validaci√≥n inteligente</p>
        </div>

        <!-- Premium Expense Form Card -->
        <div class="expense-form-premium">
          <div class="expense-form-tabs">
            <button class="expense-tab-btn active" data-tab="manual">
              <i class="fas fa-keyboard"></i>
              <span>Manual</span>
            </button>
            <button class="expense-tab-btn" data-tab="quick">
              <i class="fas fa-bolt"></i>
              <span>R√°pido</span>
            </button>
            <button class="expense-tab-btn" data-tab="recurring">
              <i class="fas fa-repeat"></i>
              <span>Recurrente</span>
            </button>
          </div>

          <form id="expenseForm" class="expense-form-content">
            <!-- Amount Section - Featured -->
            <div class="expense-amount-section">
              <label class="expense-amount-label">Monto del gasto</label>
              <div class="expense-amount-input-wrapper">
                <span class="expense-currency">$</span>
                <input
                  type="number"
                  id="amount"
                  class="expense-amount-input"
                  placeholder="0.00"
                  step="0.01"
                  min="0"
                  required
                  autofocus
                />
              </div>
              <div class="expense-amount-suggestions" id="amountSuggestions">
                <!-- Dynamic suggestions will be added here -->
              </div>
            </div>

            <!-- Description with Autocomplete -->
            <div class="form-group-premium">
              <label class="form-label-premium" for="description">
                <i class="fas fa-align-left" aria-hidden="true"></i>
                Descripci√≥n del gasto
              </label>
              <div class="input-with-icon">
                <input
                  type="text"
                  id="description"
                  class="form-input-premium"
                  placeholder="¬øEn qu√© gastaste?"
                  required
                  autocomplete="off"
                />
                <div
                  class="autocomplete-dropdown hidden"
                  id="descriptionAutocomplete"
                ></div>
              </div>
            </div>

            <!-- Grid Layout for Category and Necessity -->
            <div class="form-grid-2">
              <div class="form-group-premium">
                <label class="form-label-premium">
                  <i class="fas fa-tag"></i>
                  Categor√≠a
                </label>
                <div class="category-selector-premium">
                  <select
                    id="category"
                    class="form-input-premium form-select-premium category-select"
                    required
                  >
                    <option value="">Selecciona categor√≠a</option>
                    <option value="Alimentaci√≥n" data-icon="üçΩÔ∏è">
                      Alimentaci√≥n
                    </option>
                    <option value="Transporte" data-icon="üöó">
                      Transporte
                    </option>
                    <option value="Entretenimiento" data-icon="üé¨">
                      Entretenimiento
                    </option>
                    <option value="Salud" data-icon="üè•">Salud</option>
                    <option value="Servicios" data-icon="‚ö°">Servicios</option>
                    <option value="Compras" data-icon="üõçÔ∏è">Compras</option>
                    <option value="Otros" data-icon="üì¶">Otros</option>
                  </select>
                </div>
              </div>

              <div class="form-group-premium">
                <label class="form-label-premium">
                  <i class="fas fa-chart-line"></i>
                  Prioridad
                </label>
                <select
                  id="necessity"
                  class="form-input-premium form-select-premium"
                  required
                >
                  <option value="">Nivel de necesidad</option>
                  <option value="Muy Necesario">
                    ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Muy Indispensable
                  </option>
                  <option value="Necesario">‚≠ê‚≠ê‚≠ê‚≠ê Muy Necesario</option>
                  <option value="Poco Necesario">‚≠ê‚≠ê‚≠ê Necesario</option>
                  <option value="No Necesario">‚≠ê‚≠ê Poco Necesario</option>
                  <option value="Compra por Impulso">‚≠ê Nada Necesario</option>
                  <option value="Malgasto">‚ùå Malgasto/Arrepentimiento</option>
                </select>
              </div>
            </div>

            <!-- Grid Layout for Date and User -->
            <div class="form-grid-2">
              <div class="form-group-premium">
                <label class="form-label-premium">
                  <i class="fas fa-calendar-alt"></i>
                  Fecha
                </label>
                <input
                  type="date"
                  id="date"
                  class="form-input-premium"
                  required
                />
              </div>

              <div class="form-group-premium">
                <label class="form-label-premium">
                  <i class="fas fa-user"></i>
                  Usuario
                </label>
                <select
                  id="user"
                  class="form-input-premium form-select-premium"
                >
                  <option value="">Sin asignar</option>
                  <option value="__add_new__">+ A√±adir usuario</option>
                </select>
              </div>
            </div>

            <!-- New User Input (Hidden by default) -->
            <div class="form-group-premium hidden" id="newUserGroup">
              <label class="form-label-premium">
                <i class="fas fa-user-plus"></i>
                Nombre del nuevo usuario
              </label>
              <div style="display: flex; gap: 8px; align-items: center">
                <input
                  type="text"
                  id="newUserName"
                  class="form-input-premium"
                  placeholder="Nombre del usuario"
                  style="flex: 1"
                />
                <button
                  type="button"
                  class="btn-icon-primary"
                  id="saveNewUserBtn"
                  title="Guardar usuario"
                >
                  <i class="fas fa-check"></i>
                </button>
              </div>
            </div>

            <!-- Budget Impact Alert -->
            <div class="budget-impact-alert hidden" id="budgetImpactAlert">
              <i class="fas fa-exclamation-triangle"></i>
              <span id="budgetImpactText"></span>
            </div>

            <!-- Form Actions -->
            <div class="expense-form-actions">
              <button
                type="button"
                class="btn-expense-secondary"
                id="clearExpenseForm"
              >
                <i class="fas fa-eraser"></i>
                Limpiar
              </button>
              <button type="submit" class="btn-expense-primary">
                <i class="fas fa-check-circle"></i>
                Registrar Gasto
              </button>
            </div>

            <!-- Quick Stats Below Form -->
            <div class="expense-form-stats">
              <div class="form-stat-item">
                <span class="stat-value" id="todayExpensesCount">0</span>
                <span class="stat-label">Hoy</span>
              </div>
              <div class="form-stat-item">
                <span class="stat-value" id="todayExpensesTotal">$0</span>
                <span class="stat-label">Total hoy</span>
              </div>
              <div class="form-stat-item">
                <span class="stat-value" id="monthExpensesTotal">$0</span>
                <span class="stat-label">Este mes</span>
              </div>
            </div>
          </form>
        </div>

        <!-- Expense List -->
        <div class="card">
          <div class="card__header">
            <h3>Historial de Gastos</h3>
          </div>
          <div class="card__body">
            <div id="expenseList"></div>
          </div>
        </div>
      </section>

      <!-- Goals Section -->
      <section id="goals" class="section">
        <div class="section-header">
          <h1>Metas Financieras</h1>
          <p>Define y monitorea tus objetivos de ahorro</p>
        </div>
        <div class="card">
          <div class="card__header">
            <h3>Nueva Meta Financiera</h3>
          </div>
          <div class="card__body">
            <div class="goal-form-container">
              <div class="goal-inspiration-panel" id="goalInspirationPanel">
                <div class="inspiration-image-wrapper">
                  <img
                    id="inspirationImage"
                    src=""
                    alt="Inspiraci√≥n"
                    class="inspiration-image"
                  />
                  <div class="inspiration-overlay">
                    <p class="inspiration-text">‚ú® Visualiza tu meta</p>
                  </div>
                </div>
              </div>

              <form id="goalForm">
                <div class="form-grid">
                  <div class="form-group">
                    <label class="form-label" for="goalName"
                      >Nombre de la Meta</label
                    >
                    <input
                      type="text"
                      id="goalName"
                      class="form-control"
                      placeholder="Ej. Vacaciones en la playa"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="goalTarget"
                      >Cantidad Objetivo ($)</label
                    >
                    <input
                      type="number"
                      id="goalTarget"
                      class="form-control"
                      placeholder="1000"
                      step="0.01"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="goalDeadline"
                      >Fecha L√≠mite</label
                    >
                    <input
                      type="date"
                      id="goalDeadline"
                      class="form-control"
                      required
                    />
                  </div>
                </div>
                <button type="submit" class="btn btn--primary">
                  <i class="fas fa-target"></i> Crear Meta
                </button>
              </form>
            </div>
          </div>
        </div>

        <!-- Goals List -->
        <div id="goalsList"></div>
      </section>

      <!-- Analysis Section -->
      <section id="analysis" class="section">
        <div class="section-header">
          <h1>An√°lisis de Gastos</h1>
          <p>Visualiza patrones y tendencias en tus finanzas</p>
        </div>

        <div class="analysis-grid">
          <div class="card radar-chart-card">
            <div class="card__header">
              <h3>Balance Financiero Multidimensional</h3>
              <p>Tu perfil financiero en diferentes categor√≠as</p>
            </div>
            <div class="card__body">
              <div class="radar-chart-container">
                <canvas id="radarChart"></canvas>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card__header">
              <h3>Gastos por Usuario</h3>
            </div>
            <div class="card__body">
              <div
                class="chart-container"
                style="position: relative; height: 300px"
              >
                <canvas id="userExpenseChart"></canvas>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card__header">
              <h3>Necesidad vs No Necesario</h3>
            </div>
            <div class="card__body">
              <div
                class="chart-container"
                style="position: relative; height: 300px"
              >
                <canvas id="necessityChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card__header">
            <h3>Gastos Innecesarios del Mes</h3>
          </div>
          <div class="card__body">
            <div id="unnecessaryExpenses"></div>
          </div>
        </div>
      </section>

      <!-- History Section -->
      <section id="history" class="section">
        <div class="section-header">
          <h1>üìú Historial de Transacciones</h1>
          <p>Registro completo de todos tus movimientos financieros</p>
        </div>

        <!-- Filtros y Buscador -->
        <div class="card">
          <div class="card__header">
            <h3><i class="fas fa-filter"></i> Filtros y B√∫squeda</h3>
          </div>
          <div class="card__body">
            <div class="history-filters">
              <!-- Buscador -->
              <div class="form-group">
                <label class="form-label">
                  <i class="fas fa-search"></i> Buscar
                </label>
                <input
                  type="text"
                  id="historySearch"
                  class="form-control"
                  placeholder="Buscar por descripci√≥n..."
                />
              </div>

              <!-- Filtro por Tipo -->
              <div class="form-group">
                <label class="form-label">
                  <i class="fas fa-tag"></i> Tipo
                </label>
                <select id="historyFilterType" class="form-control">
                  <option value="todos">Todos</option>
                  <option value="gasto">üí∏ Gastos</option>
                  <option value="sueldo">üí∞ Sueldos</option>
                  <option value="entrada_extra">‚ú® Entradas Extra</option>
                  <option value="abono_meta">üéØ Abonos a Metas</option>
                  <option value="retiro_meta">‚Ü©Ô∏è Retiros de Metas</option>
                </select>
              </div>

              <!-- Filtro por Categor√≠a (solo gastos) -->
              <div class="form-group">
                <label class="form-label">
                  <i class="fas fa-list"></i> Categor√≠a
                </label>
                <select id="historyFilterCategory" class="form-control">
                  <option value="todas">Todas</option>
                  <option value="Alimentaci√≥n">Alimentaci√≥n</option>
                  <option value="Transporte">Transporte</option>
                  <option value="Entretenimiento">Entretenimiento</option>
                  <option value="Salud">Salud</option>
                  <option value="Servicios">Servicios</option>
                  <option value="Compras">Compras</option>
                  <option value="Otros">Otros</option>
                </select>
              </div>

              <!-- Ordenar -->
              <div class="form-group">
                <label class="form-label">
                  <i class="fas fa-sort"></i> Ordenar por
                </label>
                <select id="historySort" class="form-control">
                  <option value="date-desc">Fecha (m√°s reciente)</option>
                  <option value="date-asc">Fecha (m√°s antiguo)</option>
                  <option value="amount-desc">Monto (mayor a menor)</option>
                  <option value="amount-asc">Monto (menor a mayor)</option>
                  <option value="type">Tipo</option>
                </select>
              </div>

              <!-- Rango de fechas -->
              <div class="form-group">
                <label class="form-label">
                  <i class="fas fa-calendar"></i> Desde
                </label>
                <input
                  type="date"
                  id="historyDateFrom"
                  class="form-control"
                />
              </div>

              <div class="form-group">
                <label class="form-label">
                  <i class="fas fa-calendar"></i> Hasta
                </label>
                <input
                  type="date"
                  id="historyDateTo"
                  class="form-control"
                />
              </div>

              <!-- Botones de acci√≥n -->
              <div class="form-group" style="display: flex; gap: 10px;">
                <button class="btn btn-primary" id="btnApplyHistoryFilters">
                  <i class="fas fa-check"></i> Aplicar
                </button>
                <button class="btn btn-secondary" id="btnClearHistoryFilters">
                  <i class="fas fa-times"></i> Limpiar
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Estad√≠sticas R√°pidas -->
        <div class="stats-grid" style="margin-top: 20px;">
          <div class="stat-card">
            <div class="stat-icon-wrapper">
              <i class="fas fa-list stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Total Transacciones</h3>
              <p class="stat-value" id="historyTotalCount">0</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon-wrapper" style="background: var(--color-success);">
              <i class="fas fa-arrow-up stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Total Ingresos</h3>
              <p class="stat-value" id="historyTotalIncome">$0</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon-wrapper" style="background: var(--color-danger);">
              <i class="fas fa-arrow-down stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Total Gastos</h3>
              <p class="stat-value" id="historyTotalExpenses">$0</p>
            </div>
          </div>
        </div>

        <!-- Lista de Transacciones -->
        <div class="card" style="margin-top: 20px;">
          <div class="card__header">
            <h3><i class="fas fa-history"></i> Transacciones</h3>
            <span id="historyResultCount" class="badge">0 resultados</span>
          </div>
          <div class="card__body">
            <div id="historyList"></div>
          </div>
        </div>
      </section>

      <!-- Shopping List Section -->
      <section id="shopping" class="section">
        <div class="section-header">
          <h1>Lista de Compras</h1>
          <p>Organiza tus compras y controla gastos de mercader√≠a</p>
        </div>
        <div class="card">
          <div class="card__header">
            <h3>Agregar Producto</h3>
          </div>
          <div class="card__body">
            <form id="shoppingForm">
              <div class="form-grid">
                <div class="form-group">
                  <label class="form-label" for="product">Producto</label>
                  <input
                    type="text"
                    id="product"
                    class="form-control"
                    placeholder="Ej. Leche, Pan"
                    required
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="quantity">Cantidad</label>
                  <input
                    type="number"
                    id="quantity"
                    class="form-control"
                    placeholder="1"
                    min="1"
                    required
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="necessary"
                    >¬øEs necesario?</label
                  >
                  <select id="necessary" class="form-control" required>
                    <option value="">Selecciona</option>
                    <option value="true">S√≠</option>
                    <option value="false">No</option>
                  </select>
                </div>
              </div>
              <button type="submit" class="btn btn--primary">
                <i class="fas fa-plus"></i> Agregar Producto
              </button>
            </form>
          </div>
        </div>

        <!-- Shopping List -->
        <div class="card">
          <div class="card__header">
            <h3>Lista Actual</h3>
            <button class="btn btn--secondary btn--sm" id="generateList">
              <i class="fas fa-download"></i> Generar Lista
            </button>
          </div>
          <div class="card__body">
            <div id="shoppingList"></div>
          </div>
        </div>
      </section>

      <!-- Budget Section -->
      <section id="budget" class="section">
        <div class="section-header">
          <h1>üéâ Presupuesto de Ocio</h1>
          <p>
            Planifica tus gastos extras: entretenimiento, salidas, caprichos y
            diversi√≥n
          </p>
        </div>

        <!-- Leisure Budget Summary Card -->
        <div class="card budget-summary-card">
          <div class="card__header">
            <h3>Resumen de Ocio del Mes</h3>
            <div class="budget-month-selector">
              <button class="btn btn--icon" id="prevMonthBtn">
                <i class="fas fa-chevron-left"></i>
              </button>
              <span id="currentBudgetMonth" class="budget-month-label"></span>
              <button class="btn btn--icon" id="nextMonthBtn">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
          <div class="card__body">
            <div class="budget-summary-stats">
              <div class="budget-stat">
                <div class="budget-stat-icon budget-stat-icon--primary">
                  <i class="fas fa-gift"></i>
                </div>
                <div class="budget-stat-content">
                  <span class="budget-stat-label">Presupuesto de Ocio</span>
                  <span class="budget-stat-value" id="totalBudgetLimit"
                    >$0</span
                  >
                </div>
              </div>
              <div class="budget-stat">
                <div class="budget-stat-icon budget-stat-icon--warning">
                  <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="budget-stat-content">
                  <span class="budget-stat-label">Gastado en Ocio</span>
                  <span class="budget-stat-value" id="totalBudgetSpent"
                    >$0</span
                  >
                </div>
              </div>
              <div class="budget-stat">
                <div class="budget-stat-icon budget-stat-icon--success">
                  <i class="fas fa-piggy-bank"></i>
                </div>
                <div class="budget-stat-content">
                  <span class="budget-stat-label">Disponible para Gustos</span>
                  <span class="budget-stat-value" id="totalBudgetAvailable"
                    >$0</span
                  >
                </div>
              </div>
            </div>
            <div class="budget-overall-progress">
              <div class="progress-header">
                <span>Progreso de Ocio</span>
                <span id="overallBudgetPercentage">0%</span>
              </div>
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  id="overallBudgetProgress"
                  style="width: 0%"
                ></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Leisure Budget Setup Card -->
        <div class="card">
          <div class="card__header">
            <h3>üéä Configurar Gastos de Ocio</h3>
            <button class="btn btn--secondary btn--sm" id="resetBudgetBtn">
              <i class="fas fa-redo"></i> Restablecer
            </button>
          </div>
          <div class="card__body">
            <form id="budgetSetupForm">
              <!-- Lista de gastos de ocio -->
              <div id="leisureItemsList" class="leisure-items-list">
                <!-- Se llenar√° din√°micamente con items de ocio -->
              </div>

              <!-- Formulario para agregar nuevo gasto de ocio -->
              <div class="leisure-item-form">
                <div class="form-row">
                  <div class="form-group" style="flex: 2">
                    <label>¬øPara qu√©?</label>
                    <input
                      type="text"
                      class="form-control"
                      id="leisureItemDescription"
                      placeholder="Ej: Cine, Cumplea√±os, Salida a comer..."
                      maxlength="50"
                    />
                  </div>
                  <div class="form-group" style="flex: 1">
                    <label>Monto (solo n√∫meros)</label>
                    <input
                      type="text"
                      class="form-control"
                      id="leisureItemAmount"
                      placeholder="Ej: 30000"
                      inputmode="numeric"
                      pattern="[0-9]*"
                    />
                  </div>
                  <div class="form-group" style="flex: 0 0 auto">
                    <label style="visibility: hidden">.</label>
                    <button
                      type="button"
                      class="btn btn--success"
                      id="addLeisureItemBtn"
                    >
                      <i class="fas fa-plus"></i> Agregar
                    </button>
                  </div>
                </div>
              </div>

              <button
                type="submit"
                class="btn btn--primary btn--block"
                style="margin-top: 20px"
              >
                <i class="fas fa-save"></i> Guardar Presupuesto de Ocio
              </button>
            </form>
          </div>
        </div>

        <!-- Leisure Items Progress -->
        <div class="card">
          <div class="card__header">
            <h3>Estado de Gastos de Ocio</h3>
          </div>
          <div class="card__body">
            <div id="budgetCategoriesProgress">
              <!-- Se llenar√° din√°micamente con el progreso de cada item -->
            </div>
          </div>
        </div>
      </section>

      <!-- Achievements Section -->
      <section id="achievements" class="section">
        <div class="section-header">
          <h1>üèÜ Logros y Insignias</h1>
          <p>Desbloquea insignias mientras dominas tus finanzas</p>
        </div>

        <div class="achievements-stats">
          <div class="achievement-stat-card">
            <div class="stat-icon">
              <i class="fas fa-medal"></i>
            </div>
            <div class="stat-content">
              <span class="stat-number" id="unlockedCount">0</span>
              <span class="stat-label">Logros Desbloqueados</span>
            </div>
          </div>
          <div class="achievement-stat-card">
            <div class="stat-icon">
              <i class="fas fa-percentage"></i>
            </div>
            <div class="stat-content">
              <span class="stat-number" id="progressPercentage">0%</span>
              <span class="stat-label">Progreso Total</span>
            </div>
          </div>
        </div>

        <div class="achievements-grid" id="achievementsGrid">
          <!-- Las tarjetas de logros se generar√°n din√°micamente aqu√≠ -->
        </div>
      </section>

      <!-- Store Section -->
      <section id="store" class="section">
        <div class="section-header">
          <h1>Tienda de Estilos</h1>
          <p>Personaliza la apariencia de tus gr√°ficos y avatar</p>
        </div>

        <div class="store-container">
          <div class="store-header">
            <div class="coins-display">
              <i class="fas fa-coins"></i>
              <span id="userCoins">0</span> monedas
            </div>
          </div>

          <!-- Avatar Gallery Section -->
          <div class="store-section">
            <div class="store-section-header">
              <h2><i class="fas fa-user-circle"></i> Galer√≠a de Avatares</h2>
              <p>Elige tu avatar personalizado</p>
            </div>
            <div class="avatar-gallery" id="avatarGallery">
              <div class="avatar-option" data-avatar="avatar-1">
                <div class="avatar-icon gradient-blue">
                  <i class="fas fa-user-astronaut"></i>
                </div>
                <span class="avatar-name">Astronauta</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-2">
                <div class="avatar-icon gradient-purple">
                  <i class="fas fa-user-ninja"></i>
                </div>
                <span class="avatar-name">Ninja</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-3">
                <div class="avatar-icon gradient-green">
                  <i class="fas fa-user-tie"></i>
                </div>
                <span class="avatar-name">Ejecutivo</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-4">
                <div class="avatar-icon gradient-orange">
                  <i class="fas fa-user-graduate"></i>
                </div>
                <span class="avatar-name">Graduado</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-5">
                <div class="avatar-icon gradient-red">
                  <i class="fas fa-user-secret"></i>
                </div>
                <span class="avatar-name">Agente</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-6">
                <div class="avatar-icon gradient-teal">
                  <i class="fas fa-user-md"></i>
                </div>
                <span class="avatar-name">Doctor</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-7">
                <div class="avatar-icon gradient-pink">
                  <i class="fas fa-user-crown"></i>
                </div>
                <span class="avatar-name">Realeza</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-8">
                <div class="avatar-icon gradient-indigo">
                  <i class="fas fa-user-robot"></i>
                </div>
                <span class="avatar-name">Robot</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-9">
                <div class="avatar-icon gradient-yellow">
                  <i class="fas fa-user-shield"></i>
                </div>
                <span class="avatar-name">Guardi√°n</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-10">
                <div class="avatar-icon gradient-cyan">
                  <i class="fas fa-user-check"></i>
                </div>
                <span class="avatar-name">Pro</span>
              </div>
            </div>
          </div>

          <!-- Chart Styles Section -->
          <div class="store-section">
            <div class="store-section-header">
              <h2><i class="fas fa-palette"></i> Estilos de Gr√°ficos</h2>
              <p>Cambia los colores de tus gr√°ficos</p>
            </div>
            <div class="store-grid" id="storeGrid">
              <!-- Las tarjetas de productos se generar√°n din√°micamente aqu√≠ -->
            </div>
          </div>
        </div>
      </section>

      <!-- ========================================
           COMENTADO: Audit History Section (Historial de Auditor√≠a antiguo)
           Este historial registra modificaciones/ediciones espec√≠ficas a nivel t√©cnico.
           Se mantiene comentado para posible uso futuro como:
           - Historial de cambios administrativos
           - Log de ediciones por usuario
           - Auditor√≠a de modificaciones cr√≠ticas
           ======================================== -->
      <!-- <section id="audit" class="section">
        <div class="section-header">
          <h1>Historial</h1>
          <p>Registro completo de todas las modificaciones realizadas</p>
        </div>

        <div class="audit-container">
          <div class="audit-filters">
            <div class="filter-group">
              <label for="auditTypeFilter">Tipo de cambio</label>
              <div class="input-group">
                <i class="fas fa-filter"></i>
                <select id="auditTypeFilter" class="form-select">
                  <option value="all">üìã Todos los cambios</option>
                  <option value="expense_added">‚ûï Gasto a√±adido</option>
                  <option value="expense_edited">‚úèÔ∏è Gasto editado</option>
                  <option value="expense_deleted">üóëÔ∏è Gasto eliminado</option>
                  <option value="goal_added">üéØ Meta a√±adida</option>
                  <option value="goal_edited">‚úèÔ∏è Meta editada</option>
                  <option value="goal_deleted">üóëÔ∏è Meta eliminada</option>
                  <option value="payment_added">üí≥ Pago a√±adido</option>
                  <option value="payment_deleted">üóëÔ∏è Pago eliminado</option>
                  <option value="shopping_added">üõí Compra a√±adida</option>
                  <option value="shopping_deleted">üóëÔ∏è Compra eliminada</option>
                </select>
              </div>
            </div>
            <div class="filter-group">
              <label for="auditDaysFilter">√öltimos d√≠as</label>
              <div class="input-group">
                <i class="fas fa-calendar-alt"></i>
                <select id="auditDaysFilter" class="form-select">
                  <option value="all">üóìÔ∏è Todos los registros</option>
                  <option value="1">Hoy</option>
                  <option value="3">√öltimos 3 d√≠as</option>
                  <option value="7" selected>√öltimos 7 d√≠as</option>
                  <option value="14">√öltimos 14 d√≠as</option>
                  <option value="30">√öltimos 30 d√≠as</option>
                  <option value="60">√öltimos 2 meses</option>
                  <option value="90">√öltimos 3 meses</option>
                </select>
              </div>
            </div>
            <button class="btn btn--secondary" id="clearAuditFilters">
              <i class="fas fa-times"></i> Limpiar filtros
            </button>
          </div>

          <div class="audit-list" id="auditList">
            <div class="audit-empty">
              <i class="fas fa-history"></i>
              <p>No hay cambios registrados</p>
            </div>
          </div>
        </div>
      </section> -->

      <!-- Configuration Section -->
      <section id="config" class="section">
        <div class="section-header">
          <h1>‚öôÔ∏è Configuraci√≥n</h1>
          <p>Personaliza tu experiencia y ajusta tus preferencias</p>
        </div>

        <!-- Configuraci√≥n Simplificada -->
        <div class="settings-simple-container">

          <!-- 1. Tema / Modo Claro-Oscuro -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-palette"></i> Tema de la aplicaci√≥n</h3>
              <p>Cambia entre modo claro, oscuro o autom√°tico</p>
            </div>
            <div class="settings-card-body">
              <div class="theme-options">
                <button class="theme-option active" data-theme="light">
                  <div class="theme-preview theme-light">
                    <div class="theme-circle"></div>
                    <div class="theme-circle"></div>
                    <div class="theme-circle"></div>
                  </div>
                  <span>Claro</span>
                </button>
                <button class="theme-option" data-theme="dark">
                  <div class="theme-preview theme-dark">
                    <div class="theme-circle"></div>
                    <div class="theme-circle"></div>
                    <div class="theme-circle"></div>
                  </div>
                  <span>Oscuro</span>
                </button>
                <button class="theme-option" data-theme="auto">
                  <div class="theme-preview theme-auto">
                    <div class="theme-circle"></div>
                    <div class="theme-circle"></div>
                    <div class="theme-circle"></div>
                  </div>
                  <span>Autom√°tico</span>
                </button>
              </div>
            </div>
          </div>

          <!-- 2. Cambiar Foto de Perfil -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-user-circle"></i> Foto de perfil</h3>
              <p>Personaliza tu imagen de usuario</p>
            </div>
            <div class="settings-card-body">
              <div class="profile-avatar-section">
                <div class="current-avatar" id="currentProfileAvatar">
                  <div class="avatar-preview">
                    <i class="fas fa-user"></i>
                  </div>
                  <button class="avatar-edit-badge" id="changeAvatarBtn">
                    <i class="fas fa-camera"></i>
                  </button>
                </div>
                <div class="profile-info">
                  <h4 id="profileUserName">Usuario</h4>
                  <p class="profile-email">usuario@financiapro.com</p>
                  <span class="profile-badge">
                    <i class="fas fa-crown"></i> Usuario activo
                  </span>
                </div>
              </div>
              <div style="margin-top: var(--space-16);">
                <button class="btn-premium btn-premium-primary" id="uploadAvatarBtn">
                  <i class="fas fa-upload"></i> Subir nueva foto
                </button>
                <button class="btn-premium btn-premium-outline" id="removeAvatarBtn" style="margin-left: var(--space-8);">
                  <i class="fas fa-trash"></i> Eliminar foto
                </button>
              </div>
            </div>
          </div>

          <!-- 3. Cambiar Portada -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-image"></i> Imagen de portada</h3>
              <p>Cambia la imagen de fondo de tu perfil</p>
            </div>
            <div class="settings-card-body">
              <div class="cover-image-preview" id="coverImagePreview" style="width: 100%; height: 150px; background: linear-gradient(135deg, var(--color-primary), var(--color-secondary)); border-radius: 12px; margin-bottom: var(--space-16); position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                <div style="text-align: center; color: white; font-size: 14px; opacity: 0.9;">
                  <i class="fas fa-image" style="font-size: 32px; margin-bottom: 8px;"></i>
                  <p>Vista previa de la portada</p>
                </div>
              </div>
              <button class="btn-premium btn-premium-primary" id="changeCoverBtn">
                <i class="fas fa-upload"></i> Cambiar portada
              </button>
              <button class="btn-premium btn-premium-outline" id="removeCoverBtn" style="margin-left: var(--space-8);">
                <i class="fas fa-trash"></i> Eliminar portada
              </button>
            </div>
          </div>

          <!-- 4. Cambiar Nombre de Usuario -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-signature"></i> Nombre de usuario</h3>
              <p>Actualiza c√≥mo te llamas en la aplicaci√≥n</p>
            </div>
            <div class="settings-card-body">
              <div class="form-group-premium">
                <label class="form-label-premium">Nombre completo</label>
                <input
                  type="text"
                  class="form-input-premium"
                  id="profileNameInput"
                  placeholder="Ingresa tu nombre"
                />
                <span class="form-hint">Este nombre aparecer√° en tus reportes y res√∫menes</span>
              </div>
              <div class="form-actions-premium">
                <button class="btn-premium btn-premium-primary" id="saveProfileBtn">
                  <i class="fas fa-check"></i> Guardar nombre
                </button>
              </div>
            </div>
          </div>

          <!-- 5. Cambiar Contrase√±a -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-key"></i> Seguridad</h3>
              <p>Gestiona tu contrase√±a y configuraci√≥n de acceso</p>
            </div>
            <div class="settings-card-body">
              <div class="settings-list">
                <div class="settings-list-item">
                  <div class="settings-list-icon">
                    <i class="fas fa-lock"></i>
                  </div>
                  <div class="settings-list-content">
                    <span class="settings-list-title">Contrase√±a</span>
                    <span class="settings-list-subtitle">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
                  </div>
                  <button class="btn-premium btn-premium-sm" id="configChangePasswordBtn">
                    Cambiar
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- 6. Notificar un Problema -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-bug"></i> Soporte y ayuda</h3>
              <p>Reporta problemas o solicita asistencia</p>
            </div>
            <div class="settings-card-body">
              <div class="settings-list">
                <div class="settings-list-item">
                  <div class="settings-list-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                  </div>
                  <div class="settings-list-content">
                    <span class="settings-list-title">Reportar un problema</span>
                    <span class="settings-list-subtitle">Env√≠a un reporte sobre errores o sugerencias</span>
                  </div>
                  <button class="btn-premium btn-premium-outline" id="reportProblemBtn">
                    <i class="fas fa-paper-plane"></i> Notificar
                  </button>
                </div>
              </div>
              <p class="form-hint" style="margin-top: var(--space-16);">
                <i class="fas fa-info-circle"></i> Esta funci√≥n estar√° disponible pr√≥ximamente. Mientras tanto, contacta al soporte directamente.
              </p>
            </div>
          </div>

        </div>
      </section>
    </main>

    <!-- Toast Notifications -->
    <div id="toast" class="toast hidden">
      <div class="toast-content">
        <i class="toast-icon"></i>
        <span class="toast-message"></span>
      </div>
    </div>

    <!-- Modal A√±adir Ahorro -->
    <div class="modal" id="addSavingsModal">
      <div class="modal__content modal--md">
        <div class="modal__header">
          <h3><i class="fas fa-piggy-bank"></i> A√±adir fuente de ahorro</h3>
          <button class="modal__close" id="closeSavingsModal">&times;</button>
        </div>
        <div class="modal__body">
          <form id="savingsAccountForm" class="form-single-column">
            <div class="form-group">
              <label for="savingsSourceName" class="form-label-premium"
                >Fuente de ahorro</label
              >
              <input
                type="text"
                id="savingsSourceName"
                class="form-input-premium"
                placeholder="Ej: AFP, Banco Santander, Efectivo"
                required
              />
            </div>
            <div class="form-group">
              <label for="savingsAmount" class="form-label-premium"
                >Monto actual</label
              >
              <input
                type="number"
                id="savingsAmount"
                class="form-input-premium"
                placeholder="0.00"
                step="0.01"
                min="0"
                required
              />
            </div>
            <div class="form-group">
              <label for="savingsType" class="form-label-premium"
                >Tipo de ahorro</label
              >
              <select
                id="savingsType"
                class="form-input-premium form-select-premium"
                required
              >
                <option value="">Selecciona un tipo</option>
                <option value="retirement">Jubilaci√≥n (AFP/Pensi√≥n)</option>
                <option value="emergency">Fondo de emergencia</option>
                <option value="investment">Inversiones</option>
                <option value="savings_account">Cuenta de ahorros</option>
                <option value="cash">Efectivo</option>
                <option value="goal">Meta espec√≠fica</option>
                <option value="other">Otro</option>
              </select>
            </div>
            <div class="form-group">
              <label for="savingsDescription" class="form-label-premium"
                >Descripci√≥n (opcional)</label
              >
              <input
                type="text"
                id="savingsDescription"
                class="form-input-premium"
                placeholder="Para qu√© es este ahorro..."
              />
            </div>
            <div class="form-actions-premium">
              <button
                type="button"
                class="btn-premium btn-premium-secondary"
                id="cancelSavingsBtn"
              >
                Cancelar
              </button>
              <button type="submit" class="btn-premium btn-premium-primary">
                <i class="fas fa-check"></i> Guardar ahorro
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal A√±adir Pago Recurrente -->
    <div class="modal" id="addPaymentModal">
      <div class="modal__content modal--md">
        <div class="modal__header">
          <h3>
            <i class="fas fa-file-invoice-dollar"></i> A√±adir pago recurrente
          </h3>
          <button class="modal__close" id="closePaymentModal">&times;</button>
        </div>
        <div class="modal__body">
          <form id="recurringPaymentForm" class="form-single-column">
            <div class="form-group">
              <label for="paymentServiceName" class="form-label-premium"
                >Nombre del servicio</label
              >
              <input
                type="text"
                id="paymentServiceName"
                class="form-input-premium"
                placeholder="Ej: Luz del hogar"
                required
              />
            </div>
            <div class="form-group">
              <label for="paymentServiceType" class="form-label-premium"
                >Tipo de servicio</label
              >
              <select
                id="paymentServiceType"
                class="form-input-premium form-select-premium"
                required
              >
                <option value="">Selecciona un tipo</option>
                <option value="electricity">Luz</option>
                <option value="water">Agua</option>
                <option value="phone">Tel√©fono</option>
                <option value="internet">Internet/WiFi</option>
                <option value="tv">TV/Cable</option>
                <option value="rent">Alquiler</option>
                <option value="gas">Gas</option>
                <option value="insurance">Seguro</option>
                <option value="subscription">Suscripci√≥n</option>
                <option value="other">Otros Servicios</option>
              </select>
            </div>
            <div class="form-group">
              <label for="paymentAmount" class="form-label-premium"
                >Monto (opcional si var√≠a)</label
              >
              <input
                type="number"
                id="paymentAmount"
                class="form-input-premium"
                placeholder="0.00"
                step="0.01"
                min="0"
              />
            </div>
            <div class="form-group">
              <label for="paymentDueDay" class="form-label-premium"
                >D√≠a de vencimiento</label
              >
              <input
                type="number"
                id="paymentDueDay"
                class="form-input-premium"
                placeholder="1-31"
                min="1"
                max="31"
                required
              />
            </div>
            <div class="form-group">
              <label for="paymentNotes" class="form-label-premium"
                >Notas (opcional)</label
              >
              <input
                type="text"
                id="paymentNotes"
                class="form-input-premium"
                placeholder="Detalles adicionales..."
              />
            </div>
            <div class="form-actions-premium">
              <button
                type="button"
                class="btn-premium btn-premium-secondary"
                id="cancelPaymentBtn"
              >
                Cancelar
              </button>
              <button type="submit" class="btn-premium btn-premium-primary">
                <i class="fas fa-check"></i> Guardar pago
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Estad√≠sticas del Gr√°fico -->
    <div class="modal" id="chartStatsModal">
      <div class="modal__content modal--lg">
        <div class="modal__header">
          <h3><i class="fas fa-chart-line"></i> Estad√≠sticas Detalladas</h3>
          <button class="modal__close" id="closeChartStatsModal">
            &times;
          </button>
        </div>
        <div
          class="modal__body"
          id="chartStatsModalBody"
          style="max-height: 70vh; overflow-y: auto"
        >
          <!-- El contenido se generar√° din√°micamente -->
        </div>
      </div>
    </div>

    <!-- Modal Seguridad -->
    <!-- Modal Seguridad -->
    <div class="modal" id="securityModal">
      <div class="modal-dialog">
        <div class="modal-illustration">
          <img
            data-src="img/ahorro.png"
            alt="Ilustraci√≥n ahorro"
            class="lazy-load"
          />
        </div>
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title" id="securityModalTitle">
              Confirmar eliminacion
            </h2>
            <button
              class="modal-close"
              type="button"
              aria-label="Cerrar"
              id="closeSecurityModalBtn"
            >
              &times;
            </button>
          </div>

          <!-- Formulario de cambio de contrase√±a personal -->
          <form id="securityForm">
            <div class="modal-body">
              <div class="input-group">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="currentPassword"
                  placeholder="Contrase√±a actual"
                  autocomplete="current-password"
                />
                <i
                  class="fas fa-eye toggle-pass"
                  data-target="currentPassword"
                ></i>
              </div>

              <div
                id="newPasswordSection"
                style="display: none; margin-top: 16px"
              >
                <div class="input-group">
                  <i class="fas fa-lock"></i>
                  <input
                    type="password"
                    id="newPassword"
                    placeholder="Nueva contrase√±a"
                    autocomplete="new-password"
                  />
                  <i
                    class="fas fa-eye toggle-pass"
                    data-target="newPassword"
                  ></i>
                </div>

                <div class="input-group">
                  <i class="fas fa-lock"></i>
                  <input
                    type="password"
                    id="confirmPassword"
                    placeholder="Confirmar nueva contrase√±a"
                    autocomplete="new-password"
                  />
                  <i
                    class="fas fa-eye toggle-pass"
                    data-target="confirmPassword"
                  ></i>
                </div>
              </div>
            </div>

            <div class="modal-footer">
              <button class="btn-cancel" type="button" id="cancelSecurityBtn">
                Cancelar
              </button>
              <button
                class="btn-primary"
                id="modalSavePasswordsBtn"
                type="submit"
              >
                Guardar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Librer√≠as externas -->
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.2.0/crypto-js.js"></script>

    <script>
      // Opcional: setup para toggle pass visual del modal
      document.addEventListener('click', function (e) {
        if (e.target.classList.contains('toggle-pass')) {
          const input = document.getElementById(
            e.target.getAttribute('data-target')
          );
          if (input) {
            if (input.type === 'password') {
              input.type = 'text';
              e.target.classList.remove('fa-eye');
              e.target.classList.add('fa-eye-slash');
            } else {
              input.type = 'password';
              e.target.classList.remove('fa-eye-slash');
              e.target.classList.add('fa-eye');
            }
          }
        }
      });
    </script>

    <!-- Account Type Selection Modal -->
    <div class="modal" id="accountTypeModal">
      <div class="modal-dialog account-type-dialog-premium">
        <div class="modal-content account-type-modal-premium">
          <button
            class="modal-close-premium"
            type="button"
            aria-label="Cerrar"
            data-close-modal="accountTypeModal"
          >
            <i class="fas fa-times"></i>
          </button>

          <div class="modal-header-premium">
            <h2 class="modal-title-premium">Elige tu tipo de cuenta</h2>
            <p class="modal-subtitle-premium">
              Selecciona la opci√≥n que mejor se adapte a tus necesidades
            </p>
          </div>

          <div class="account-cards-container">
            <div
              class="account-card personal-card"
              onclick="selectAccountType('personal')"
              data-type="personal"
            >
              <div class="account-card-glow"></div>
              <div class="account-card-content">
                <div class="account-card-icon personal-icon">
                  <i class="fas fa-user"></i>
                </div>
                <h3 class="account-card-title">Personal</h3>
                <p class="account-card-description">
                  Para tus finanzas individuales
                </p>
              </div>
              <div class="account-card-footer">
                <div class="account-card-arrow">
                  <i class="fas fa-arrow-right"></i>
                </div>
              </div>
            </div>

            <div
              class="account-card shared-card"
              onclick="selectAccountType('shared')"
              data-type="shared"
            >
              <div class="account-card-glow"></div>
              <div class="account-card-content">
                <div class="account-card-icon shared-icon">
                  <i class="fas fa-users"></i>
                </div>
                <h3 class="account-card-title">Mancomunada</h3>
                <p class="account-card-description">
                  Para compartir finanzas en pareja o grupo
                </p>
              </div>
              <div class="account-card-footer">
                <div class="account-card-arrow">
                  <i class="fas fa-arrow-right"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
      <div class="modal-dialog auth-dialog">
        <div class="modal-illustration">
          <img
            src="img/ahorro.png"
            alt="Ilustraci√≥n de una persona ahorrando dinero en una alcanc√≠a"
          />
          <h3>Controla tus finanzas, alcanza tus metas.</h3>
          <p>Tu futuro financiero comienza aqu√≠.</p>
        </div>
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title" id="authModalTitle">¬°Bienvenido!</h2>
            <button
              class="modal-close"
              type="button"
              aria-label="Cerrar"
              data-close-modal="authModal"
            >
              &times;
            </button>
          </div>
          <div class="modal-body">
            <form id="loginForm">
              <div class="input-group">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="loginEmail"
                  placeholder="Tu correo electr√≥nico"
                  required
                  autocomplete="email"
                />
              </div>
              <div class="input-group">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="loginPassword"
                  placeholder="Tu contrase√±a"
                  required
                  autocomplete="current-password"
                />
                <i
                  class="fas fa-eye password-toggle"
                  onclick="togglePasswordVisibility('loginPassword', this)"
                ></i>
              </div>
              <a href="#" class="form-link" id="forgotPasswordLink"
                >¬øOlvidaste tu contrase√±a?</a
              >
              <button type="submit" class="btn btn--primary btn--full-width">
                Iniciar Sesi√≥n
              </button>

              <div class="auth-divider">
                <span>O contin√∫a con</span>
              </div>

              <div class="social-login-buttons">
                <button
                  type="button"
                  class="btn-social btn-google"
                  onclick="window.app?.loginWithGoogle()"
                >
                  <i class="fab fa-google"></i>
                  <span>Google</span>
                </button>
                <button
                  type="button"
                  class="btn-social btn-facebook"
                  onclick="window.app?.loginWithFacebook()"
                >
                  <i class="fab fa-facebook-f"></i>
                  <span>Facebook</span>
                </button>
              </div>
            </form>
            <form id="registerForm" class="hidden">
              <div class="input-group">
                <i class="fas fa-user"></i>
                <input
                  type="text"
                  id="registerName"
                  placeholder="Tu nombre o seud√≥nimo"
                  required
                  autocomplete="name"
                />
              </div>
              <div class="input-group">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="registerEmail"
                  placeholder="Tu correo electr√≥nico"
                  required
                  autocomplete="email"
                />
              </div>
              <div class="input-group">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="registerPassword"
                  placeholder="Crea una contrase√±a"
                  required
                  autocomplete="new-password"
                />
                <i
                  class="fas fa-eye password-toggle"
                  onclick="togglePasswordVisibility('registerPassword', this)"
                ></i>
              </div>
              <button type="submit" class="btn btn--primary btn--full-width">
                Crear Cuenta
              </button>

              <div class="auth-divider">
                <span>O contin√∫a con</span>
              </div>

              <div class="social-login-buttons">
                <button
                  type="button"
                  class="btn-social btn-google"
                  onclick="window.app?.loginWithGoogle()"
                >
                  <i class="fab fa-google"></i>
                  <span>Google</span>
                </button>
                <button
                  type="button"
                  class="btn-social btn-facebook"
                  onclick="window.app?.loginWithFacebook()"
                >
                  <i class="fab fa-facebook-f"></i>
                  <span>Facebook</span>
                </button>
              </div>
            </form>
          </div>
          <div class="modal-footer auth-footer">
            <p id="authSwitchLink">
              ¬øNo tienes una cuenta? <a href="#">Reg√≠strate aqu√≠</a>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Password Reset Modal -->
    <div class="modal" id="resetPasswordModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title">üîë Recuperar Contrase√±a</h2>
            <button
              class="modal-close"
              type="button"
              aria-label="Cerrar"
              data-close-modal="resetPasswordModal"
            >
              &times;
            </button>
          </div>
          <div class="modal-body">
            <p
              style="
                margin-bottom: var(--space-20);
                color: var(--color-text-secondary);
              "
            >
              Ingresa tu correo electr√≥nico y te enviaremos un enlace para
              restablecer tu contrase√±a.
            </p>
            <form id="resetPasswordForm">
              <div class="input-group">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="resetEmail"
                  placeholder="Tu correo electr√≥nico"
                  required
                  autocomplete="email"
                />
              </div>
              <button type="submit" class="btn btn--primary btn--full-width">
                Enviar Correo de Recuperaci√≥n
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Invitation Modal -->
    <div class="modal" id="invitationModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title">Invitar Usuario</h2>
            <button
              class="modal-close"
              type="button"
              aria-label="Cerrar"
              data-close-modal="invitationModal"
            >
              &times;
            </button>
          </div>
          <div class="modal-body">
            <div class="invitation-steps">
              <div class="step-item active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h4>Generar Invitaci√≥n</h4>
                  <p>
                    Crea un c√≥digo √∫nico para invitar a tu pareja o familiar.
                  </p>
                  <form id="generateInviteForm">
                    <div class="input-group">
                      <i class="fas fa-user"></i>
                      <input
                        type="text"
                        id="inviteeName"
                        placeholder="Nombre de la persona a invitar"
                        required
                      />
                    </div>
                    <button type="submit" class="btn btn--primary">
                      <i class="fas fa-plus"></i> Generar Invitaci√≥n
                    </button>
                  </form>
                </div>
              </div>

              <div class="step-item" data-step="2">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h4>Compartir C√≥digo</h4>
                  <p>
                    Comparte este c√≥digo con la persona que quieres invitar:
                  </p>
                  <div class="invite-code-display">
                    <div class="code-container">
                      <span id="generatedInviteCode">-----</span>
                      <button class="copy-btn" id="copyInviteCode">
                        <i class="fas fa-copy"></i>
                      </button>
                    </div>
                  </div>
                  <div class="invite-instructions">
                    <p><strong>Instrucciones:</strong></p>
                    <ol>
                      <li>Comparte este c√≥digo con la persona</li>
                      <li>P√≠dele que se registre en la aplicaci√≥n</li>
                      <li>Durante el registro, debe ingresar este c√≥digo</li>
                      <li>Una vez registrado, tendr√°n acceso compartido</li>
                    </ol>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ... al final de index.html, despu√©s de  -->
    <script>
      // Abrir modal en modo cambio de contrase√±as
      document
        .getElementById('changePasswordsBtn')
        ?.addEventListener('click', () => {
          if (
            window.app &&
            typeof window.app.openSecurityModal === 'function'
          ) {
            window.app.openSecurityModal('change');
          } else {
            // Fallback visual si la clase a√∫n no expone el m√©todo
            const modal = document.getElementById('securityModal');
            document.getElementById('securityModalTitle').textContent =
              'Cambiar Contrase√±as';
            document.getElementById('modalSavePasswordsBtn').textContent =
              'Guardar';
            document.getElementById('newPassSection').style.display = '';
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
          }
        });

      // Cerrar modal
      const closeButtons = ['closeSecurityModalBtn', 'cancelSecurityBtn'];
      closeButtons.forEach((id) => {
        document.getElementById(id)?.addEventListener('click', () => {
          const modal = document.getElementById('securityModal');
          modal.classList.remove('show');
          document.body.style.overflow = '';
        });
      });

      // Submit del form: delegar a la app si existe, si no, fallback
      document
        .getElementById('securityForm')
        ?.addEventListener('submit', (e) => {
          e.preventDefault();
          if (
            window.app &&
            typeof window.app.savePasswordsFromModal === 'function'
          ) {
            window.app.savePasswordsFromModal();
          } else {
            // Fallback m√≠nimo: solo cerrar
            const modal = document.getElementById('securityModal');
            modal.classList.remove('show');
            document.body.style.overflow = '';
          }
        });

      // Cerrar al click en el backdrop
      document
        .getElementById('securityModal')
        ?.addEventListener('click', (e) => {
          if (e.target.id === 'securityModal') {
            e.currentTarget.classList.remove('show');
            document.body.style.overflow = '';
          }
        });
    </script>

    <!-- Professional Footer -->
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-main">
          <div class="footer-brand">
            <div class="footer-logo">
              <div class="logo-icon-footer">
                <svg
                  class="logo-svg"
                  viewBox="0 0 40 40"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <defs>
                    <linearGradient
                      id="footerLogoGradient"
                      x1="0%"
                      y1="0%"
                      x2="100%"
                      y2="100%"
                    >
                      <stop
                        offset="0%"
                        style="stop-color: #0ea5e9; stop-opacity: 1"
                      />
                      <stop
                        offset="100%"
                        style="stop-color: #0d9488; stop-opacity: 1"
                      />
                    </linearGradient>
                  </defs>
                  <circle
                    cx="20"
                    cy="20"
                    r="18"
                    fill="url(#footerLogoGradient)"
                  />
                  <path
                    d="M12 28 L16 22 L20 25 L24 18 L28 20"
                    stroke="white"
                    stroke-width="2.5"
                    fill="none"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <circle cx="16" cy="22" r="2.5" fill="white" />
                  <circle cx="20" cy="25" r="2.5" fill="white" />
                  <circle cx="24" cy="18" r="2.5" fill="white" />
                  <text
                    x="20"
                    y="15"
                    text-anchor="middle"
                    fill="white"
                    font-size="10"
                    font-weight="bold"
                  >
                    $
                  </text>
                </svg>
              </div>
              <span class="footer-brand-text">Dan&Giv Control</span>
            </div>
            <p class="footer-tagline">Tu aliado financiero inteligente</p>
            <p class="footer-description">
              Controla tus gastos, alcanza tus metas y toma decisiones
              financieras inteligentes con an√°lisis en tiempo real.
            </p>
          </div>

          <div class="footer-columns">
            <div class="footer-column">
              <h4 class="footer-column-title">Plataforma</h4>
              <ul class="footer-links-list">
                <li><a href="#" class="footer-link-item">Inicio</a></li>
                <li><a href="#" class="footer-link-item">An√°lisis</a></li>
                <li>
                  <a href="#" class="footer-link-item">Metas Financieras</a>
                </li>
                <li><a href="#" class="footer-link-item">Configuraci√≥n</a></li>
                <li><a href="#" class="footer-link-item" id="footerLoginLink">Iniciar Sesi√≥n</a></li>
              </ul>
            </div>

            <div class="footer-column">
              <h4 class="footer-column-title">Soporte</h4>
              <ul class="footer-links-list">
                <li>
                  <a href="#" class="footer-link-item" id="helpCenterLink"
                    >Centro de Ayuda</a
                  >
                </li>
                <li><a href="#" class="footer-link-item">Tutoriales</a></li>
                <li><a href="#" class="footer-link-item">Contacto</a></li>
                <li><a href="#" class="footer-link-item">FAQ</a></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="footer-divider"></div>

        <div class="footer-bottom">
          <div class="footer-copyright">
            <p>
              &copy; 2025 Dan&Giv Control. Dise√±ado con pasi√≥n por las finanzas.
            </p>
          </div>
          <div class="footer-social">
            <!-- Aqu√≠ ir√° Instagram -->
            <!-- Aqu√≠ ir√° Twitter -->
            <!-- Aqu√≠ ir√° Facebook -->
            <!-- Aqu√≠ ir√° LinkedIn -->
          </div>
        </div>
      </div>
    </footer>

    <!-- Onboarding Tour Overlay -->
    <div id="tourOverlay" class="tour-overlay hidden">
      <div class="tour-backdrop"></div>
      <div class="tour-spotlight"></div>
      <div class="tour-tooltip">
        <div class="tour-tooltip-content">
          <div class="tour-header">
            <h3 class="tour-title"></h3>
            <button class="tour-close" aria-label="Cerrar tour">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="tour-body">
            <p class="tour-description"></p>
          </div>
          <div class="tour-footer">
            <div class="tour-progress">
              <span class="tour-step-counter"></span>
              <div class="tour-progress-bar">
                <div class="tour-progress-fill"></div>
              </div>
            </div>
            <div class="tour-actions">
              <button class="tour-btn tour-skip-prominent">
                <i class="fas fa-times"></i> Saltar tour
              </button>
              <div class="tour-nav-buttons">
                <button class="tour-btn tour-prev">
                  <i class="fas fa-chevron-left"></i> Anterior
                </button>
                <button class="tour-btn tour-next">
                  Siguiente <i class="fas fa-chevron-right"></i>
                </button>
                <button class="tour-btn tour-finish hidden">
                  <i class="fas fa-check"></i> Finalizar
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tour Start Button (floating) -->
    <button
      id="startTourBtn"
      class="tour-start-btn"
      title="Iniciar tour de la aplicaci√≥n"
    >
      <i class="fas fa-question-circle"></i>
    </button>

    <!-- Partner Invitation Modal -->
    <div id="partnerInviteModal" class="modal-overlay hidden">
      <div class="modal-dialog invitation-modal">
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-icon warning">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="modal-title-section">
              <h3 class="modal-title">Invitar a un socio</h3>
              <p class="modal-subtitle">
                Compartir√°s el control total de esta cuenta
              </p>
            </div>
            <button class="modal-close" id="closeInviteModalBtn">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="modal-body">
            <div class="invitation-steps">
              <div class="step-item active" id="inviteStep1">
                <div class="step-content">
                  <div class="warning-message">
                    <div class="warning-icon">
                      <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="warning-text">
                      <h4>‚ö†Ô∏è Importante: Acceso completo</h4>
                      <p>La persona invitada tendr√° acceso total a:</p>
                      <ul>
                        <li>Ver, editar y eliminar todos los gastos</li>
                        <li>Crear y modificar metas financieras</li>
                        <li>Acceder a todos los datos y an√°lisis</li>
                        <li>Cambiar configuraciones de la cuenta</li>
                      </ul>
                      <p>
                        <strong
                          >Solo invita a personas de absoluta confianza.</strong
                        >
                      </p>
                    </div>
                  </div>
                  <div class="step-actions">
                    <button class="btn-secondary" id="cancelInviteBtn">
                      <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button class="btn-primary" id="proceedInviteBtn">
                      <i class="fas fa-check"></i> Continuar
                    </button>
                  </div>
                </div>
              </div>

              <div class="step-item hidden" id="inviteStep2">
                <div class="step-content">
                  <div class="success-message">
                    <div class="success-icon">
                      <i class="fas fa-link"></i>
                    </div>
                    <div class="success-text">
                      <h4>‚úÖ Enlace de invitaci√≥n generado</h4>
                      <p>Comparte este enlace seguro con tu socio:</p>
                    </div>
                  </div>

                  <div class="invite-link-container">
                    <div class="invite-link-display">
                      <input
                        type="text"
                        class="invite-link-input"
                        id="generatedInviteLink"
                        readonly
                      />
                      <button class="copy-link-btn" id="copyInviteLinkBtn">
                        <i class="fas fa-copy"></i>
                      </button>
                    </div>
                  </div>

                  <div class="invite-instructions">
                    <div class="instruction-icon">
                      <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="instruction-text">
                      <p><strong>Instrucciones:</strong></p>
                      <ol>
                        <li>Copia el enlace usando el bot√≥n de copiar</li>
                        <li>Env√≠alo de forma segura a tu socio</li>
                        <li>El enlace expira en 24 horas</li>
                        <li>Solo puede ser usado una vez</li>
                      </ol>
                    </div>
                  </div>

                  <div class="step-actions">
                    <button class="btn-secondary" id="generateNewLinkBtn">
                      <i class="fas fa-redo"></i> Generar nuevo enlace
                    </button>
                    <button class="btn-primary" id="finishInviteBtn">
                      <i class="fas fa-check"></i> Finalizar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Detalle de Ahorros -->
    <div class="modal" id="savingsDetailModal">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">
              <i class="fas fa-piggy-bank"></i> Desglose de Ahorros
            </h3>
            <button class="modal-close" id="closeSavingsDetail">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <div class="savings-detail-summary">
              <div class="detail-summary-card">
                <i class="fas fa-wallet"></i>
                <div>
                  <p>Total Ahorrado</p>
                  <h2 id="modalTotalSavings">$0</h2>
                </div>
              </div>
              <div class="detail-summary-card">
                <i class="fas fa-layer-group"></i>
                <div>
                  <p>Fuentes Activas</p>
                  <h2 id="modalTotalSources">0</h2>
                </div>
              </div>
            </div>
            <div class="savings-breakdown" id="savingsBreakdownList">
              <!-- Se llenar√° din√°micamente -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Payments Detail Modal -->
    <div class="modal" id="paymentsDetailModal">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">
              <i class="fas fa-money-bill-wave"></i> Pagos Recurrentes del Mes
            </h3>
            <button class="modal-close" id="closePaymentsDetail">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <div class="payments-detail-summary">
              <div class="detail-summary-card pending-card">
                <i class="fas fa-exclamation-circle"></i>
                <div>
                  <p>Por Pagar</p>
                  <h2 id="modalPendingPayments">0</h2>
                </div>
              </div>
              <div class="detail-summary-card paid-card">
                <i class="fas fa-check-circle"></i>
                <div>
                  <p>Pagados</p>
                  <h2 id="modalPaidPayments">0</h2>
                </div>
              </div>
              <div class="detail-summary-card total-card">
                <i class="fas fa-calculator"></i>
                <div>
                  <p>Total del Mes</p>
                  <h2 id="modalTotalMonthlyAmount">$0</h2>
                </div>
              </div>
            </div>
            <div class="payments-breakdown">
              <div class="payments-section-title">
                <i class="fas fa-exclamation-triangle"></i>
                <h4>Pendientes de Pago</h4>
              </div>
              <div id="pendingPaymentsList" class="payment-items-list">
                <!-- Se llenar√° din√°micamente -->
              </div>

              <div class="payments-section-title paid-section">
                <i class="fas fa-check-circle"></i>
                <h4>Pagados este mes</h4>
              </div>
              <div id="paidPaymentsList" class="payment-items-list">
                <!-- Se llenar√° din√°micamente -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Expenses Detail Modal -->
    <div class="modal" id="expensesDetailModal">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">
              <i class="fas fa-chart-line"></i> Resumen Financiero del Mes
            </h3>
            <button class="modal-close" id="closeExpensesDetail">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <!-- Summary Section -->
            <div class="expenses-summary-header">
              <div class="summary-period">
                <i class="fas fa-calendar-alt"></i>
                <div>
                  <h4>Per√≠odo analizado</h4>
                  <p id="expensesPeriod">1 de Enero - Hoy</p>
                </div>
              </div>
              <div class="summary-total-expenses">
                <h4>Total gastado este mes</h4>
                <h2 id="modalTotalExpenses">$0</h2>
              </div>
            </div>

            <!-- Statistics Grid -->
            <div class="expenses-stats-container">
              <button class="scroll-btn scroll-btn-left" id="scrollStatsLeft">
                <i class="fas fa-chevron-left"></i>
              </button>
              <div class="expenses-stats-grid" id="expensesStatsGrid">
                <div class="expense-stat-card transactions">
                  <div class="stat-icon">
                    <i class="fas fa-receipt"></i>
                  </div>
                  <div class="stat-content">
                    <h4>Transacciones</h4>
                    <p class="stat-number" id="modalTotalTransactions">0</p>
                    <span class="stat-label">operaciones realizadas</span>
                  </div>
                </div>

                <div class="expense-stat-card necessity">
                  <div class="stat-icon">
                    <i class="fas fa-exclamation-circle"></i>
                  </div>
                  <div class="stat-content">
                    <h4>Gastos Necesarios</h4>
                    <p class="stat-number" id="modalNecessaryPercentage">0%</p>
                    <span class="stat-label" id="modalNecessaryAmount"
                      >$0 en gastos esenciales</span
                    >
                  </div>
                </div>

                <div class="expense-stat-card unnecessary">
                  <div class="stat-icon">
                    <i class="fas fa-shopping-bag"></i>
                  </div>
                  <div class="stat-content">
                    <h4>Gastos No Necesarios</h4>
                    <p class="stat-number" id="modalUnnecessaryPercentage">
                      0%
                    </p>
                    <span class="stat-label" id="modalUnnecessaryAmount"
                      >$0 en gastos prescindibles</span
                    >
                  </div>
                </div>

                <div class="expense-stat-card services">
                  <div class="stat-icon">
                    <i class="fas fa-hand-holding-usd"></i>
                  </div>
                  <div class="stat-content">
                    <h4>Servicios Pagados</h4>
                    <p class="stat-number" id="modalServicesPaid">0</p>
                    <span class="stat-label" id="modalServicesAmount"
                      >$0 en servicios</span
                    >
                  </div>
                </div>
              </div>
              <button class="scroll-btn scroll-btn-right" id="scrollStatsRight">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>

            <!-- Necessity Breakdown -->
            <div class="expenses-necessity-section">
              <div class="section-title-row">
                <h4>
                  <i class="fas fa-chart-pie"></i> Distribuci√≥n por Necesidad
                </h4>
              </div>
              <div class="necessity-bars" id="necessityBarsContainer">
                <!-- Se llenar√° din√°micamente -->
              </div>
            </div>

            <!-- Services Paid Section -->
            <div class="expenses-services-section">
              <div class="section-title-row">
                <h4>
                  <i class="fas fa-money-check-alt"></i> Servicios Pagados Este
                  Mes
                </h4>
              </div>
              <div class="services-paid-list" id="servicesPaidList">
                <!-- Se llenar√° din√°micamente -->
              </div>
            </div>

            <!-- Category Breakdown -->
            <div class="expenses-categories-section">
              <div class="section-title-row">
                <h4><i class="fas fa-tags"></i> Gastos por Categor√≠a</h4>
              </div>
              <div class="categories-breakdown" id="categoriesBreakdown">
                <!-- Se llenar√° din√°micamente -->
              </div>
            </div>

            <!-- Recent Transactions -->
            <div class="expenses-transactions-section">
              <div class="section-title-row">
                <h4><i class="fas fa-history"></i> √öltimas Transacciones</h4>
              </div>
              <div class="transactions-list" id="recentTransactionsList">
                <!-- Se llenar√° din√°micamente -->
              </div>
            </div>

            <!-- Financial Insights -->
            <div class="financial-insights">
              <div class="insight-card">
                <i class="fas fa-lightbulb"></i>
                <div class="insight-content">
                  <h5>An√°lisis Financiero</h5>
                  <p id="financialInsight">
                    <!-- Se llenar√° din√°micamente con recomendaciones -->
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de Enlace de Invitaci√≥n Despu√©s de Registro -->
    <div class="modal" id="sharedAccountInviteModal">
      <div class="modal-dialog invitation-success-modal">
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-icon success">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="modal-title-section">
              <h3 class="modal-title">¬°Cuenta Mancomunada Creada!</h3>
              <p class="modal-subtitle">
                Comparte este enlace con tu socio para que se una
              </p>
            </div>
            <button class="modal-close" id="closeSharedInviteModalBtn">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="modal-body">
            <div class="invite-success-content">
              <div class="success-message-box">
                <div class="success-icon-large">
                  <i class="fas fa-users"></i>
                </div>
                <div class="success-text">
                  <h4>üéâ Tu cuenta mancomunada est√° lista</h4>
                  <p>
                    Ahora puedes invitar a tu socio usando el enlace √∫nico
                    generado
                  </p>
                </div>
              </div>

              <div class="invite-link-section">
                <label class="invite-label">
                  <i class="fas fa-link"></i> Enlace de Invitaci√≥n
                </label>
                <div class="invite-link-display-modern">
                  <input
                    type="text"
                    class="invite-link-input-modern"
                    id="sharedAccountInviteLink"
                    readonly
                  />
                  <button
                    class="btn-copy-modern"
                    id="copySharedInviteLinkBtn"
                    title="Copiar enlace"
                  >
                    <i class="fas fa-copy"></i>
                    <span>Copiar</span>
                  </button>
                  <button
                    class="btn-share-modern"
                    id="shareSharedInviteLinkBtn"
                    title="Compartir"
                  >
                    <i class="fas fa-share-alt"></i>
                    <span>Compartir</span>
                  </button>
                </div>
              </div>

              <div class="invite-info-box">
                <div class="info-icon">
                  <i class="fas fa-info-circle"></i>
                </div>
                <div class="info-content">
                  <h5>Importante:</h5>
                  <ul>
                    <li><strong>El enlace expira en 24 horas</strong></li>
                    <li>Solo puede ser usado una vez</li>
                    <li>Tambi√©n puedes encontrarlo en tus notificaciones</li>
                    <li>Comparte solo con personas de confianza</li>
                  </ul>
                </div>
              </div>

              <div class="invite-timer-section">
                <div class="timer-icon">
                  <i class="fas fa-clock"></i>
                </div>
                <div class="timer-text">
                  <span>Tiempo restante: </span>
                  <strong id="inviteLinkTimer">24:00:00</strong>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer">
            <button class="btn-secondary" id="viewNotificationsBtn">
              <i class="fas fa-bell"></i>
              Ver en Notificaciones
            </button>
            <button class="btn-primary" id="closeSharedInviteModalFinishBtn">
              <i class="fas fa-check"></i>
              Entendido
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- FAB (Floating Action Button) for Quick Expense Entry -->
    <button class="fab" id="fabQuickExpense" aria-label="Agregar gasto r√°pido">
      <i class="fas fa-plus"></i>
    </button>

    <!-- Instagram-style Quick Actions Button (Mobile Only) -->
    <button
      class="fab-instagram"
      id="fabInstagram"
      aria-label="Acciones r√°pidas"
    >
      <i class="fas fa-plus"></i>
    </button>


    <!-- Quick Actions Menu Desplegable -->
    <div class="fab-quick-menu hidden" id="quickExpenseModal">
      <!-- Opci√≥n 1: Registrar Gasto (Principal) -->
      <button class="fab-menu-item fab-menu-primary" id="quickActionFullExpense">
        <div class="fab-menu-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
          <i class="fas fa-receipt"></i>
        </div>
        <span class="fab-menu-label">Registrar Gasto</span>
      </button>

      <!-- Opci√≥n 2: Modo R√°pido -->
      <button class="fab-menu-item" id="quickActionFastMode">
        <div class="fab-menu-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
          <i class="fas fa-bolt"></i>
        </div>
        <span class="fab-menu-label">Modo R√°pido</span>
      </button>

      <!-- Opci√≥n 3: Registrar Sueldo -->
      <button class="fab-menu-item" id="quickActionSalary">
        <div class="fab-menu-icon" style="background: linear-gradient(135deg, #10b981, #059669);">
          <i class="fas fa-wallet"></i>
        </div>
        <span class="fab-menu-label">Registrar Sueldo</span>
      </button>

      <!-- Opci√≥n 4: Entrada Extra -->
      <button class="fab-menu-item" id="quickActionExtraIncome">
        <div class="fab-menu-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
          <i class="fas fa-coins"></i>
        </div>
        <span class="fab-menu-label">Entrada Extra</span>
      </button>
    </div>

    <!-- Modal Modo R√°pido (solo monto y descripci√≥n) -->
    <div class="modal" id="fastModeModal">
      <div class="modal__content modal--sm">
        <div class="modal__header">
          <h2><i class="fas fa-bolt"></i> Modo R√°pido</h2>
          <button class="modal__close" id="closeFastModeModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal__body">
          <form id="fastModeForm">
            <div class="form-group">
              <label class="form-label" for="fastAmount">
                <i class="fas fa-dollar-sign"></i> Monto
              </label>
              <input
                type="number"
                id="fastAmount"
                class="form-control form-control--lg"
                placeholder="0.00"
                step="0.01"
                min="0"
                required
                autofocus
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="fastDescription">
                <i class="fas fa-pencil-alt"></i> Descripci√≥n
              </label>
              <input
                type="text"
                id="fastDescription"
                class="form-control"
                placeholder="Ej. Caf√©, Uber, Compras..."
                required
              />
            </div>

            <div style="display: flex; gap: 12px; margin-top: 24px;">
              <button type="button" class="btn btn--secondary" id="cancelFastMode" style="flex: 1;">
                Cancelar
              </button>
              <button type="submit" class="btn btn--primary" style="flex: 1;">
                <i class="fas fa-check"></i> Guardar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Registrar Sueldo -->
    <div class="modal" id="salaryModal">
      <div class="modal__content modal--sm">
        <div class="modal__header">
          <h2><i class="fas fa-wallet"></i> Registrar Sueldo</h2>
          <button class="modal__close" id="closeSalaryModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal__body">
          <form id="salaryForm">
            <div class="form-group">
              <label class="form-label" for="salaryAmount">
                <i class="fas fa-dollar-sign"></i> Monto del Sueldo
              </label>
              <input
                type="text"
                id="salaryAmount"
                class="form-control form-control--lg"
                placeholder="Ej: 1500000"
                required
                autofocus
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="salaryDate">
                <i class="fas fa-calendar"></i> Fecha
              </label>
              <input
                type="date"
                id="salaryDate"
                class="form-control"
                required
              />
            </div>

            <div style="display: flex; gap: 12px; margin-top: 24px;">
              <button type="button" class="btn btn--secondary" id="cancelSalary" style="flex: 1;">
                Cancelar
              </button>
              <button type="submit" class="btn btn--primary" style="flex: 1;">
                <i class="fas fa-check"></i> Guardar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Entrada Extra -->
    <div class="modal" id="extraIncomeModal">
      <div class="modal__content modal--sm">
        <div class="modal__header">
          <h2><i class="fas fa-coins"></i> Entrada Extra</h2>
          <button class="modal__close" id="closeExtraIncomeModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal__body">
          <form id="extraIncomeForm">
            <div class="form-group">
              <label class="form-label" for="extraAmount">
                <i class="fas fa-dollar-sign"></i> Monto
              </label>
              <input
                type="text"
                id="extraAmount"
                class="form-control form-control--lg"
                placeholder="Ej: 500000"
                required
                autofocus
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="extraDescription">
                <i class="fas fa-pencil-alt"></i> Descripci√≥n
              </label>
              <input
                type="text"
                id="extraDescription"
                class="form-control"
                placeholder="Ej. Bono, Freelance, Venta..."
                required
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="extraDate">
                <i class="fas fa-calendar"></i> Fecha
              </label>
              <input
                type="date"
                id="extraDate"
                class="form-control"
                required
              />
            </div>

            <div style="display: flex; gap: 12px; margin-top: 24px;">
              <button type="button" class="btn btn--secondary" id="cancelExtra" style="flex: 1;">
                Cancelar
              </button>
              <button type="submit" class="btn btn--primary" style="flex: 1;">
                <i class="fas fa-check"></i> Guardar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Confirmaci√≥n de Eliminaci√≥n -->
    <div class="modal" id="deleteConfirmModal">
      <div class="modal__content modal--sm">
        <div class="modal__header">
          <h2>
            <i class="fas fa-exclamation-triangle" style="color: #ff5459"></i>
            ¬øSeguro quieres eliminar este gasto?
          </h2>
          <button class="modal__close" id="closeDeleteConfirmModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal__body">
          <!-- Informaci√≥n del gasto a eliminar -->
          <div class="delete-expense-info">
            <div class="expense-detail">
              <i class="fas fa-dollar-sign"></i>
              <span id="deleteExpenseAmount">$0.00</span>
            </div>
            <div class="expense-detail">
              <i class="fas fa-tag"></i>
              <span id="deleteExpenseCategory">Categor√≠a</span>
            </div>
            <div class="expense-detail">
              <i class="fas fa-align-left"></i>
              <span id="deleteExpenseDescription">Descripci√≥n</span>
            </div>
          </div>

          <!-- Campo opcional de motivo -->
          <div class="form-group" style="margin-top: var(--space-20)">
            <label
              class="form-label"
              style="
                font-size: var(--font-size-sm);
                color: var(--color-text-secondary);
              "
            >
              <i class="fas fa-comment"></i>
              Motivo de eliminaci√≥n <span style="opacity: 0.6">(opcional)</span>
            </label>
            <textarea
              id="deleteReasonInput"
              class="form-control"
              placeholder="Ej: Gasto duplicado, error de registro, compra cancelada..."
              rows="3"
              style="resize: vertical; min-height: 60px"
            ></textarea>
            <small
              class="form-text"
              style="
                display: block;
                margin-top: var(--space-8);
                color: var(--color-text-secondary);
              "
            >
              Este motivo quedar√° visible en tus notificaciones para futuras
              referencias
            </small>
          </div>

          <!-- Advertencia -->
          <div class="delete-warning">
            <i class="fas fa-info-circle"></i>
            <span
              >Esta acci√≥n no se puede deshacer, pero quedar√° registrada en tu
              historial</span
            >
          </div>

          <!-- Botones de acci√≥n -->
          <div class="modal-actions">
            <button
              type="button"
              class="btn btn--secondary"
              id="cancelDeleteBtn"
            >
              <i class="fas fa-times"></i>
              Cancelar
            </button>
            <button type="button" class="btn btn--danger" id="confirmDeleteBtn">
              <i class="fas fa-trash-alt"></i>
              S√≠, eliminar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Funcionalidad en Desarrollo -->
    <div class="modal" id="comingSoonModal">
      <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content coming-soon-modal">
          <button
            class="modal-close"
            type="button"
            aria-label="Cerrar"
            onclick="closeComingSoonModal()"
          >
            &times;
          </button>
          <div class="modal-body">
            <div class="coming-soon-icon">
              <i class="fas fa-tools"></i>
            </div>
            <h3 class="coming-soon-title">¬°Estamos Trabajando en Ello!</h3>
            <p class="coming-soon-message">
              Esta funcionalidad estar√° disponible muy pronto. Te notificaremos
              cuando est√© lista.
            </p>
            <div class="coming-soon-features">
              <div class="coming-soon-feature">
                <i class="fas fa-bolt"></i>
                <span>Gastos r√°pidos con un click</span>
              </div>
              <div class="coming-soon-feature">
                <i class="fas fa-repeat"></i>
                <span>Gastos recurrentes autom√°ticos</span>
              </div>
            </div>
            <button
              class="btn btn--primary btn--full-width"
              onclick="closeComingSoonModal()"
            >
              <i class="fas fa-check"></i> Entendido
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Premium En Desarrollo -->
    <div class="modal" id="premiumComingSoonModal">
      <div class="modal-dialog modal-dialog-centered modal-md">
        <div class="modal-content premium-coming-soon-modal">
          <button
            class="modal-close"
            type="button"
            aria-label="Cerrar"
            onclick="closePremiumComingSoonModal()"
          >
            &times;
          </button>
          <div class="modal-body">
            <div class="premium-coming-soon-icon">
              <i class="fas fa-crown"></i>
            </div>
            <h3 class="premium-coming-soon-title">
              ¬°Estamos Trabajando en Premium!
            </h3>
            <p class="premium-coming-soon-message">
              Nuestra versi√≥n Premium est√° en desarrollo. Te notificaremos
              cuando est√© disponible para que puedas disfrutar de todas las
              caracter√≠sticas exclusivas.
            </p>
            <div class="premium-coming-soon-features">
              <div class="premium-coming-soon-feature">
                <i class="fas fa-sparkles"></i>
                <span>Avatares personalizados ilimitados</span>
              </div>
              <div class="premium-coming-soon-feature">
                <i class="fas fa-chart-line"></i>
                <span>An√°lisis avanzados con IA</span>
              </div>
              <div class="premium-coming-soon-feature">
                <i class="fas fa-palette"></i>
                <span>Estilos de gr√°ficos premium</span>
              </div>
              <div class="premium-coming-soon-feature">
                <i class="fas fa-cloud-upload-alt"></i>
                <span>Sincronizaci√≥n prioritaria</span>
              </div>
            </div>
            <button
              class="btn btn--primary btn--full-width premium-cta-btn"
              onclick="closePremiumComingSoonModal()"
            >
              <i class="fas fa-bell"></i> Notificarme cuando est√© listo
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Registro Requerido -->
    <div class="modal" id="registerPromptModal">
      <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content register-prompt-modal">
          <button
            class="modal-close-elegant"
            id="closeRegisterPromptModal"
            aria-label="Cerrar"
          >
            <i class="fas fa-times"></i>
          </button>
          <div class="modal-body">
            <div class="register-prompt-icon">
              <i class="fas fa-user-plus"></i>
            </div>
            <h3 class="register-prompt-title">¬°Contin√∫a tu experiencia!</h3>
            <p class="register-prompt-message">
              Reg√≠strate o inicia sesi√≥n para desbloquear todas las funciones y
              guardar tus datos de forma segura.
            </p>
            <div class="register-prompt-features">
              <div class="prompt-feature">
                <i class="fas fa-check-circle"></i>
                <span>Sincronizaci√≥n en la nube</span>
              </div>
              <div class="prompt-feature">
                <i class="fas fa-check-circle"></i>
                <span>Acceso desde cualquier dispositivo</span>
              </div>
              <div class="prompt-feature">
                <i class="fas fa-check-circle"></i>
                <span>An√°lisis y gr√°ficos avanzados</span>
              </div>
            </div>
            <button
              class="btn btn--primary btn--full-width register-prompt-btn"
              id="registerPromptBtn"
            >
              <i class="fas fa-user-plus"></i>
              Registrarme ahora
            </button>
            <button class="btn-text" id="loginPromptBtn">
              ¬øYa tienes cuenta? Inicia sesi√≥n
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Confirmaci√≥n Cerrar Sesi√≥n -->
    <div class="modal" id="logoutConfirmModal">
      <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content logout-confirm-modal">
          <div class="modal-header">
            <div class="modal-icon warning">
              <i class="fas fa-sign-out-alt"></i>
            </div>
            <h3 class="modal-title">¬øCerrar sesi√≥n?</h3>
            <button
              class="modal-close"
              id="closeLogoutConfirmModal"
              aria-label="Cerrar"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <p class="logout-confirm-message">
              Est√°s a punto de cerrar tu sesi√≥n. ¬øDeseas continuar?
            </p>
          </div>
          <div class="modal-footer">
            <button class="btn btn--secondary" id="cancelLogoutBtn">
              <i class="fas fa-times"></i>
              Cancelar
            </button>
            <button class="btn btn--danger" id="confirmLogoutBtn">
              <i class="fas fa-sign-out-alt"></i>
              Cerrar sesi√≥n
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Cookie Consent Banner -->
    <div class="cookie-banner" id="cookieBanner">
      <div class="cookie-banner__content">
        <div class="cookie-banner__icon">üç™</div>
        <div class="cookie-banner__text">
          <h3>Valoramos tu privacidad</h3>
          <p>
            Usamos cookies para mejorar tu experiencia, analizar el uso de la
            app y personalizar el contenido. Puedes aceptar todas o
            configurarlas.
          </p>
        </div>
        <div class="cookie-banner__actions">
          <button class="btn-cookie btn-cookie--settings" id="cookieSettings">
            <i class="fas fa-cog"></i> Configurar
          </button>
          <button class="btn-cookie btn-cookie--reject" id="cookieReject">
            Rechazar
          </button>
          <button class="btn-cookie btn-cookie--accept" id="cookieAccept">
            <i class="fas fa-check"></i> Aceptar todas
          </button>
        </div>
      </div>
    </div>

    <!-- Cookie Settings Modal -->
    <div class="cookie-modal hidden" id="cookieModal">
      <div class="cookie-modal__overlay" id="cookieModalOverlay"></div>
      <div class="cookie-modal__content">
        <div class="cookie-modal__header">
          <h2><i class="fas fa-shield-alt"></i> Configuraci√≥n de Cookies</h2>
          <button class="cookie-modal__close" id="cookieModalClose">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div class="cookie-modal__body">
          <div class="cookie-category">
            <div class="cookie-category__header">
              <div class="cookie-category__info">
                <h4>üîí Cookies Esenciales</h4>
                <p>Necesarias para el funcionamiento b√°sico de la aplicaci√≥n</p>
              </div>
              <label class="cookie-toggle cookie-toggle--disabled">
                <input type="checkbox" checked disabled />
                <span class="cookie-toggle__slider"></span>
              </label>
            </div>
            <div class="cookie-category__details">
              <small
                >Incluye: sesi√≥n de usuario, preferencias de interfaz, datos
                guardados localmente</small
              >
            </div>
          </div>

          <div class="cookie-category">
            <div class="cookie-category__header">
              <div class="cookie-category__info">
                <h4>üìä Cookies Anal√≠ticas</h4>
                <p>Nos ayudan a entender c√≥mo usas la app para mejorarla</p>
              </div>
              <label class="cookie-toggle">
                <input type="checkbox" id="cookieAnalytics" />
                <span class="cookie-toggle__slider"></span>
              </label>
            </div>
            <div class="cookie-category__details">
              <small
                >Firebase Analytics, m√©tricas de uso, estad√≠sticas
                an√≥nimas</small
              >
            </div>
          </div>

          <div class="cookie-category">
            <div class="cookie-category__header">
              <div class="cookie-category__info">
                <h4>üéØ Cookies Funcionales</h4>
                <p>Mejoran la experiencia con funciones personalizadas</p>
              </div>
              <label class="cookie-toggle">
                <input type="checkbox" id="cookieFunctional" />
                <span class="cookie-toggle__slider"></span>
              </label>
            </div>
            <div class="cookie-category__details">
              <small
                >Recordar preferencias, sincronizaci√≥n de datos,
                notificaciones</small
              >
            </div>
          </div>
        </div>

        <div class="cookie-modal__footer">
          <button class="btn-cookie btn-cookie--reject" id="cookieRejectAll">
            Rechazar todas
          </button>
          <button
            class="btn-cookie btn-cookie--accept"
            id="cookieSavePreferences"
          >
            <i class="fas fa-save"></i> Guardar preferencias
          </button>
        </div>

        <div class="cookie-modal__legal">
          <small>
            Al usar Dan&Giv Control, aceptas nuestro uso de cookies seg√∫n tu
            configuraci√≥n. Puedes cambiar tus preferencias en cualquier momento
            desde Configuraci√≥n.
          </small>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="app.js?v=3.9"></script>
    <script type="module" src="avatar-sidebar.js"></script>
    <script src="smart-forms.js?v=1.1"></script>
  </body>
</html>
