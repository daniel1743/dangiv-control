<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#00c2ff" />

    <!-- SEO Meta Tags -->
    <title>
      Financia Suite - Gestor de Finanzas Personales Gratis con IA | Control de
      Gastos 2025
    </title>
    <meta
      name="description"
      content="Aplicaci√≥n GRATIS de finanzas con IA. Controla gastos, ahorra, establece metas y recibe consejos inteligentes. ¬°Mejora tus finanzas hoy! üìäüí∞"
    />
    <meta
      name="keywords"
      content="gestor finanzas personales gratis, control de gastos app, presupuesto familiar, ahorro dinero, finanzas personales 2025, app gastos gratis, gestor financiero IA, control gastos mensuales, presupuesto personal, administrador dinero, finanzas inteligentes, app ahorro, calculadora gastos, presupuesto online gratis, gestor gastos espa√±ol"
    />
    <meta name="author" content="Financia Suite" />
    <meta
      name="robots"
      content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
    />

    <!-- Google Search Console Verification - Reemplaza CODIGO_AQUI con tu c√≥digo real -->
    <meta
      name="google-site-verification"
      content="ksz9e3ZMEltmTGQR3un92KzS3z3Xh8dOf1ZQpGAMeOg"
    />

    <link rel="canonical" href="https://financiasuite.com/" />

    <!-- Additional SEO -->
    <meta name="language" content="Spanish" />
    <meta name="geo.region" content="ES" />
    <meta name="geo.placename" content="Espa√±a" />
    <meta name="distribution" content="global" />
    <meta name="rating" content="general" />
    <meta name="revisit-after" content="7 days" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="mobile-web-app-capable" content="yes" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://financiasuite.com/" />
    <meta
      property="og:title"
      content="üéØ Financia Suite - App GRATIS de Finanzas Personales con IA"
    />
    <meta
      property="og:description"
      content="Controla tus gastos, ahorra m√°s dinero y alcanza tus metas financieras. 100% gratis, sin publicidad, con inteligencia artificial. ¬°Mejora tus finanzas hoy!"
    />
    <meta
      property="og:image"
      content="https://financiasuite.com/img/og-image-2025.jpg"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta
      property="og:image:alt"
      content="Financia Suite - Gestor de Finanzas Personales"
    />
    <meta property="og:site_name" content="Financia Suite" />
    <meta property="og:locale" content="es_ES" />
    <meta property="og:locale:alternate" content="es_MX" />
    <meta property="og:locale:alternate" content="es_AR" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://financiasuite.com/" />
    <meta name="twitter:site" content="@financiasuite" />
    <meta name="twitter:creator" content="@financiasuite" />
    <meta
      name="twitter:title"
      content="üéØ Financia Suite - Gestor de Finanzas Gratis con IA"
    />
    <meta
      name="twitter:description"
      content="Controla gastos, ahorra dinero y alcanza metas financieras. 100% gratis con IA. ¬°Comienza hoy!"
    />
    <meta
      name="twitter:image"
      content="https://financiasuite.com/img/twitter-card-2025.jpg"
    />
    <meta
      name="twitter:image:alt"
      content="Financia Suite - Control de Gastos Inteligente"
    />

    <!-- Favicons - Optimizados para buscadores -->
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <!-- Manifest habilitado para producci√≥n -->
    <link rel="manifest" href="site.webmanifest" />

    <!-- Meta tags adicionales para mejor indexaci√≥n -->
    <meta name="theme-color" content="#00c2ff" />
    <meta name="msapplication-TileColor" content="#00c2ff" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />

    <!-- Performance & Security -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Nunito+Sans:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="style.css?v=3.5" />
    <link rel="stylesheet" href="landing-styles.css" />
    <link rel="stylesheet" href="user-system.css" />
    <link rel="stylesheet" href="store.css" />
    <link rel="stylesheet" href="config.css" />
    <link rel="stylesheet" href="avatar-sidebar.css" />
    <link rel="stylesheet" href="daily-messages.css" />
    <link rel="stylesheet" href="tour.css" />
    <link rel="stylesheet" href="fin-widget.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Schema.org Structured Data (JSON-LD) -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Financia Suite",
        "alternateName": "Financia Suite - Gestor de Finanzas",
        "url": "https://financiasuite.com",
        "logo": "https://financiasuite.com/img/logo-512.png",
        "description": "Aplicaci√≥n web gratuita de gesti√≥n de finanzas personales con inteligencia artificial. Controla gastos, establece metas financieras y recibe consejos personalizados.",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web Browser",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "EUR"
        },
        "featureList": [
          "Control de gastos personales",
          "Metas financieras",
          "An√°lisis con IA",
          "Presupuesto mensual",
          "Gesti√≥n de ahorros",
          "Lista de compras inteligente",
          "M√∫ltiples usuarios",
          "Exportaci√≥n de datos"
        ],
        "browserRequirements": "Requires JavaScript. Requires HTML5.",
        "inLanguage": "es",
        "audience": {
          "@type": "Audience",
          "audienceType": "Personas interesadas en finanzas personales"
        },
        "creator": {
          "@type": "Organization",
          "name": "Financia Suite",
          "url": "https://financiasuite.com"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.8",
          "ratingCount": "127",
          "bestRating": "5",
          "worstRating": "1"
        }
      }
    </script>

    <!-- Organization Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Financia Suite",
        "url": "https://financiasuite.com",
        "logo": "https://financiasuite.com/img/logo-512.png",
        "sameAs": [
          "https://twitter.com/financiasuite",
          "https://facebook.com/financiasuite"
        ],
        "contactPoint": {
          "@type": "ContactPoint",
          "contactType": "Customer Support",
          "email": "soporte@financiasuite.com"
        }
      }
    </script>

    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Inicio",
            "item": "https://financiasuite.com"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Gestor de Finanzas",
            "item": "https://financiasuite.com/#dashboard"
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": "Control de Gastos",
            "item": "https://financiasuite.com/#expenses"
          }
        ]
      }
    </script>

    <!-- FAQ Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "¬øFinancia Suite es gratis?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "S√≠, Financia Suite es 100% gratuito. No tiene costo de suscripci√≥n, sin publicidad intrusiva y sin l√≠mites en el n√∫mero de transacciones que puedes registrar."
            }
          },
          {
            "@type": "Question",
            "name": "¬øNecesito instalar algo para usar Financia Suite?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "No, Financia Suite funciona directamente en tu navegador web. Puedes acceder desde cualquier dispositivo con conexi√≥n a Internet sin necesidad de descargar aplicaciones."
            }
          },
          {
            "@type": "Question",
            "name": "¬øMis datos est√°n seguros en Financia Suite?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "S√≠, tus datos se guardan de forma segura. Puedes usar la aplicaci√≥n de forma an√≥nima con almacenamiento local, o crear una cuenta para sincronizar tus datos de manera cifrada en la nube."
            }
          },
          {
            "@type": "Question",
            "name": "¬øQu√© funciones tiene Financia Suite?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Financia Suite incluye control de gastos, metas de ahorro, presupuestos mensuales, an√°lisis con IA, lista de compras inteligente, gesti√≥n multi-usuario y exportaci√≥n de datos en JSON/CSV."
            }
          }
        ]
      }
    </script>

    <!-- Nuevo sistema de gastos - CSS -->
    <link rel="stylesheet" href="NUEVO_CSS_COMPLETO.css" />
  </head>
  <body>
    <!-- Loading Spinner -->
    <div id="loader-wrapper">
      <div class="spinner"></div>
      <p>Cargando datos...</p>
    </div>

    <!-- SEO Landing Section (Hidden after load, visible to crawlers) -->
    <noscript>
      <div
        style="
          padding: 40px;
          text-align: center;
          font-family: Arial, sans-serif;
        "
      >
        <h2>Financia Suite - Gestor de Finanzas Personales Gratis</h2>
        <p>Esta aplicaci√≥n requiere JavaScript para funcionar.</p>
        <p>Por favor, habilita JavaScript en tu navegador para continuar.</p>
      </div>
    </noscript>

    <div
      id="seo-content"
      style="
        position: absolute;
        left: -9999px;
        width: 1px;
        height: 1px;
        overflow: hidden;
      "
    >
      <h1>
        Financia Suite - Gestor de Finanzas Personales Gratis con Inteligencia
        Artificial
      </h1>

      <h2>Controla tus Gastos y Ahorra Dinero de Forma Inteligente</h2>
      <p>
        Financia Suite es una <strong>aplicaci√≥n web gratuita</strong> de
        gesti√≥n financiera personal que te ayuda a
        <strong>controlar gastos</strong>, establecer
        <strong>metas de ahorro</strong> y alcanzar tus objetivos financieros.
        Con nuestra tecnolog√≠a de <strong>inteligencia artificial</strong>,
        recibir√°s consejos personalizados para mejorar tus finanzas.
      </p>

      <h2>Caracter√≠sticas Principales</h2>
      <ul>
        <li>
          <strong>Control de Gastos Autom√°tico:</strong> Registra y categoriza
          tus gastos mensualmente
        </li>
        <li>
          <strong>Metas Financieras:</strong> Establece objetivos de ahorro y
          sigue tu progreso
        </li>
        <li>
          <strong>An√°lisis con IA:</strong> Recibe recomendaciones inteligentes
          personalizadas
        </li>
        <li>
          <strong>Presupuesto de Ocio:</strong> Planifica tus gastos extras y
          caprichos
        </li>
        <li>
          <strong>Gesti√≥n Multi-Usuario:</strong> Comparte finanzas con tu
          familia
        </li>
        <li>
          <strong>Lista de Compras Inteligente:</strong> Planifica tus compras
          por prioridad
        </li>
        <li>
          <strong>Exportaci√≥n de Datos:</strong> Descarga tus datos en JSON o
          CSV
        </li>
        <li>
          <strong>100% Gratis:</strong> Sin suscripciones, sin publicidad
          intrusiva
        </li>
      </ul>

      <h2>¬øPor qu√© elegir Financia Suite?</h2>
      <p>
        A diferencia de otras aplicaciones de finanzas personales, Financia
        Suite es:
      </p>
      <ul>
        <li>
          <strong>Totalmente Gratis:</strong> No hay cargos ocultos ni planes
          premium obligatorios
        </li>
        <li>
          <strong>Privado y Seguro:</strong> Tus datos se guardan localmente o
          en tu cuenta personal
        </li>
        <li><strong>F√°cil de Usar:</strong> Interfaz intuitiva en espa√±ol</li>
        <li>
          <strong>Sin Instalaci√≥n:</strong> Funciona directamente en tu
          navegador
        </li>
        <li>
          <strong>Multiplataforma:</strong> Accede desde PC, tablet o m√≥vil
        </li>
      </ul>

      <h2>¬øC√≥mo funciona Financia Suite?</h2>
      <p>
        1. <strong>Registra tus gastos:</strong> A√±ade tus gastos diarios con
        categor√≠as como alimentaci√≥n, transporte, entretenimiento, salud,
        servicios, compras y m√°s.
      </p>
      <p>
        2. <strong>Establece tu presupuesto:</strong> Define cu√°nto quieres
        gastar mensualmente por categor√≠a y recibe alertas cuando te acerques al
        l√≠mite.
      </p>
      <p>
        3. <strong>Crea metas de ahorro:</strong> Visualiza tu progreso hacia
        objetivos como vacaciones, compra de auto, fondo de emergencia, etc.
      </p>
      <p>
        4. <strong>Analiza tus finanzas:</strong> Visualiza gr√°ficos y
        estad√≠sticas de tus gastos para identificar patrones y √°reas de mejora.
      </p>
      <p>
        5. <strong>Recibe consejos de IA:</strong> Nuestro asistente inteligente
        analiza tus h√°bitos y te ofrece recomendaciones personalizadas.
      </p>

      <h2>Preguntas Frecuentes sobre Finanzas Personales</h2>

      <h3>¬øC√≥mo puedo ahorrar dinero cada mes?</h3>
      <p>
        El primer paso es saber en qu√© gastas tu dinero. Financia Suite te ayuda
        a identificar gastos innecesarios y establecer presupuestos realistas
        por categor√≠a.
      </p>

      <h3>¬øQu√© es un presupuesto personal?</h3>
      <p>
        Un presupuesto personal es un plan que indica cu√°nto dinero gastar√°s en
        diferentes categor√≠as durante un per√≠odo (generalmente un mes). Te ayuda
        a no gastar m√°s de lo que ganas.
      </p>

      <h3>¬øCu√°nto debo ahorrar al mes?</h3>
      <p>
        Los expertos recomiendan ahorrar al menos el 20% de tus ingresos
        mensuales. Con Financia Suite puedes establecer esta meta y seguir tu
        progreso autom√°ticamente.
      </p>

      <h3>¬øC√≥mo controlar mis gastos mensuales?</h3>
      <p>
        La clave es registrar todos tus gastos, categorizarlos y compararlos con
        tu presupuesto. Nuestra app hace esto de forma autom√°tica y te env√≠a
        alertas cuando gastas de m√°s.
      </p>

      <h2>Categor√≠as de Gastos que Puedes Gestionar</h2>
      <ul>
        <li>
          <strong>Alimentaci√≥n:</strong> Supermercado, restaurantes, comida a
          domicilio
        </li>
        <li>
          <strong>Transporte:</strong> Gasolina, transporte p√∫blico,
          mantenimiento del auto
        </li>
        <li>
          <strong>Entretenimiento:</strong> Cine, streaming, hobbies, salidas
        </li>
        <li><strong>Salud:</strong> Medicinas, seguros, consultas m√©dicas</li>
        <li><strong>Servicios:</strong> Luz, agua, internet, tel√©fono, gas</li>
        <li><strong>Compras:</strong> Ropa, electr√≥nicos, muebles</li>
        <li>
          <strong>Otros:</strong> Cualquier gasto que no encaje en las
          anteriores
        </li>
      </ul>

      <h2>Seguridad y Privacidad</h2>
      <p>
        Tus datos financieros son sensibles y los tratamos con el m√°ximo
        cuidado:
      </p>
      <ul>
        <li>Almacenamiento local en tu dispositivo (modo an√≥nimo)</li>
        <li>Sincronizaci√≥n segura con Firebase (modo autenticado)</li>
        <li>No vendemos ni compartimos tus datos con terceros</li>
        <li>Cifrado de datos en tr√°nsito</li>
        <li>Puedes exportar o eliminar tus datos en cualquier momento</li>
      </ul>

      <h2>Comienza a Controlar tus Finanzas Hoy</h2>
      <p>
        Financia Suite es la herramienta perfecta para personas que quieren:
      </p>
      <ul>
        <li>Dejar de vivir al d√≠a y empezar a ahorrar</li>
        <li>Saber exactamente en qu√© gastan su dinero</li>
        <li>Alcanzar metas financieras espec√≠ficas</li>
        <li>Mejorar sus h√°bitos de consumo</li>
        <li>Tener control total sobre sus finanzas personales</li>
      </ul>

      <p>
        <strong
          >100% Gratis | Sin Publicidad | En Espa√±ol | Funciona en cualquier
          navegador</strong
        >
      </p>

      <h2>
        Palabras clave: Gestor finanzas personales, control de gastos, app
        presupuesto gratis, ahorro dinero, finanzas familiares, gestor
        financiero IA
      </h2>
    </div>

    <!-- Navbar -->
    <header class="navbar">
      <div class="navbar__container">
        <div class="navbar__logo">
          <div class="logo-icon">
            <svg
              class="logo-svg"
              viewBox="0 0 40 40"
              xmlns="http://www.w3.org/2000/svg"
            >
              <defs>
                <linearGradient
                  id="logoGradient"
                  x1="0%"
                  y1="0%"
                  x2="100%"
                  y2="100%"
                >
                  <stop
                    offset="0%"
                    style="stop-color: var(--color-primary); stop-opacity: 1"
                  />
                  <stop
                    offset="100%"
                    style="stop-color: var(--color-teal-600); stop-opacity: 1"
                  />
                </linearGradient>
              </defs>
              <!-- C√≠rculo base -->
              <circle
                cx="20"
                cy="20"
                r="18"
                fill="url(#logoGradient)"
                stroke="white"
                stroke-width="2"
              />
              <!-- Gr√°fico estilizado -->
              <path
                d="M12 28 L16 22 L20 25 L24 18 L28 20"
                stroke="white"
                stroke-width="2.5"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <!-- Puntos de datos -->
              <circle cx="16" cy="22" r="2.5" fill="white" />
              <circle cx="20" cy="25" r="2.5" fill="white" />
              <circle cx="24" cy="18" r="2.5" fill="white" />
              <!-- S√≠mbolo de moneda $ -->
              <text
                x="20"
                y="15"
                text-anchor="middle"
                fill="white"
                font-size="8"
                font-weight="bold"
              >
                $
              </text>
            </svg>
          </div>
          <span class="logo-text">
            <span class="brand-name">Financia</span>
            <span class="brand-suite"
              >Suite Pro <span class="beta-badge">BETA</span></span
            >
          </span>
        </div>
        <button
          class="icon-btn hamburger-menu"
          id="hamburgerBtn"
          aria-label="Abrir men√∫"
        >
          <i class="fas fa-bars"></i>
        </button>
        <div class="navbar__actions">
          <button
            id="notificationArea"
            class="notifications icon-btn notification-bell"
            style="position: relative"
            onclick="window.notificationsSystem?.openNotificationsPanel()"
          >
            <i id="notificationBell" class="fas fa-bell"></i>
            <span
              id="notificationCount"
              class="notification-badge"
              style="display: none"
            ></span>
          </button>

          <button
            id="mobileProfileBtn"
            class="icon-btn mobile-profile-btn"
            title="Mi cuenta"
          >
            <i class="fas fa-user"></i>
          </button>

          <button
            id="mobileAuthBtn"
            class="icon-btn mobile-auth-btn"
            title="Iniciar sesi√≥n"
            data-auth-state="logged-out"
            style="display: none;"
          >
            <i class="fas fa-sign-in-alt"></i>
            <span class="mobile-auth-text">Iniciar sesi√≥n</span>
          </button>

          <div id="notificationDropdown" class="notification-dropdown hidden">
            <div class="notification-header">
              <h4>Notificaciones</h4>
              <button
                class="notification-header-action"
                id="markAllReadBtn"
                title="Marcar todo como le√≠do"
              >
                <i class="fas fa-check-double"></i>
              </button>
            </div>

            <div class="notification-body" id="notificationBody">
              <div class="notification-list" id="notificationList">
                <!-- Notifications will be rendered here -->
              </div>

              <div class="notification-empty hidden" id="notificationEmpty">
                <div class="notification-empty-icon">
                  <i class="fas fa-bell-slash"></i>
                </div>
                <h5>¬°Todo al d√≠a!</h5>
                <p>No tienes notificaciones pendientes</p>
              </div>
            </div>

            <div class="notification-footer">
              <button
                class="notification-settings-btn"
                id="notificationSettingsBtn"
                title="Configuraci√≥n de notificaciones"
              >
                <i class="fas fa-cog"></i>
                <span>Configuraci√≥n</span>
              </button>
            </div>
          </div>
          <button
            class="icon-btn"
            id="themeToggle"
            aria-label="Cambiar a modo oscuro"
          >
            <i class="fas fa-moon"></i>
          </button>

          <!-- Login Icon (shown when not logged in) -->
          <button
            class="login-icon-btn"
            id="navbarLoginBtn"
            aria-label="Iniciar sesi√≥n"
            title="Iniciar sesi√≥n"
          >
            <i class="fas fa-user-circle"></i>
          </button>

          <!-- Profile Menu (shown when logged in) -->
          <div
            class="profile-menu-container"
            id="profileMenuContainer"
            style="display: none"
          >
            <button
              class="profile-avatar-btn"
              id="profileAvatarBtn"
              aria-label="Abrir men√∫ de perfil"
            >
              <div class="profile-avatar-wrapper" id="profileAvatarWrapper">
                <!-- Animated ring for Pro users -->
                <div class="profile-ring" id="profileRing">
                  <svg class="profile-ring-svg" viewBox="0 0 60 60">
                    <circle
                      class="profile-ring-track"
                      cx="30"
                      cy="30"
                      r="28"
                      fill="none"
                      stroke-width="2"
                    ></circle>
                    <circle
                      class="profile-ring-progress"
                      cx="30"
                      cy="30"
                      r="28"
                      fill="none"
                      stroke-width="2"
                    ></circle>
                  </svg>
                </div>

                <!-- Avatar image -->
                <img
                  class="profile-avatar"
                  id="profileAvatar"
                  src=""
                  alt="Foto de perfil"
                />

                <!-- Verification badge for Pro users -->
                <div class="profile-verification-badge" id="profileBadge">
                  <i class="fas fa-check"></i>
                </div>
              </div>
            </button>

            <!-- Profile Dropdown Menu -->
            <div class="profile-dropdown hidden" id="profileDropdown">
              <div class="profile-dropdown-header">
                <div class="profile-header-avatar">
                  <img
                    class="profile-header-img"
                    id="profileHeaderImg"
                    src=""
                    alt="Avatar"
                  />
                  <div class="profile-header-badge" id="profileHeaderBadge">
                    <i class="fas fa-crown"></i>
                  </div>
                </div>
                <div class="profile-header-info">
                  <h4 class="profile-name" id="profileName">Usuario</h4>
                  <span class="profile-plan" id="profilePlan">Plan Free</span>
                </div>
              </div>

              <div class="profile-dropdown-menu">
                <button class="profile-menu-item" id="viewProfileBtn">
                  <i class="fas fa-user"></i>
                  <span>Ver Perfil</span>
                </button>
                <button class="profile-menu-item" id="profileSettingsBtn">
                  <i class="fas fa-cog"></i>
                  <span>Configuraci√≥n</span>
                </button>
                <div class="profile-menu-divider"></div>
                <button
                  class="profile-menu-item profile-menu-logout"
                  id="profileLogoutBtn"
                >
                  <i class="fas fa-sign-out-alt"></i>
                  <span>Cerrar Sesi√≥n</span>
                </button>
              </div>

              <div class="profile-dropdown-footer">
                <button class="profile-upgrade-btn" id="profileUpgradeBtn">
                  <i class="fas fa-star"></i>
                  <span>Pr√≥ximamente</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Mobile Profile Banner (INDEPENDIENTE - Fuera del sidebar) -->
    <div class="mobile-profile-banner" id="mobileProfileBanner">
      <div class="mobile-banner-cover" id="mobileBannerCover">
        <!-- Banner de fondo personalizable -->

        <!-- Bot√≥n HAMBURGUESA (esquina superior izquierda) -->
        <button class="banner-hamburger-btn" id="mobileHamburgerBtn">
          <i class="fas fa-bars"></i>
        </button>

        <!-- CAMPANA DE NOTIFICACIONES (esquina superior derecha) -->
        <div class="banner-notification-btn" id="bannerNotificationArea">
          <button class="banner-notification-bell">
            <i class="fas fa-bell" id="bannerNotificationBell"></i>
            <span
              class="banner-notification-badge"
              id="bannerNotificationCount"
              style="display: none"
            >
              <i class="fas fa-exclamation"></i>
            </span>
          </button>
        </div>
      </div>

      <div class="mobile-profile-info">
        <div class="mobile-avatar-container" id="mobileAvatarContainer">
          <img class="mobile-avatar" id="mobileAvatar" src="" alt="Avatar" />
          <div class="mobile-avatar-ring"></div>
        </div>
        <div class="mobile-user-details">
          <h3 class="mobile-username" id="mobileUsername">Usuario</h3>
          <p class="mobile-user-quote" id="mobileUserQuote">
            Agrega una frase inspiradora...
          </p>
          <p class="mobile-user-stats" id="mobileUserStats">Balance: $0</p>
        </div>
      </div>

      <!-- Logros minimalistas dorados -->
      <div class="mobile-achievements" id="mobileAchievements">
        <!-- Se llenar√° din√°micamente con JS -->
      </div>
    </div>

    <!-- ============================================
         MEN√ö DEL AVATAR (NUEVO - Arquitectura Moderna)
         ============================================ -->
    <aside
      class="avatar-sidebar"
      id="avatarSidebar"
      role="dialog"
      aria-label="Men√∫ de usuario"
      aria-hidden="true"
    >
      <!-- Header del men√∫ -->
      <header class="avatar-sidebar__header">
        <div class="avatar-sidebar__profile">
          <img
            class="avatar-sidebar__image"
            id="avatarSidebarImage"
            src="https://ui-avatars.com/api/?name=Usuario&background=21808D&color=fff&size=128&font-size=0.6"
            alt="Foto de perfil"
          />
          <div class="avatar-sidebar__info">
            <h3 class="avatar-sidebar__name" id="avatarSidebarName">Usuario</h3>
            <p class="avatar-sidebar__email" id="avatarSidebarEmail">
              email@ejemplo.com
            </p>
          </div>
        </div>
        <button
          class="avatar-sidebar__close"
          id="avatarSidebarClose"
          aria-label="Cerrar men√∫"
        >
          <i class="fas fa-times"></i>
        </button>
      </header>

      <!-- Contenido del men√∫ -->
      <nav class="avatar-sidebar__content">
        <!-- Perfil -->
        <section class="avatar-sidebar__section">
          <h4 class="avatar-sidebar__section-title">Perfil</h4>
          <ul class="avatar-sidebar__menu">
            <li>
              <button class="avatar-sidebar__item" data-action="change-photo">
                <i class="fas fa-camera"></i>
                <span>Cambiar foto</span>
              </button>
            </li>
            <li>
              <button class="avatar-sidebar__item" data-action="change-name">
                <i class="fas fa-user-edit"></i>
                <span>Cambiar nombre</span>
              </button>
            </li>
            <li>
              <button class="avatar-sidebar__item" data-action="edit-quote">
                <i class="fas fa-quote-right"></i>
                <span>Frase personal</span>
              </button>
            </li>
          </ul>
        </section>

        <!-- Funciones -->
        <section class="avatar-sidebar__section">
          <h4 class="avatar-sidebar__section-title">Funciones</h4>
          <ul class="avatar-sidebar__menu">
            <li>
              <button
                class="avatar-sidebar__item"
                data-action="my-achievements"
                onclick="openAchievementsModal()"
              >
                <i class="fas fa-trophy"></i>
                <span>Mis logros</span>
              </button>
            </li>
            <li>
              <button
                class="avatar-sidebar__item avatar-sidebar__item--premium"
                data-action="go-premium"
              >
                <i class="fas fa-crown"></i>
                <span>Ir a Premium</span>
                <span class="avatar-sidebar__badge">PRO</span>
              </button>
            </li>
          </ul>
        </section>

        <!-- Configuraci√≥n -->
        <section class="avatar-sidebar__section">
          <h4 class="avatar-sidebar__section-title">Configuraci√≥n</h4>
          <ul class="avatar-sidebar__menu">
            <li>
              <div class="avatar-sidebar__item avatar-sidebar__item--toggle">
                <div class="avatar-sidebar__toggle-label">
                  <i class="fas fa-moon"></i>
                  <span>Tema oscuro</span>
                </div>
                <label class="avatar-sidebar__switch">
                  <input type="checkbox" id="avatarThemeToggle" />
                  <span class="avatar-sidebar__slider"></span>
                </label>
              </div>
            </li>
          </ul>
        </section>

        <!-- Ayuda -->
        <section class="avatar-sidebar__section">
          <h4 class="avatar-sidebar__section-title">Ayuda</h4>
          <ul class="avatar-sidebar__menu">
            <li>
              <button class="avatar-sidebar__item" data-action="report-problem">
                <i class="fas fa-bug"></i>
                <span>Reportar problema</span>
              </button>
            </li>
          </ul>
        </section>

        <!-- Cuenta -->
        <section class="avatar-sidebar__section">
          <h4 class="avatar-sidebar__section-title">Cuenta</h4>
          <ul class="avatar-sidebar__menu">
            <li>
              <button
                class="avatar-sidebar__item avatar-sidebar__item--danger"
                data-action="delete-account"
              >
                <i class="fas fa-trash-alt"></i>
                <span>Eliminar cuenta</span>
              </button>
            </li>
            <li>
              <button class="avatar-sidebar__item" data-action="logout">
                <i class="fas fa-sign-out-alt"></i>
                <span>Cerrar sesi√≥n</span>
              </button>
            </li>
          </ul>
        </section>
      </nav>
    </aside>

    <!-- Backdrop para cerrar el men√∫ -->
    <div
      class="avatar-sidebar-backdrop"
      id="avatarSidebarBackdrop"
      aria-hidden="true"
    ></div>

    <!-- Panel de notificaciones -->
    <div class="notification-panel" id="notificationPanel">
      <div class="notification-panel-header">
        <h3>Notificaciones</h3>
        <button class="notification-close-btn" id="notificationCloseBtn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="notification-panel-body" id="notificationPanelBody">
        <!-- Se llenar√° din√°micamente con JS -->
      </div>
    </div>

    <!-- Backdrop para cerrar men√∫s -->
    <div class="menu-backdrop" id="menuBackdrop"></div>

    <!-- Sidebar (solo navegaci√≥n) -->
    <aside class="sidebar">
      <nav class="sidebar-nav">
        <button class="nav-item active" data-section="dashboard">
          <i class="fas fa-chart-line"></i>
          <span>Inicio</span>
        </button>
        <button class="nav-item" data-section="expenses">
          <i class="fas fa-plus-circle"></i>
          <span>Registrar Gasto</span>
        </button>
        <button class="nav-item requires-auth" data-section="goals">
          <i class="fas fa-bullseye"></i>
          <span>Metas</span>
        </button>
        <button class="nav-item requires-auth" data-section="budget">
          <i class="fas fa-wallet"></i>
          <span>Presupuesto</span>
        </button>
        <!-- COMENTADO: An√°lisis - Funcionalidad duplicada con Dashboard -->
        <!-- <button class="nav-item requires-auth" data-section="analysis">
          <i class="fas fa-chart-pie"></i>
          <span>An√°lisis</span>
        </button> -->
        <button class="nav-item requires-auth" data-section="history">
          <i class="fas fa-history"></i>
          <span>Historial</span>
        </button>
        <button class="nav-item requires-auth" data-section="achievements">
          <i class="fas fa-trophy"></i>
          <span>Logros</span>
        </button>
        <button class="nav-item requires-auth" data-section="shopping">
          <i class="fas fa-shopping-cart"></i>
          <span>Lista de Compras</span>
        </button>
        <button
          class="nav-item premium-only"
          data-section="store"
          style="display: none"
        >
          <i class="fas fa-store"></i>
          <span>Tienda</span>
        </button>
        <!-- COMENTADO: Historial de Auditor√≠a antiguo (registra modificaciones/ediciones)
             Puede ser √∫til en el futuro para un historial de cambios m√°s t√©cnico -->
        <!-- <button class="nav-item requires-auth" data-section="audit">
          <i class="fas fa-history"></i>
          <span>Historial</span>
        </button> -->
        <button class="nav-item requires-auth" data-section="config">
          <i class="fas fa-cog"></i>
          <span>Config</span>
        </button>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- ============================================ -->
      <!-- LANDING PAGE                                -->
      <!-- ============================================ -->
      <section id="landing" class="section active landing-page">
        <!-- Fondo animado con parallax -->
        <div class="parallax-background">
          <div class="parallax-blob blob-1"></div>
          <div class="parallax-blob blob-2"></div>
          <div class="parallax-blob blob-3"></div>
        </div>

        <!-- Hero Section -->
        <div class="hero-section">
          <div class="hero-container">
            <div class="typing-text-wrapper">
              <h1 class="hero-title">
                <span
                  class="typing-text"
                  data-texts="Controla tus gastos|Alcanza tus metas|Ahorra inteligentemente"
                ></span>
                <span class="typing-cursor"></span>
              </h1>
            </div>

            <p class="hero-subtitle">
              Financia Suite es tu asistente financiero con
              <strong>IA que te aconseja 24/7</strong>, ayud√°ndote a
              <strong>controlar gastos</strong>, <strong>ahorrar m√°s</strong> y
              <strong>alcanzar tus metas</strong> sin complicaciones. 100%
              gratis.
            </p>

            <div class="hero-cta">
              <button
                class="btn-ripple btn-cta-primary"
                onclick="openAuthModal('register')"
              >
                <i class="fas fa-rocket"></i>
                Empieza Gratis Ahora
              </button>
              <button
                class="btn-ripple btn-cta-secondary"
                onclick="scrollToBenefits()"
              >
                <i class="fas fa-play-circle"></i>
                Ver C√≥mo Funciona
              </button>
            </div>

            <!-- Estad√≠sticas con contadores animados -->
            <div class="hero-stats">
              <div class="stat-item fade-in-up" style="animation-delay: 0.1s">
                <div class="stat-icon">üë•</div>
                <div class="animated-counter" data-value="5000" data-suffix="+">
                  5000+
                </div>
                <div class="stat-label">Usuarios Activos</div>
                <div class="stat-context">
                  Personas que ya mejoraron sus finanzas con nosotros
                </div>
              </div>

              <div class="stat-item fade-in-up" style="animation-delay: 0.2s">
                <div class="stat-icon">üí∞</div>
                <div class="animated-counter" data-value="85" data-suffix="%">
                  85%
                </div>
                <div class="stat-label">Ahorra M√°s</div>
                <div class="stat-context">
                  Promedio de ahorro mensual de nuestros usuarios
                </div>
              </div>

              <div class="stat-item fade-in-up" style="animation-delay: 0.3s">
                <div class="stat-icon">‚ö°</div>
                <div class="animated-counter" data-value="24" data-suffix="/7">
                  24/7
                </div>
                <div class="stat-label">IA Disponible</div>
                <div class="stat-context">
                  Tu asistente siempre listo para ayudarte
                </div>
              </div>

              <div class="stat-item fade-in-up" style="animation-delay: 0.4s">
                <div class="stat-icon">üîí</div>
                <div class="animated-counter" data-value="100" data-suffix="%">
                  100%
                </div>
                <div class="stat-label">Datos Seguros</div>
                <div class="stat-context">
                  Cifrado de extremo a extremo con Firebase
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Benefits Section -->
        <div class="benefits-section content-section" id="benefits">
          <div class="section-header-center fade-in-up">
            <h2>¬øPor qu√© Financia Suite?</h2>
            <p>
              Todo lo que necesitas para tomar control de tus finanzas en un
              solo lugar
            </p>
          </div>

          <div class="benefits-grid">
            <div
              class="benefit-card hover-card fade-in-up"
              style="animation-delay: 0.1s"
            >
              <div class="benefit-icon card-icon">
                <i class="fas fa-brain"></i>
              </div>
              <h3>IA Financiera Personal</h3>
              <p>
                Fin, tu asistente con inteligencia artificial, analiza tus
                gastos y te da consejos personalizados para ahorrar m√°s cada
                mes.
              </p>
              <ul class="benefit-list">
                <li>
                  <i class="fas fa-check"></i> Respuestas instant√°neas 24/7
                </li>
                <li>
                  <i class="fas fa-check"></i> An√°lisis inteligente de patrones
                </li>
                <li>
                  <i class="fas fa-check"></i> Recomendaciones personalizadas
                </li>
              </ul>
            </div>

            <div
              class="benefit-card hover-card fade-in-up"
              style="animation-delay: 0.2s"
            >
              <div class="benefit-icon card-icon">
                <i class="fas fa-chart-pie"></i>
              </div>
              <h3>Control Visual de Gastos</h3>
              <p>
                Ve exactamente en qu√© gastas tu dinero con gr√°ficos claros y
                f√°ciles de entender. Sin complicaciones t√©cnicas.
              </p>
              <ul class="benefit-list">
                <li>
                  <i class="fas fa-check"></i> Gr√°ficos interactivos y claros
                </li>
                <li><i class="fas fa-check"></i> Categorizaci√≥n autom√°tica</li>
                <li>
                  <i class="fas fa-check"></i> Reportes mensuales detallados
                </li>
              </ul>
            </div>

            <div
              class="benefit-card hover-card fade-in-up"
              style="animation-delay: 0.3s"
            >
              <div class="benefit-icon card-icon">
                <i class="fas fa-bullseye"></i>
              </div>
              <h3>Metas que Motivan</h3>
              <p>
                Define tus objetivos financieros y recibe notificaciones que te
                mantienen enfocado en alcanzarlos.
              </p>
              <ul class="benefit-list">
                <li>
                  <i class="fas fa-check"></i> Seguimiento visual del progreso
                </li>
                <li><i class="fas fa-check"></i> Recordatorios inteligentes</li>
                <li>
                  <i class="fas fa-check"></i> Celebra cada logro alcanzado
                </li>
              </ul>
            </div>

            <div
              class="benefit-card hover-card fade-in-up"
              style="animation-delay: 0.4s"
            >
              <div class="benefit-icon card-icon">
                <i class="fas fa-bell"></i>
              </div>
              <h3>Notificaciones Inteligentes</h3>
              <p>
                Recibe alertas cuando gastes de m√°s, est√©s cerca de tus metas o
                necesites registrar tus gastos del d√≠a.
              </p>
              <ul class="benefit-list">
                <li>
                  <i class="fas fa-check"></i> Alertas de presupuesto excedido
                </li>
                <li><i class="fas fa-check"></i> Recordatorios de metas</li>
                <li>
                  <i class="fas fa-check"></i> Res√∫menes diarios autom√°ticos
                </li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Testimonials Section -->
        <div class="testimonials-section content-section">
          <div class="section-header-center fade-in-up">
            <h2>Lo que dicen nuestros usuarios</h2>
            <p>
              Miles de personas ya est√°n mejorando sus finanzas con Financia
              Suite
            </p>
          </div>

          <div class="testimonials-grid">
            <div
              class="testimonial-card fade-in-up"
              style="animation-delay: 0.1s"
            >
              <div class="testimonial-stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
              <p class="testimonial-text">
                "Wn esta app me salv√≥ la vida! Antes llegaba a fin de mes
                endeudado y no cachaba en qu√© se me iba la plata. Ahora veo todo
                clarito y pude juntar como 400 lucas para el regalo de mi
                polola. La recomiendo caleta üëå"
              </p>
              <div class="testimonial-author">
                <div class="author-avatar">üôã‚Äç‚ôÇÔ∏è</div>
                <div class="author-info">
                  <strong>Cristian M.</strong>
                  <span>Santiago, Chile</span>
                </div>
              </div>
            </div>

            <div
              class="testimonial-card fade-in-up"
              style="animation-delay: 0.2s"
            >
              <div class="testimonial-stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
              <p class="testimonial-text">
                "Como contador, he probado varios softwares de control
                financiero para recomendar a mis clientes. Financia Suite
                destaca por su simplicidad y el asistente con IA. Una
                herramienta profesional accesible para todos."
              </p>
              <div class="testimonial-author">
                <div class="author-avatar">üë®‚Äçüíº</div>
                <div class="author-info">
                  <strong>Dr. Roberto Fuentes</strong>
                  <span>Contador Auditor</span>
                </div>
              </div>
            </div>

            <div
              class="testimonial-card fade-in-up"
              style="animation-delay: 0.3s"
            >
              <div class="testimonial-stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
              <p class="testimonial-text">
                "Yo no soy de tecnolog√≠a pero mi hija me ense√±√≥ a usar esto y
                ahora registro todos mis gastos desde el celu. Me encanta que me
                avisa cuando gasto mucho. Ya ahorr√© para comprar el regalo de
                navidad de mis nietos üòä"
              </p>
              <div class="testimonial-author">
                <div class="author-avatar">üëµ</div>
                <div class="author-info">
                  <strong>Carmen de Gonz√°lez</strong>
                  <span>Jubilada, 62 a√±os</span>
                </div>
              </div>
            </div>

            <div
              class="testimonial-card fade-in-up"
              style="animation-delay: 0.4s"
            >
              <div class="testimonial-stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
              <p class="testimonial-text">
                "Mi esposo y yo compartimos la cuenta y as√≠ vemos TODO lo que
                gastamos los dos. Antes pele√°bamos porque √©l dec√≠a que yo
                gastaba mucho, ahora vemos que gastamos parecido jaja. Nos ayud√≥
                a organizarnos juntos üíë"
              </p>
              <div class="testimonial-author">
                <div class="author-avatar">üë©</div>
                <div class="author-info">
                  <strong>Valentina R.</strong>
                  <span>Maestra de Preescolar</span>
                </div>
              </div>
            </div>

            <div
              class="testimonial-card fade-in-up"
              style="animation-delay: 0.5s"
            >
              <div class="testimonial-stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
              <p class="testimonial-text">
                "Como desarrollador de software, valoro la arquitectura limpia y
                el uso de Firebase. La integraci√≥n con IA de Gemini es
                impresionante. Es un proyecto bien ejecutado t√©cnicamente y muy
                √∫til."
              </p>
              <div class="testimonial-author">
                <div class="author-avatar">üë®‚Äçüíª</div>
                <div class="author-info">
                  <strong>Jorge Ram√≠rez T.</strong>
                  <span>Ingeniero de Software Sr.</span>
                </div>
              </div>
            </div>

            <div
              class="testimonial-card fade-in-up"
              style="animation-delay: 0.6s"
            >
              <div class="testimonial-stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
              <p class="testimonial-text">
                "Llevo meses buscando algo as√≠ de simple y gratis. Otras apps te
                cobran o tienen publicidad molesta. Ac√° todo funciona bien y el
                robot que responde preguntas es re piola. Ya mis amigas tambi√©n
                la usan!"
              </p>
              <div class="testimonial-author">
                <div class="author-avatar">üë©‚Äçüéì</div>
                <div class="author-info">
                  <strong>Sof√≠a P.</strong>
                  <span>Estudiante Universitaria</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- FAQ Section -->
        <div class="faq-section content-section">
          <div class="section-header-center fade-in-up">
            <h2>Preguntas Frecuentes</h2>
            <p>Resolvemos tus dudas m√°s comunes</p>
          </div>

          <div class="faq-container">
            <div class="faq-item" onclick="toggleFAQ(this)">
              <div class="faq-question">
                <h3>¬øEs realmente gratis? ¬øNo hay trampa?</h3>
                <i class="fas fa-chevron-down"></i>
              </div>
              <div class="faq-answer">
                <p>
                  S√≠, Financia Suite es 100% gratuito. No hay costos ocultos,
                  planes premium obligatorios ni publicidad molesta. Nuestro
                  objetivo es ayudarte a mejorar tus finanzas, no lucrar con tus
                  datos.
                </p>
              </div>
            </div>

            <div class="faq-item" onclick="toggleFAQ(this)">
              <div class="faq-question">
                <h3>¬øMis datos bancarios est√°n seguros?</h3>
                <i class="fas fa-chevron-down"></i>
              </div>
              <div class="faq-answer">
                <p>
                  Absolutamente. Usamos Firebase de Google con cifrado de
                  extremo a extremo. Tus datos se guardan de forma segura y
                  privada. Nunca pedimos claves bancarias ni acceso a tus
                  cuentas.
                </p>
              </div>
            </div>

            <div class="faq-item" onclick="toggleFAQ(this)">
              <div class="faq-question">
                <h3>¬øNecesito ser experto en finanzas para usarla?</h3>
                <i class="fas fa-chevron-down"></i>
              </div>
              <div class="faq-answer">
                <p>
                  Para nada. Financia Suite est√° dise√±ado para ser simple e
                  intuitivo. Si puedes usar WhatsApp, puedes usar nuestra app.
                  Adem√°s, el asistente IA te gu√≠a en todo momento.
                </p>
              </div>
            </div>

            <div class="faq-item" onclick="toggleFAQ(this)">
              <div class="faq-question">
                <h3>¬øFunciona en mi celular?</h3>
                <i class="fas fa-chevron-down"></i>
              </div>
              <div class="faq-answer">
                <p>
                  S√≠, funciona perfecto en cualquier celular, tablet o
                  computadora. Es una aplicaci√≥n web responsive que se adapta a
                  cualquier pantalla. Pr√≥ximamente tambi√©n ser√° instalable como
                  app nativa.
                </p>
              </div>
            </div>

            <div class="faq-item" onclick="toggleFAQ(this)">
              <div class="faq-question">
                <h3>¬øPuedo compartir la cuenta con mi pareja o familia?</h3>
                <i class="fas fa-chevron-down"></i>
              </div>
              <div class="faq-answer">
                <p>
                  S√≠, puedes crear cuentas compartidas para gestionar las
                  finanzas en pareja o familia. Cada persona puede registrar sus
                  gastos y todos ven el panorama completo.
                </p>
              </div>
            </div>

            <div class="faq-item" onclick="toggleFAQ(this)">
              <div class="faq-question">
                <h3>¬øQu√© hace diferente a Financia Suite de otras apps?</h3>
                <i class="fas fa-chevron-down"></i>
              </div>
              <div class="faq-answer">
                <p>
                  Tres cosas: 1) Asistente con IA que responde tus dudas 24/7,
                  2) Completamente gratis sin trucos, 3) Interfaz super simple
                  que cualquiera puede usar. No necesitas ser experto
                  financiero.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Final CTA Section -->
        <div class="cta-final-section">
          <div class="cta-final-container">
            <h2>Comienza a Tomar Control de Tus Finanzas Hoy</h2>
            <p>
              √önete a miles de usuarios que ya est√°n ahorrando m√°s y gastando
              mejor
            </p>
            <button
              class="btn-ripple btn-cta-large"
              onclick="openAuthModal('register')"
            >
              <i class="fas fa-rocket"></i>
              Crear Cuenta Gratis
            </button>
            <p class="cta-subtext">
              <i class="fas fa-shield-alt"></i>
              No se requiere tarjeta de cr√©dito ‚Ä¢ Reg√≠strate en 30 segundos
            </p>
          </div>
        </div>
      </section>

      <!-- Secci√≥n Inicio -->
      <section id="dashboard" class="section">
        <div class="section-header">
          <h2>¬°Bienvenido a tu asistente financiero!</h2>
          <p>Gestiona tus finanzas de manera inteligente y alcanza tus metas</p>
        </div>
        <!-- Financial Summary -->
        <div class="stats-grid">
          <!-- Tarjeta de Balance Total -->
          <div
            class="stat-card stat-card--primary animate-on-scroll"
            data-animation="fadeInUp"
            data-delay="100"
            onclick="openBalanceHistoryModal(event)"
            style="cursor: pointer"
            title="Click para ver el historial de tu balance"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-wallet stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Balance Disponible</h3>
              <p class="stat-value" id="totalBalance">$0</p>
              <span class="stat-change">&nbsp;</span>
              <button
                class="btn-save-to-goals"
                id="btnSaveToGoals"
                style="
                  margin-top: 8px;
                  padding: 6px 12px;
                  font-size: 0.85rem;
                  background: var(--color-primary);
                  color: white;
                  border: none;
                  border-radius: 6px;
                  cursor: pointer;
                  transition: all 0.2s;
                "
              >
                <i class="fas fa-arrow-right" style="margin-right: 4px"></i>
                Ahorrar
              </button>
            </div>
          </div>

          <!-- Tarjeta de Gastos Totales -->
          <div
            class="stat-card stat-card--clickable animate-on-scroll"
            id="totalExpensesCard"
            data-animation="fadeInUp"
            data-delay="200"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-chart-bar stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Gastos Totales</h3>
              <p class="stat-value" id="totalExpenses">$0</p>
              <span class="stat-change negative" id="expensesChange"
                >+0% vs mes anterior</span
              >
            </div>
          </div>

          <!-- Tarjeta de Ahorros -->
          <div
            class="stat-card stat-card--savings animate-on-scroll"
            id="savingsCard"
            data-animation="fadeInUp"
            data-delay="300"
          >
            <div class="stat-icon-wrapper savings-icon-wrapper">
              <div class="savings-progress-ring" id="savingsProgressRing">
                <svg class="progress-circle" width="48" height="48">
                  <circle
                    class="progress-circle-bg"
                    cx="24"
                    cy="24"
                    r="20"
                    fill="none"
                    stroke-width="4"
                  ></circle>
                  <circle
                    class="progress-circle-fill"
                    cx="24"
                    cy="24"
                    r="20"
                    fill="none"
                    stroke-width="4"
                    stroke-dasharray="125.6"
                    stroke-dashoffset="125.6"
                    id="savingsProgressCircle"
                  ></circle>
                </svg>
                <i class="fas fa-piggy-bank stat-icon"></i>
              </div>
            </div>
            <div class="stat-details">
              <div class="savings-header">
                <h3>Ahorros</h3>
                <i class="fas fa-check savings-check" id="savingsCheck"></i>
              </div>
              <p class="stat-value" id="totalSavings">$0</p>
              <span
                class="stat-change savings-progress-text"
                id="savingsProgressText"
                >0% de la meta</span
              >
            </div>
          </div>

          <!-- Tarjeta de Transacciones -->
          <div
            class="stat-card stat-card--clickable animate-on-scroll"
            id="transactionsCard"
            data-animation="fadeInUp"
            data-delay="400"
            style="cursor: pointer"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-receipt stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Transacciones</h3>
              <p class="stat-value" id="totalTransactions">0</p>
              <span class="stat-change">Este mes</span>
            </div>
          </div>

          <!-- Tarjeta de Progreso Mensual -->
          <div
            class="stat-card stat-card--progress animate-on-scroll"
            data-animation="fadeInUp"
            data-delay="500"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-calendar-alt stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Progreso Mensual</h3>
              <p class="stat-value" id="monthlyProgress">0%</p>
              <span class="stat-change" id="monthlyProgressText"
                >Comenzaste con $0</span
              >
            </div>
          </div>

          <!-- Tarjeta de Presupuesto de Extras -->
          <div
            class="stat-card stat-card--clickable stat-card--budget animate-on-scroll"
            id="budgetCard"
            data-animation="fadeInUp"
            data-delay="600"
            style="cursor: pointer"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-gift stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Presupuesto Extras</h3>
              <p class="stat-value" id="budgetValue">$0</p>
              <span class="stat-change" id="budgetRemaining"
                >Para gustos: $0</span
              >
            </div>
          </div>
        </div>

        <!-- Panel Interactivo Premium -->
        <div
          class="premium-dashboard animate-on-scroll"
          data-animation="fadeIn"
          data-delay="600"
        >
          <div class="dashboard-grid">
            <!-- Left Column: Chart -->
            <div
              class="chart-column animate-on-scroll"
              data-animation="slideInLeft"
              data-delay="700"
            >
              <div class="chart-container-premium">
                <div class="chart-header">
                  <h3 class="chart-title">Distribuci√≥n de Gastos</h3>
                  <div class="chart-subtitle">
                    An√°lisis detallado de tus finanzas
                  </div>
                </div>
                <div class="burger-chart-wrapper">
                  <canvas id="premiumChart" width="400" height="400"></canvas>
                  <div class="chart-center-info">
                    <div class="total-amount" id="totalAmount">$0</div>
                    <div class="total-label">Total gastado</div>
                  </div>
                </div>
                <div class="chart-legend" id="chartLegend"></div>
              </div>

              <!-- Tendencia de Gastos Chart -->
              <div class="chart-container-premium">
                <div class="chart-header">
                  <h3 class="chart-title">Tendencia de Gastos</h3>
                  <div class="chart-subtitle">√öltimos 6 meses</div>
                </div>
                <div class="trend-chart-wrapper">
                  <canvas id="trendChart"></canvas>
                </div>
              </div>
            </div>

            <!-- Right Column: Individual Cards -->
            <div
              class="cards-column animate-on-scroll"
              data-animation="slideInRight"
              data-delay="800"
            >
              <!-- Cash Flow Card -->
              <div class="card">
                <div class="card__header">
                  <h3>Flujo de Caja</h3>
                  <span class="main-value" id="cashFlowTotal">$2,000</span>
                </div>
                <div class="card__body">
                  <div class="progress-bars">
                    <div class="progress-item">
                      <div class="progress-label">
                        <span>Gastos Necesarios</span>
                        <span class="progress-value" id="necessaryValue"
                          >$1,200</span
                        >
                      </div>
                      <div class="progress-bar">
                        <div
                          class="progress-fill necessary"
                          id="necessaryProgress"
                        ></div>
                      </div>
                    </div>
                    <div class="progress-item">
                      <div class="progress-label">
                        <span>Gastos No Necesarios</span>
                        <span class="progress-value" id="unnecessaryValue"
                          >$800</span
                        >
                      </div>
                      <div class="progress-bar">
                        <div
                          class="progress-fill unnecessary"
                          id="unnecessaryProgress"
                        ></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Upcoming Payments Card -->
              <div
                class="card upcoming-payments-card"
                id="upcomingPaymentsCard"
              >
                <div class="card__header">
                  <h3>Pr√≥ximos Pagos</h3>
                  <span class="payment-count" id="paymentCount"
                    >0 pendientes</span
                  >
                </div>
                <div class="card__body">
                  <div
                    class="payments-scroll-container"
                    id="paymentsScrollContainer"
                  >
                    <div class="payments-list" id="paymentsList">
                      <!-- Payments will be dynamically inserted -->
                      <div class="empty-state-small">
                        <i class="fas fa-money-bill-wave"></i>
                        <p>No hay pagos registrados</p>
                        <p class="empty-state-hint">
                          Configura tus pagos recurrentes en Configuraci√≥n
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Goals Progress Card -->
              <div class="card">
                <div class="card__header">
                  <h3>Progreso de Metas</h3>
                  <button class="cta-button" id="addGoalBtn">
                    <i class="fas fa-plus"></i> Nueva Meta
                  </button>
                </div>
                <div class="card__body">
                  <div class="goals-summary">
                    <div class="circular-progress">
                      <svg class="progress-ring" width="80" height="80">
                        <circle
                          class="progress-ring-bg"
                          cx="40"
                          cy="40"
                          r="35"
                          stroke-width="6"
                        ></circle>
                        <circle
                          class="progress-ring-fill"
                          cx="40"
                          cy="40"
                          r="35"
                          stroke-width="6"
                          id="goalsProgressRing"
                        ></circle>
                      </svg>
                      <div class="progress-center">
                        <i class="fas fa-piggy-bank"></i>
                      </div>
                    </div>
                    <div class="goals-info">
                      <div class="goals-text" id="goalsProgressText">
                        $4,200 / $6,000
                      </div>
                      <div
                        class="goals-percentage"
                        id="goalsProgressPercentage"
                      >
                        70%
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Quick Access Card -->
              <div class="card">
                <div class="card__header">
                  <h3>Acceso R√°pido</h3>
                  <span class="greeting" id="quickAccessGreeting"
                    >¬°Hola, Usuario!</span
                  >
                </div>
                <div class="card__body">
                  <div class="quick-access-content">
                    <div class="last-transaction" id="lastTransactionInfo">
                      <div class="transaction-label">√öltima transacci√≥n:</div>
                      <div
                        class="transaction-detail"
                        id="lastTransactionDetail"
                      >
                        <span class="transaction-desc">Sin transacciones</span>
                        <span class="transaction-amount">$0</span>
                      </div>
                    </div>
                    <button class="quick-action-btn" id="quickAddExpenseBtn">
                      <i class="fas fa-plus"></i>
                      <span>Registrar Gasto</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Bottom Panel: Floating Keywords & Insights -->
          <!-- <div class="insights-panel">
            <div class="floating-keywords">
              <div class="keyword-cloud">
                <span class="keyword" data-delay="0">Ahorro Inteligente</span>
                <span class="keyword" data-delay="200">Control Total</span>
                <span class="keyword" data-delay="400">Metas Claras</span>
                <span class="keyword" data-delay="600">Finanzas Sanas</span>
                <span class="keyword" data-delay="800">Inversi√≥n Segura</span>
                <span class="keyword" data-delay="1000">Futuro Pr√≥spero</span>
                <span class="keyword" data-delay="1200">Decisiones Sabias</span>
                <span class="keyword" data-delay="1400"
                  >Libertad Financiera</span
                >
              </div>
            </div>

            <div class="insights-cards">
              <div class="insight-card" id="insightCard1">
                <div class="insight-icon">üí°</div>
                <div class="insight-content">
                  <h4>Consejo del D√≠a</h4>
                  <p id="dailyTip">
                    Revisa tus gastos semanalmente para mantener el control
                  </p>
                </div>
              </div>

              <div class="insight-card" id="insightCard2">
                <div class="insight-icon">üìà</div>
                <div class="insight-content">
                  <h4>Tu Progreso</h4>
                  <p id="progressInsight">
                    Vas por buen camino hacia tus metas
                  </p>
                </div>
              </div>

              <div class="insight-card" id="insightCard3">
                <div class="insight-icon">üéØ</div>
                <div class="insight-content">
                  <h4>Pr√≥ximo Objetivo</h4>
                  <p id="nextGoal">Contin√∫a ahorrando para alcanzar tu meta</p>
                </div>
              </div>
            </div>
          </div> -->
        </div>

        <!-- Brand Carousel Section -->
        <div class="brand-carousel-container">
          <div class="brand-carousel-wrapper">
            <div class="brand-carousel-track" id="brandCarouselTrack">
              <!-- Brand Card 1 -->
              <div class="brand-card">
                <div class="brand-icon gradient-blue">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="brand-content">
                  <h3>An√°lisis Inteligente</h3>
                  <p>Rastrea y analiza gastos</p>
                </div>
              </div>

              <!-- Brand Card 2 -->
              <div class="brand-card">
                <div class="brand-icon gradient-purple">
                  <i class="fas fa-bullseye"></i>
                </div>
                <div class="brand-content">
                  <h3>Metas Personalizadas</h3>
                  <p>Define objetivos financieros</p>
                </div>
              </div>

              <!-- Brand Card 3 -->
              <div class="brand-card">
                <div class="brand-icon gradient-green">
                  <i class="fas fa-brain"></i>
                </div>
                <div class="brand-content">
                  <h3>IA Financiera</h3>
                  <p>Recomendaciones autom√°ticas</p>
                </div>
              </div>

              <!-- Brand Card 4 -->
              <div class="brand-card">
                <div class="brand-icon gradient-orange">
                  <i class="fas fa-trophy"></i>
                </div>
                <div class="brand-content">
                  <h3>Sistema de Logros</h3>
                  <p>Gamificaci√≥n motivacional</p>
                </div>
              </div>

              <!-- Brand Card 5 -->
              <div class="brand-card">
                <div class="brand-icon gradient-red">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <div class="brand-content">
                  <h3>Seguridad Total</h3>
                  <p>Protecci√≥n de grado bancario</p>
                </div>
              </div>

              <!-- Brand Card 6 -->
              <div class="brand-card">
                <div class="brand-icon gradient-teal">
                  <i class="fas fa-mobile-alt"></i>
                </div>
                <div class="brand-content">
                  <h3>Multiplataforma</h3>
                  <p>Sincronizaci√≥n en la nube</p>
                </div>
              </div>

              <!-- Brand Card 7 -->
              <div class="brand-card">
                <div class="brand-icon gradient-pink">
                  <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="brand-content">
                  <h3>Lista Inteligente</h3>
                  <p>Compras organizadas</p>
                </div>
              </div>

              <!-- Brand Card 8 -->
              <div class="brand-card">
                <div class="brand-icon gradient-indigo">
                  <i class="fas fa-chart-pie"></i>
                </div>
                <div class="brand-content">
                  <h3>Visualizaci√≥n</h3>
                  <p>Gr√°ficos interactivos</p>
                </div>
              </div>

              <!-- Duplicate set for infinite scroll -->
              <div class="brand-card">
                <div class="brand-icon gradient-blue">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="brand-content">
                  <h3>An√°lisis Inteligente</h3>
                  <p>Rastrea y analiza gastos</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-purple">
                  <i class="fas fa-bullseye"></i>
                </div>
                <div class="brand-content">
                  <h3>Metas Personalizadas</h3>
                  <p>Define objetivos financieros</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-green">
                  <i class="fas fa-brain"></i>
                </div>
                <div class="brand-content">
                  <h3>IA Financiera</h3>
                  <p>Recomendaciones autom√°ticas</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-orange">
                  <i class="fas fa-trophy"></i>
                </div>
                <div class="brand-content">
                  <h3>Sistema de Logros</h3>
                  <p>Gamificaci√≥n motivacional</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-red">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <div class="brand-content">
                  <h3>Seguridad Total</h3>
                  <p>Protecci√≥n de grado bancario</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-teal">
                  <i class="fas fa-mobile-alt"></i>
                </div>
                <div class="brand-content">
                  <h3>Multiplataforma</h3>
                  <p>Sincronizaci√≥n en la nube</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-pink">
                  <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="brand-content">
                  <h3>Lista Inteligente</h3>
                  <p>Compras organizadas</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-indigo">
                  <i class="fas fa-chart-pie"></i>
                </div>
                <div class="brand-content">
                  <h3>Visualizaci√≥n</h3>
                  <p>Gr√°ficos interactivos</p>
                </div>
              </div>

              <!-- Third set for seamless loop -->
              <div class="brand-card">
                <div class="brand-icon gradient-blue">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="brand-content">
                  <h3>An√°lisis Inteligente</h3>
                  <p>Rastrea y analiza gastos</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-purple">
                  <i class="fas fa-bullseye"></i>
                </div>
                <div class="brand-content">
                  <h3>Metas Personalizadas</h3>
                  <p>Define objetivos financieros</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-green">
                  <i class="fas fa-brain"></i>
                </div>
                <div class="brand-content">
                  <h3>IA Financiera</h3>
                  <p>Recomendaciones autom√°ticas</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-orange">
                  <i class="fas fa-trophy"></i>
                </div>
                <div class="brand-content">
                  <h3>Sistema de Logros</h3>
                  <p>Gamificaci√≥n motivacional</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- AI Recommendations -->
        <div class="card">
          <div class="card__header">
            <h3>
              Recomendaciones de Ahorro <i class="fas fa-sparkles ai-icon"></i>
            </h3>
          </div>
          <div class="card__body">
            <div id="aiRecommendations"></div>
          </div>
        </div>

        <!-- Recent Transactions -->
        <div class="card">
          <div class="card__header">
            <h3>Transacciones Recientes</h3>
          </div>
          <div class="card__body">
            <div id="recentTransactions"></div>
          </div>
        </div>
      </section>

      <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           ‚ö†Ô∏è C√ìDIGO ANTERIOR COMENTADO - SISTEMA CON PROBLEMAS

           PROBLEMA IDENTIFICADO:
           El sistema de modales con triggers (fix-dropdowns-v2.js) causaba
           que los valores seleccionados se resetearan inmediatamente despu√©s
           de la selecci√≥n.

           CAUSA RA√çZ:
           1. Los <select> ocultos solo ten√≠an la opci√≥n placeholder
           2. handleModalOptionClick() asignaba valores que no exist√≠an
           3. El polling en fix-dropdowns-v2.js (l√≠nea 61) le√≠a el valor
              ANTES de que las opciones se poblaran
           4. Al leer un valor inexistente, el browser reseteaba a ""
           5. El trigger mostraba el placeholder en lugar del valor

           DIAGN√ìSTICO DEL USUARIO:
           "fix-dropdowns-v2.js est√° restableciendo el valor a su estado
           inicial (value: '') en la l√≠nea 61"

           SOLUCI√ìN:
           Sistema completamente reescrito con selects nativos,
           botones "A√±adir" para personalizaci√≥n, y paleta del navbar.

           FECHA: 2025-10-22
           ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

      <!-- NUEVO SISTEMA DE REGISTRO DE GASTOS -->
      <section id="expenses" class="section">
        <div class="section-header">
          <h2>üí≥ Registro de Gastos</h2>
          <p>Sistema simplificado con opciones personalizables</p>
        </div>

        <!-- Premium Expense Form Card -->
        <div class="expense-form-premium">
          <div class="expense-form-tabs">
            <button class="expense-tab-btn active" data-tab="manual">
              <i class="fas fa-keyboard"></i>
              <span>Manual</span>
            </button>
            <button class="expense-tab-btn" data-tab="quick">
              <i class="fas fa-bolt"></i>
              <span>R√°pido</span>
            </button>
            <button class="expense-tab-btn" data-tab="recurring">
              <i class="fas fa-repeat"></i>
              <span>Recurrente</span>
            </button>
          </div>

          <form id="expenseForm" class="expense-form-content">
            <!-- Amount Section - Featured -->
            <div class="expense-amount-section">
              <label class="expense-amount-label" for="amount"
                >Monto del gasto</label
              >
              <div class="expense-amount-input-wrapper">
                <span class="expense-currency">$</span>
                <input
                  type="text"
                  id="amount"
                  class="expense-amount-input"
                  placeholder="Ejemplo: 1500"
                  inputmode="numeric"
                  required
                  autofocus
                  autocomplete="off"
                />
              </div>
              <div class="expense-amount-suggestions" id="amountSuggestions">
                <!-- Dynamic suggestions will be added here -->
              </div>
            </div>

            <!-- Receipt Scanner Section -->
            <div class="receipt-scanner-section">
              <button type="button" id="receiptScanBtn" class="btn-receipt-scan">
                <i class="fas fa-camera"></i>
                <span>Escanear Recibo</span>
              </button>
              <p class="receipt-scan-hint">
                <i class="fas fa-info-circle"></i>
                Toma una foto del recibo para rellenar autom√°ticamente
              </p>
            </div>

            <!-- Receipt Scanner Modal -->
            <div id="receiptScannerModal" class="modal-receipt-scanner hidden">
              <div class="modal-receipt-content">
                <div class="modal-receipt-header">
                  <h3><i class="fas fa-receipt"></i> Escanear Recibo</h3>
                  <button type="button" class="btn-close-receipt" id="closeReceiptModal">
                    <i class="fas fa-times"></i>
                  </button>
                </div>

                <!-- Desktop Warning -->
                <div class="desktop-warning" id="desktopWarning">
                  <i class="fas fa-mobile-alt"></i>
                  <p><strong>Recomendaci√≥n:</strong> Esta funci√≥n funciona mejor desde un dispositivo m√≥vil con c√°mara.</p>
                </div>

                <div class="modal-receipt-body">
                  <!-- Capture Options -->
                  <div class="receipt-capture-options">
                    <input
                      type="file"
                      id="receiptImageInput"
                      accept="image/*"
                      capture="environment"
                      style="display: none;"
                    />
                    <button type="button" class="btn-capture-option btn-camera" id="btnTakePhoto">
                      <i class="fas fa-camera"></i>
                      <span>Tomar Foto</span>
                    </button>
                    <button type="button" class="btn-capture-option btn-upload" id="btnUploadImage">
                      <i class="fas fa-upload"></i>
                      <span>Cargar Imagen</span>
                    </button>
                  </div>

                  <!-- Image Preview -->
                  <div class="receipt-preview hidden" id="receiptPreview">
                    <img id="receiptPreviewImage" src="" alt="Vista previa del recibo" />
                    <button type="button" class="btn-remove-image" id="btnRemoveImage">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>

                  <!-- Processing Status -->
                  <div class="receipt-processing hidden" id="receiptProcessing">
                    <div class="spinner-receipt"></div>
                    <p>Analizando recibo con IA...</p>
                    <small>Esto puede tomar unos segundos</small>
                  </div>

                  <!-- Extracted Data Preview -->
                  <div class="receipt-data-preview hidden" id="receiptDataPreview">
                    <h4><i class="fas fa-check-circle"></i> Datos Extra√≠dos</h4>
                    <div class="extracted-data-list" id="extractedDataList"></div>
                    <button type="button" class="btn-primary" id="btnApplyData">
                      Aplicar Datos al Formulario
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Description with Autocomplete -->
            <div class="form-group-premium">
              <label class="form-label-premium" for="description">
                <i class="fas fa-align-left" aria-hidden="true"></i>
                Descripci√≥n del gasto
              </label>
              <div class="input-with-icon">
                <input
                  type="text"
                  id="description"
                  class="form-input-premium"
                  placeholder="¬øEn qu√© gastaste?"
                  required
                  autocomplete="off"
                />
                <div
                  class="autocomplete-dropdown hidden"
                  id="descriptionAutocomplete"
                ></div>
              </div>
            </div>

            <!-- Category with Add Button -->
            <div class="form-group-premium">
              <label class="form-label-premium" for="category">
                <i class="fas fa-tag" aria-hidden="true"></i>
                Categor√≠a
              </label>
              <div class="select-with-add">
                <select
                  id="category"
                  class="form-input-premium form-select-native"
                  required
                >
                  <option value="">Selecciona categor√≠a</option>
                  <option value="Alimentaci√≥n">üçΩÔ∏è Alimentaci√≥n</option>
                  <option value="Transporte">üöó Transporte</option>
                  <option value="Entretenimiento">üé¨ Entretenimiento</option>
                  <option value="Salud">üè• Salud</option>
                  <option value="Servicios">‚ö° Servicios</option>
                  <option value="Compras">üõçÔ∏è Compras</option>
                  <option value="Otros">üì¶ Otros</option>
                </select>
                <button
                  type="button"
                  class="btn-add-option"
                  id="addCategoryBtn"
                  title="A√±adir categor√≠a personalizada"
                >
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </div>

            <!-- Necessity/Priority with Add Button -->
            <div class="form-group-premium">
              <label class="form-label-premium" for="necessity">
                <i class="fas fa-chart-line" aria-hidden="true"></i>
                Prioridad
              </label>
              <div class="select-with-add">
                <select
                  id="necessity"
                  class="form-input-premium form-select-native"
                  required
                >
                  <option value="">Nivel de necesidad</option>
                  <option value="Muy Indispensable">
                    ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Muy Indispensable
                  </option>
                  <option value="Muy Necesario">‚≠ê‚≠ê‚≠ê‚≠ê Muy Necesario</option>
                  <option value="Necesario">‚≠ê‚≠ê‚≠ê Necesario</option>
                  <option value="Poco Necesario">‚≠ê‚≠ê Poco Necesario</option>
                  <option value="Nada Necesario">‚≠ê Nada Necesario</option>
                  <option value="Malgasto">‚ùå Malgasto</option>
                </select>
                <button
                  type="button"
                  class="btn-add-option"
                  id="addNecessityBtn"
                  title="A√±adir nivel de necesidad personalizado"
                >
                  <i class="fas fa-plus"></i>
                </button>
              </div>
            </div>

            <!-- Grid Layout for Date and User -->
            <div class="form-grid-2">
              <!-- Date -->
              <div class="form-group-premium">
                <label class="form-label-premium" for="date">
                  <i class="fas fa-calendar-alt"></i>
                  Fecha
                </label>
                <input
                  type="date"
                  id="date"
                  class="form-input-premium"
                  required
                />
              </div>

              <!-- Usuario con selecci√≥n personalizada -->
              <div class="form-group-premium">
                <label class="form-label-premium" for="selectedUserField">
                  <i class="fas fa-user"></i>
                  Usuario seleccionado
                </label>
                <div class="user-selection-row">
                  <div
                    id="selectedUserField"
                    class="form-input-premium selected-user-field selected-user-field--empty"
                    role="button"
                    aria-live="polite"
                    aria-label="Seleccionar usuario"
                    tabindex="0"
                  >
                    Sin usuario asignado
                  </div>
                  <button
                    type="button"
                    class="btn-add-option"
                    id="addUserBtn"
                    title="A√±adir usuario personalizado"
                    aria-label="A√±adir usuario personalizado"
                  >
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <select
                  id="user"
                  class="form-input-premium form-select-native user-hidden-select"
                  aria-hidden="true"
                  tabindex="-1"
                >
                  <option value="">Sin asignar</option>
                  <option value="Daniel">üë§ Daniel</option>
                  <option value="Givonik">ü§ñ Givonik</option>
                </select>
              </div>
            </div>

            <!-- Items List (Productos de la factura) -->
            <div class="form-group-premium">
              <label class="form-label-premium" for="items">
                <i class="fas fa-shopping-basket" aria-hidden="true"></i>
                Items de la compra
                <span class="field-optional">(Opcional)</span>
              </label>
              <textarea
                id="items"
                class="form-input-premium form-textarea"
                placeholder="Ejemplo: Az√∫car 1kg, Leche 1L, Aceite 2L"
                rows="3"
              ></textarea>
              <small class="field-hint">
                <i class="fas fa-info-circle"></i>
                Productos individuales de la factura (autom√°tico con escaneo)
              </small>
            </div>

            <!-- Notas adicionales (Info de la factura) -->
            <div class="form-group-premium">
              <label class="form-label-premium" for="notes">
                <i class="fas fa-sticky-note" aria-hidden="true"></i>
                Notas adicionales
                <span class="field-optional">(Opcional)</span>
              </label>
              <textarea
                id="notes"
                class="form-input-premium form-textarea"
                placeholder="Informaci√≥n adicional: lugar, m√©todo de pago, etc."
                rows="2"
              ></textarea>
              <small class="field-hint">
                <i class="fas fa-info-circle"></i>
                Lugar de compra, tarjeta usada, n√∫mero de boleta, etc.
              </small>
            </div>

            <!-- Budget Impact Alert -->
            <div class="budget-impact-alert hidden" id="budgetImpactAlert">
              <i class="fas fa-exclamation-triangle"></i>
              <span id="budgetImpactText"></span>
            </div>

            <!-- Form Actions -->
            <div class="expense-form-actions">
              <button
                type="button"
                class="btn-expense-secondary"
                id="clearExpenseForm"
              >
                <i class="fas fa-eraser"></i>
                Limpiar
              </button>
              <button type="submit" class="btn-expense-primary">
                <i class="fas fa-check-circle"></i>
                Registrar Gasto
              </button>
            </div>

            <!-- Quick Stats Below Form -->
            <div class="expense-form-stats">
              <div class="form-stat-item">
                <span class="stat-value" id="todayExpensesCount">0</span>
                <span class="stat-label">Hoy</span>
              </div>
              <div class="form-stat-item">
                <span class="stat-value" id="todayExpensesTotal">$0</span>
                <span class="stat-label">Total hoy</span>
              </div>
              <div class="form-stat-item">
                <span class="stat-value" id="monthExpensesTotal">$0</span>
                <span class="stat-label">Este mes</span>
              </div>
            </div>
          </form>
        </div>

        <!-- Expense List -->
        <div class="card">
          <div class="card__header">
            <h3>Historial de Gastos</h3>
          </div>
          <div class="card__body">
            <div id="expenseList"></div>
          </div>
        </div>
      </section>

      <!-- Goals Section -->
      <section id="goals" class="section">
        <div class="section-header">
          <h2>üéØ Metas Financieras</h2>
          <p>Define y monitorea tus objetivos de ahorro</p>
        </div>
        <div class="card">
          <div class="card__header">
            <h3>Nueva Meta Financiera</h3>
          </div>
          <div class="card__body">
            <div class="goal-form-container">
              <div class="goal-inspiration-panel" id="goalInspirationPanel">
                <div class="inspiration-image-wrapper">
                  <img
                    id="inspirationImage"
                    src=""
                    alt="Inspiraci√≥n"
                    class="inspiration-image"
                  />
                  <div class="inspiration-overlay">
                    <p class="inspiration-text">‚ú® Visualiza tu meta</p>
                  </div>
                </div>
              </div>

              <form id="goalForm">
                <div class="form-grid">
                  <div class="form-group">
                    <label class="form-label" for="goalName"
                      >Nombre de la Meta</label
                    >
                    <input
                      type="text"
                      id="goalName"
                      class="form-control"
                      placeholder="Ej. Vacaciones en la playa"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="goalTarget"
                      >Cantidad Objetivo ($)</label
                    >
                    <input
                      type="number"
                      id="goalTarget"
                      class="form-control"
                      placeholder="1000"
                      step="0.01"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="goalDeadline"
                      >Fecha L√≠mite</label
                    >
                    <input
                      type="date"
                      id="goalDeadline"
                      class="form-control"
                      required
                    />
                  </div>
                </div>
                <button type="submit" class="btn btn--primary">
                  <i class="fas fa-target"></i> Crear Meta
                </button>
              </form>
            </div>
          </div>
        </div>

        <!-- Goals List -->
        <div id="goalsList"></div>
      </section>

      <!-- Analysis Section -->
      <section id="analysis" class="section">
        <div class="section-header">
          <h2>An√°lisis de Gastos</h2>
          <p>Visualiza patrones y tendencias en tus finanzas</p>
        </div>

        <div class="analysis-grid">
          <div class="card radar-chart-card">
            <div class="card__header">
              <h3>Balance Financiero Multidimensional</h3>
              <p>Tu perfil financiero en diferentes categor√≠as</p>
            </div>
            <div class="card__body">
              <div class="radar-chart-container">
                <canvas id="radarChart"></canvas>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card__header">
              <h3>Gastos por Usuario</h3>
            </div>
            <div class="card__body">
              <div
                class="chart-container"
                style="position: relative; height: 300px"
              >
                <canvas id="userExpenseChart"></canvas>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card__header">
              <h3>Necesidad vs No Necesario</h3>
            </div>
            <div class="card__body">
              <div
                class="chart-container"
                style="position: relative; height: 300px"
              >
                <canvas id="necessityChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card__header">
            <h3>Gastos Innecesarios del Mes</h3>
          </div>
          <div class="card__body">
            <div id="unnecessaryExpenses"></div>
          </div>
        </div>
      </section>

      <!-- History Section -->
      <section id="history" class="section">
        <div class="section-header">
          <h2>üìú Historial de Transacciones</h2>
          <p>Registro completo de todos tus movimientos financieros</p>
        </div>

        <!-- Filtros y Buscador -->
        <div class="card">
          <div class="card__header">
            <h3><i class="fas fa-filter"></i> Filtros y B√∫squeda</h3>
            <button class="btn btn-sm btn-outline" id="toggleHistoryFilters">
              <i class="fas fa-chevron-down"></i> Mostrar Filtros
            </button>
          </div>
          <div class="card__body">
            <div
              class="history-filters"
              id="historyFiltersContainer"
              style="display: none"
            >
              <!-- Buscador -->
              <div class="form-group">
                <label class="form-label" for="historySearch">
                  <i class="fas fa-search"></i> Buscar
                </label>
                <input
                  type="text"
                  id="historySearch"
                  class="form-control"
                  placeholder="Buscar por descripci√≥n..."
                />
              </div>

              <!-- Filtro por Tipo -->
              <div class="form-group">
                <label class="form-label" for="historyFilterType">
                  <i class="fas fa-tag"></i> Tipo
                </label>
                <select id="historyFilterType" class="form-control">
                  <option value="todos">Todos</option>
                  <option value="gasto">üí∏ Gastos</option>
                  <option value="sueldo">üí∞ Sueldos</option>
                  <option value="entrada_extra">‚ú® Entradas Extra</option>
                  <option value="abono_meta">üéØ Abonos a Metas</option>
                  <option value="retiro_meta">‚Ü©Ô∏è Retiros de Metas</option>
                </select>
              </div>

              <!-- Filtro por Categor√≠a (solo gastos) -->
              <div class="form-group">
                <label class="form-label" for="historyFilterCategory">
                  <i class="fas fa-list"></i> Categor√≠a
                </label>
                <select id="historyFilterCategory" class="form-control">
                  <option value="todas">Todas</option>
                  <option value="Alimentaci√≥n">Alimentaci√≥n</option>
                  <option value="Transporte">Transporte</option>
                  <option value="Entretenimiento">Entretenimiento</option>
                  <option value="Salud">Salud</option>
                  <option value="Servicios">Servicios</option>
                  <option value="Compras">Compras</option>
                  <option value="Otros">Otros</option>
                </select>
              </div>

              <!-- Ordenar -->
              <div class="form-group">
                <label class="form-label">
                  <i class="fas fa-sort"></i> Ordenar por
                </label>
                <select id="historySort" class="form-control">
                  <option value="date-desc">Fecha (m√°s reciente)</option>
                  <option value="date-asc">Fecha (m√°s antiguo)</option>
                  <option value="amount-desc">Monto (mayor a menor)</option>
                  <option value="amount-asc">Monto (menor a mayor)</option>
                  <option value="type">Tipo</option>
                </select>
              </div>

              <!-- Rango de fechas -->
              <div class="form-group">
                <label class="form-label" for="historyDateFrom">
                  <i class="fas fa-calendar"></i> Desde
                </label>
                <input type="date" id="historyDateFrom" class="form-control" />
              </div>

              <div class="form-group">
                <label class="form-label" for="historyDateTo">
                  <i class="fas fa-calendar"></i> Hasta
                </label>
                <input type="date" id="historyDateTo" class="form-control" />
              </div>

              <!-- Botones de acci√≥n -->
              <div class="form-group" style="display: flex; gap: 10px">
                <button class="btn btn-primary" id="btnApplyHistoryFilters">
                  <i class="fas fa-check"></i> Aplicar
                </button>
                <button class="btn btn-secondary" id="btnClearHistoryFilters">
                  <i class="fas fa-times"></i> Limpiar
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Estad√≠sticas R√°pidas -->
        <div class="stats-grid" style="margin-top: 20px">
          <div class="stat-card">
            <div class="stat-icon-wrapper">
              <i class="fas fa-list stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Total Transacciones</h3>
              <p class="stat-value" id="historyTotalCount">0</p>
            </div>
          </div>

          <div class="stat-card">
            <div
              class="stat-icon-wrapper"
              style="background: var(--color-success)"
            >
              <i class="fas fa-arrow-up stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Total Ingresos</h3>
              <p class="stat-value" id="historyTotalIncome">$0</p>
            </div>
          </div>

          <div class="stat-card">
            <div
              class="stat-icon-wrapper"
              style="background: var(--color-danger)"
            >
              <i class="fas fa-arrow-down stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Total Gastos</h3>
              <p class="stat-value" id="historyTotalExpenses">$0</p>
            </div>
          </div>
        </div>

        <!-- Lista de Transacciones -->
        <div class="card" style="margin-top: 20px">
          <div class="card__header">
            <h3><i class="fas fa-history"></i> Transacciones</h3>
            <span id="historyResultCount" class="badge">0 resultados</span>
          </div>
          <div class="card__body">
            <div id="historyList"></div>
          </div>
        </div>
      </section>

      <!-- Shopping List Section -->
      <section id="shopping" class="section">
        <div class="section-header">
          <h2>üõí Lista de Compras</h2>
          <p>Organiza tus compras y controla gastos de mercader√≠a</p>
        </div>
        <div class="card">
          <div class="card__header">
            <h3>Agregar Producto</h3>
          </div>
          <div class="card__body">
            <form id="shoppingForm">
              <div class="form-grid">
                <div class="form-group">
                  <label class="form-label" for="product">Producto</label>
                  <input
                    type="text"
                    id="product"
                    class="form-control"
                    placeholder="Ej. Leche, Pan"
                    required
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="quantity">Cantidad</label>
                  <input
                    type="number"
                    id="quantity"
                    class="form-control"
                    placeholder="1"
                    min="1"
                    required
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="necessary"
                    >¬øEs necesario?</label
                  >
                  <select id="necessary" class="form-control" required>
                    <option value="">Selecciona</option>
                    <option value="true">S√≠</option>
                    <option value="false">No</option>
                  </select>
                </div>
              </div>
              <button type="submit" class="btn btn--primary">
                <i class="fas fa-plus"></i> Agregar Producto
              </button>
            </form>
          </div>
        </div>

        <!-- Shopping List -->
        <div class="card">
          <div class="card__header">
            <h3>Lista Actual</h3>
            <button class="btn btn--secondary btn--sm" id="generateList">
              <i class="fas fa-download"></i> Generar Lista
            </button>
          </div>
          <div class="card__body">
            <div id="shoppingList"></div>
          </div>
        </div>
      </section>

      <!-- Budget Section -->
      <section id="budget" class="section">
        <div class="section-header">
          <h2>üéâ Presupuesto de Ocio</h2>
          <p>
            Planifica tus gastos extras: entretenimiento, salidas, caprichos y
            diversi√≥n
          </p>
        </div>

        <!-- Leisure Budget Summary Card -->
        <div class="card budget-summary-card">
          <div class="card__header">
            <h3>Resumen de Ocio del Mes</h3>
            <div class="budget-month-selector">
              <button class="btn btn--icon" id="prevMonthBtn">
                <i class="fas fa-chevron-left"></i>
              </button>
              <span id="currentBudgetMonth" class="budget-month-label"></span>
              <button class="btn btn--icon" id="nextMonthBtn">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
          <div class="card__body">
            <div class="budget-summary-stats">
              <div class="budget-stat">
                <div class="budget-stat-icon budget-stat-icon--primary">
                  <i class="fas fa-gift"></i>
                </div>
                <div class="budget-stat-content">
                  <span class="budget-stat-label">Presupuesto de Ocio</span>
                  <span class="budget-stat-value" id="totalBudgetLimit"
                    >$0</span
                  >
                </div>
              </div>
              <div class="budget-stat">
                <div class="budget-stat-icon budget-stat-icon--warning">
                  <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="budget-stat-content">
                  <span class="budget-stat-label">Gastado en Ocio</span>
                  <span class="budget-stat-value" id="totalBudgetSpent"
                    >$0</span
                  >
                </div>
              </div>
              <div class="budget-stat">
                <div class="budget-stat-icon budget-stat-icon--success">
                  <i class="fas fa-piggy-bank"></i>
                </div>
                <div class="budget-stat-content">
                  <span class="budget-stat-label">Disponible para Gustos</span>
                  <span class="budget-stat-value" id="totalBudgetAvailable"
                    >$0</span
                  >
                </div>
              </div>
            </div>
            <div class="budget-overall-progress">
              <div class="progress-header">
                <span>Progreso de Ocio</span>
                <span id="overallBudgetPercentage">0%</span>
              </div>
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  id="overallBudgetProgress"
                  style="width: 0%"
                ></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Leisure Budget Setup Card -->
        <div class="card">
          <div class="card__header">
            <h3>üéä Configurar Gastos de Ocio</h3>
            <button class="btn btn--secondary btn--sm" id="resetBudgetBtn">
              <i class="fas fa-redo"></i> Restablecer
            </button>
          </div>
          <div class="card__body">
            <form id="budgetSetupForm">
              <!-- Lista de gastos de ocio -->
              <div id="leisureItemsList" class="leisure-items-list">
                <!-- Se llenar√° din√°micamente con items de ocio -->
              </div>

              <!-- Formulario para agregar nuevo gasto de ocio -->
              <div class="leisure-item-form">
                <div class="form-row">
                  <div class="form-group" style="flex: 2">
                    <label for="leisureItemDescription">¬øPara qu√©?</label>
                    <input
                      type="text"
                      class="form-control"
                      id="leisureItemDescription"
                      placeholder="Ej: Cine, Cumplea√±os, Salida a comer..."
                      maxlength="50"
                    />
                  </div>
                  <div class="form-group" style="flex: 1">
                    <label for="leisureItemAmount">Monto (solo n√∫meros)</label>
                    <input
                      type="text"
                      class="form-control"
                      id="leisureItemAmount"
                      placeholder="Ej: 30000"
                      inputmode="numeric"
                      pattern="[0-9]*"
                    />
                  </div>
                  <div class="form-group" style="flex: 0 0 auto">
                    <label style="visibility: hidden">.</label>
                    <button
                      type="button"
                      class="btn btn--success"
                      id="addLeisureItemBtn"
                    >
                      <i class="fas fa-plus"></i> Agregar
                    </button>
                  </div>
                </div>
              </div>

              <button
                type="submit"
                class="btn btn--primary btn--block"
                style="margin-top: 20px"
              >
                <i class="fas fa-save"></i> Guardar Presupuesto de Ocio
              </button>
            </form>
          </div>
        </div>

        <!-- Leisure Items Progress -->
        <div class="card">
          <div class="card__header">
            <h3>Estado de Gastos de Ocio</h3>
          </div>
          <div class="card__body">
            <div id="budgetCategoriesProgress">
              <!-- Se llenar√° din√°micamente con el progreso de cada item -->
            </div>
          </div>
        </div>
      </section>

      <!-- Achievements Section -->
      <section id="achievements" class="section">
        <div class="section-header">
          <h2>üèÜ Logros y Insignias</h2>
          <p>Desbloquea insignias mientras dominas tus finanzas</p>
        </div>

        <div class="achievements-stats">
          <div class="achievement-stat-card">
            <div class="stat-icon">
              <i class="fas fa-medal"></i>
            </div>
            <div class="stat-content">
              <span class="stat-number" id="unlockedCount">0</span>
              <span class="stat-label">Logros Desbloqueados</span>
            </div>
          </div>
          <div class="achievement-stat-card">
            <div class="stat-icon">
              <i class="fas fa-percentage"></i>
            </div>
            <div class="stat-content">
              <span class="stat-number" id="progressPercentage">0%</span>
              <span class="stat-label">Progreso Total</span>
            </div>
          </div>
        </div>

        <div class="achievements-grid" id="achievementsGrid">
          <!-- Las tarjetas de logros se generar√°n din√°micamente aqu√≠ -->
        </div>
      </section>

      <!-- Store Section -->
      <section id="store" class="section">
        <div class="section-header">
          <h2>Tienda de Estilos</h2>
          <p>Personaliza la apariencia de tus gr√°ficos y avatar</p>
        </div>

        <div class="store-container">
          <div class="store-header">
            <div class="coins-display">
              <i class="fas fa-coins"></i>
              <span id="userCoins">0</span> monedas
            </div>
          </div>

          <!-- Avatar Gallery Section -->
          <div class="store-section">
            <div class="store-section-header">
              <h2><i class="fas fa-user-circle"></i> Galer√≠a de Avatares</h2>
              <p>Elige tu avatar personalizado</p>
            </div>
            <div class="avatar-gallery" id="avatarGallery">
              <div class="avatar-option" data-avatar="avatar-1">
                <div class="avatar-icon gradient-blue">
                  <i class="fas fa-user-astronaut"></i>
                </div>
                <span class="avatar-name">Astronauta</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-2">
                <div class="avatar-icon gradient-purple">
                  <i class="fas fa-user-ninja"></i>
                </div>
                <span class="avatar-name">Ninja</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-3">
                <div class="avatar-icon gradient-green">
                  <i class="fas fa-user-tie"></i>
                </div>
                <span class="avatar-name">Ejecutivo</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-4">
                <div class="avatar-icon gradient-orange">
                  <i class="fas fa-user-graduate"></i>
                </div>
                <span class="avatar-name">Graduado</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-5">
                <div class="avatar-icon gradient-red">
                  <i class="fas fa-user-secret"></i>
                </div>
                <span class="avatar-name">Agente</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-6">
                <div class="avatar-icon gradient-teal">
                  <i class="fas fa-user-md"></i>
                </div>
                <span class="avatar-name">Doctor</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-7">
                <div class="avatar-icon gradient-pink">
                  <i class="fas fa-user-crown"></i>
                </div>
                <span class="avatar-name">Realeza</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-8">
                <div class="avatar-icon gradient-indigo">
                  <i class="fas fa-brain"></i>
                </div>
                <span class="avatar-name">Inteligente</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-9">
                <div class="avatar-icon gradient-yellow">
                  <i class="fas fa-user-shield"></i>
                </div>
                <span class="avatar-name">Guardi√°n</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-10">
                <div class="avatar-icon gradient-cyan">
                  <i class="fas fa-user-check"></i>
                </div>
                <span class="avatar-name">Pro</span>
              </div>
            </div>
          </div>

          <!-- Chart Styles Section -->
          <div class="store-section">
            <div class="store-section-header">
              <h2><i class="fas fa-palette"></i> Estilos de Gr√°ficos</h2>
              <p>Cambia los colores de tus gr√°ficos</p>
            </div>
            <div class="store-grid" id="storeGrid">
              <!-- Las tarjetas de productos se generar√°n din√°micamente aqu√≠ -->
            </div>
          </div>
        </div>
      </section>

      <!-- ========================================
           COMENTADO: Audit History Section (Historial de Auditor√≠a antiguo)
           Este historial registra modificaciones/ediciones espec√≠ficas a nivel t√©cnico.
           Se mantiene comentado para posible uso futuro como:
           - Historial de cambios administrativos
           - Log de ediciones por usuario
           - Auditor√≠a de modificaciones cr√≠ticas
           ======================================== -->
      <!-- <section id="audit" class="section">
        <div class="section-header">
          <h2>Historial</h2>
          <p>Registro completo de todas las modificaciones realizadas</p>
        </div>

        <div class="audit-container">
          <div class="audit-filters">
            <div class="filter-group">
              <label for="auditTypeFilter">Tipo de cambio</label>
              <div class="input-group">
                <i class="fas fa-filter"></i>
                <select id="auditTypeFilter" class="form-select">
                  <option value="all">üìã Todos los cambios</option>
                  <option value="expense_added">‚ûï Gasto a√±adido</option>
                  <option value="expense_edited">‚úèÔ∏è Gasto editado</option>
                  <option value="expense_deleted">üóëÔ∏è Gasto eliminado</option>
                  <option value="goal_added">üéØ Meta a√±adida</option>
                  <option value="goal_edited">‚úèÔ∏è Meta editada</option>
                  <option value="goal_deleted">üóëÔ∏è Meta eliminada</option>
                  <option value="payment_added">üí≥ Pago a√±adido</option>
                  <option value="payment_deleted">üóëÔ∏è Pago eliminado</option>
                  <option value="shopping_added">üõí Compra a√±adida</option>
                  <option value="shopping_deleted">üóëÔ∏è Compra eliminada</option>
                </select>
              </div>
            </div>
            <div class="filter-group">
              <label for="auditDaysFilter">√öltimos d√≠as</label>
              <div class="input-group">
                <i class="fas fa-calendar-alt"></i>
                <select id="auditDaysFilter" class="form-select">
                  <option value="all">üóìÔ∏è Todos los registros</option>
                  <option value="1">Hoy</option>
                  <option value="3">√öltimos 3 d√≠as</option>
                  <option value="7" selected>√öltimos 7 d√≠as</option>
                  <option value="14">√öltimos 14 d√≠as</option>
                  <option value="30">√öltimos 30 d√≠as</option>
                  <option value="60">√öltimos 2 meses</option>
                  <option value="90">√öltimos 3 meses</option>
                </select>
              </div>
            </div>
            <button class="btn btn--secondary" id="clearAuditFilters">
              <i class="fas fa-times"></i> Limpiar filtros
            </button>
          </div>

          <div class="audit-list" id="auditList">
            <div class="audit-empty">
              <i class="fas fa-history"></i>
              <p>No hay cambios registrados</p>
            </div>
          </div>
        </div>
      </section> -->

      <!-- Configuration Section -->
      <section id="config" class="section">
        <div class="section-header">
          <h2>‚öôÔ∏è Configuraci√≥n</h2>
          <p>Personaliza tu experiencia y ajusta tus preferencias</p>
        </div>

        <!-- Configuraci√≥n Simplificada -->
        <div class="settings-simple-container">
          <!-- 1. Tema / Modo Claro-Oscuro -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-palette"></i> Tema de la aplicaci√≥n</h3>
              <p>Cambia entre modo claro, oscuro o autom√°tico</p>
            </div>
            <div class="settings-card-body">
              <div class="theme-options">
                <button class="theme-option active" data-theme="light">
                  <div class="theme-preview theme-light">
                    <div class="theme-circle"></div>
                    <div class="theme-circle"></div>
                    <div class="theme-circle"></div>
                  </div>
                  <span>Claro</span>
                </button>
                <button class="theme-option" data-theme="dark">
                  <div class="theme-preview theme-dark">
                    <div class="theme-circle"></div>
                    <div class="theme-circle"></div>
                    <div class="theme-circle"></div>
                  </div>
                  <span>Oscuro</span>
                </button>
                <button class="theme-option" data-theme="auto">
                  <div class="theme-preview theme-auto">
                    <div class="theme-circle"></div>
                    <div class="theme-circle"></div>
                    <div class="theme-circle"></div>
                  </div>
                  <span>Autom√°tico</span>
                </button>
              </div>
            </div>
          </div>

          <!-- 2. Cambiar Foto de Perfil -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-user-circle"></i> Foto de perfil</h3>
              <p>Personaliza tu imagen de usuario</p>
            </div>
            <div class="settings-card-body">
              <div class="profile-avatar-section">
                <div class="current-avatar" id="currentProfileAvatar">
                  <div class="avatar-preview">
                    <i class="fas fa-user"></i>
                  </div>
                  <button class="avatar-edit-badge" id="changeAvatarBtn">
                    <i class="fas fa-camera"></i>
                  </button>
                </div>
                <div class="profile-info">
                  <h4 id="profileUserName">Usuario</h4>
                  <p class="profile-email">usuario@financiapro.com</p>
                  <span class="profile-badge">
                    <i class="fas fa-crown"></i> Usuario activo
                  </span>
                </div>
              </div>
              <div style="margin-top: var(--space-16)">
                <button
                  class="btn-premium btn-premium-primary"
                  id="uploadAvatarBtn"
                >
                  <i class="fas fa-upload"></i> Subir nueva foto
                </button>
                <button
                  class="btn-premium btn-premium-outline"
                  id="removeAvatarBtn"
                  style="margin-left: var(--space-8)"
                >
                  <i class="fas fa-trash"></i> Eliminar foto
                </button>
              </div>
            </div>
          </div>

          <!-- 3. Cambiar Portada -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-image"></i> Imagen de portada</h3>
              <p>Cambia la imagen de fondo de tu perfil</p>
            </div>
            <div class="settings-card-body">
              <div
                class="cover-image-preview"
                id="coverImagePreview"
                style="
                  width: 100%;
                  height: 150px;
                  background: linear-gradient(
                    135deg,
                    var(--color-primary),
                    var(--color-secondary)
                  );
                  border-radius: 12px;
                  margin-bottom: var(--space-16);
                  position: relative;
                  overflow: hidden;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                "
              >
                <div
                  style="
                    text-align: center;
                    color: white;
                    font-size: 14px;
                    opacity: 0.9;
                  "
                >
                  <i
                    class="fas fa-image"
                    style="font-size: 32px; margin-bottom: 8px"
                  ></i>
                  <p>Vista previa de la portada</p>
                </div>
              </div>
              <button
                class="btn-premium btn-premium-primary"
                id="changeCoverBtn"
              >
                <i class="fas fa-upload"></i> Cambiar portada
              </button>
              <button
                class="btn-premium btn-premium-outline"
                id="removeCoverBtn"
                style="margin-left: var(--space-8)"
              >
                <i class="fas fa-trash"></i> Eliminar portada
              </button>
            </div>
          </div>

          <!-- 4. Cambiar Nombre de Usuario -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-signature"></i> Nombre de usuario</h3>
              <p>Actualiza c√≥mo te llamas en la aplicaci√≥n</p>
            </div>
            <div class="settings-card-body">
              <div class="form-group-premium">
                <label class="form-label-premium" for="profileNameInput"
                  >Nombre completo</label
                >
                <input
                  type="text"
                  class="form-input-premium"
                  id="profileNameInput"
                  placeholder="Ingresa tu nombre"
                />
                <span class="form-hint"
                  >Este nombre aparecer√° en tus reportes y res√∫menes</span
                >
              </div>
              <div class="form-actions-premium">
                <button
                  class="btn-premium btn-premium-primary"
                  id="saveProfileBtn"
                >
                  <i class="fas fa-check"></i> Guardar nombre
                </button>
              </div>
            </div>
          </div>

          <!-- 5. Cambiar Contrase√±a -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-key"></i> Seguridad</h3>
              <p>Gestiona tu contrase√±a y configuraci√≥n de acceso</p>
            </div>
            <div class="settings-card-body">
              <div class="settings-list">
                <div class="settings-list-item">
                  <div class="settings-list-icon">
                    <i class="fas fa-lock"></i>
                  </div>
                  <div class="settings-list-content">
                    <span class="settings-list-title">Contrase√±a</span>
                    <span class="settings-list-subtitle">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
                  </div>
                  <button
                    class="btn-premium btn-premium-sm"
                    id="configChangePasswordBtn"
                  >
                    Cambiar
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- 6. Tour Guiado -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-route"></i> Tour Guiado</h3>
              <p>Conoce todas las funcionalidades de Financia Suite</p>
            </div>
            <div class="settings-card-body">
              <div class="settings-list">
                <div class="settings-list-item">
                  <div class="settings-list-icon">
                    <i class="fas fa-graduation-cap"></i>
                  </div>
                  <div class="settings-list-content">
                    <span class="settings-list-title"
                      >Iniciar tour interactivo</span
                    >
                    <span class="settings-list-subtitle"
                      >Aprende a usar la aplicaci√≥n en 2 minutos</span
                    >
                  </div>
                  <button
                    class="btn-premium btn-premium-sm"
                    id="restartTourBtn"
                  >
                    <i class="fas fa-play"></i> Iniciar
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- 7. Fin - Coach Financiero -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-robot"></i> Fin - Coach Financiero</h3>
              <p>Configura tu asistente financiero inteligente</p>
            </div>
            <div class="settings-card-body">
              <div class="settings-list">
                <div class="settings-list-item">
                  <div class="settings-list-icon">
                    <img
                      src="img/FIN.png"
                      alt="Fin"
                      style="width: 36px; height: 36px; border-radius: 50%"
                    />
                  </div>
                  <div class="settings-list-content">
                    <span class="settings-list-title"
                      >Mostrar bot√≥n de Fin</span
                    >
                    <span class="settings-list-subtitle"
                      >Activa o desactiva el bot√≥n flotante del coach</span
                    >
                  </div>
                  <label class="toggle-switch">
                    <input type="checkbox" id="finWidgetToggle" checked />
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="settings-list-item">
                  <div class="settings-list-icon">
                    <i class="fas fa-comments"></i>
                  </div>
                  <div class="settings-list-content">
                    <span class="settings-list-title">Abrir chat de Fin</span>
                    <span class="settings-list-subtitle"
                      >Conversa con tu coach financiero personal</span
                    >
                  </div>
                  <button
                    class="btn-premium btn-premium-sm"
                    onclick="window.openFinChat()"
                  >
                    <i class="fas fa-comment-dots"></i> Abrir chat
                  </button>
                </div>
                <div class="settings-list-item">
                  <div class="settings-list-icon">
                    <i class="fas fa-redo"></i>
                  </div>
                  <div class="settings-list-content">
                    <span class="settings-list-title"
                      >Reiniciar bienvenida</span
                    >
                    <span class="settings-list-subtitle"
                      >Volver a ver el mensaje de bienvenida de Fin</span
                    >
                  </div>
                  <button
                    class="btn-premium btn-premium-outline"
                    onclick="window.resetFinWelcome()"
                  >
                    <i class="fas fa-undo"></i> Reiniciar
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- 8. Notificar un Problema -->
          <div class="settings-card">
            <div class="settings-card-header">
              <h3><i class="fas fa-bug"></i> Soporte y ayuda</h3>
              <p>Reporta problemas o solicita asistencia</p>
            </div>
            <div class="settings-card-body">
              <div class="settings-list">
                <div class="settings-list-item">
                  <div class="settings-list-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                  </div>
                  <div class="settings-list-content">
                    <span class="settings-list-title"
                      >Reportar un problema</span
                    >
                    <span class="settings-list-subtitle"
                      >Env√≠a un reporte sobre errores o sugerencias</span
                    >
                  </div>
                  <button
                    class="btn-premium btn-premium-outline"
                    id="reportProblemBtn"
                  >
                    <i class="fas fa-paper-plane"></i> Notificar
                  </button>
                </div>
              </div>
              <p class="form-hint" style="margin-top: var(--space-16)">
                <i class="fas fa-info-circle"></i> Esta funci√≥n estar√°
                disponible pr√≥ximamente. Mientras tanto, contacta al soporte
                directamente.
              </p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Toast Notifications -->
    <div id="toast" class="toast hidden">
      <div class="toast-content">
        <i class="toast-icon"></i>
        <span class="toast-message"></span>
      </div>
    </div>

    <!-- Modal A√±adir Ahorro -->
    <div class="modal" id="addSavingsModal">
      <div class="modal__content modal--md">
        <div class="modal__header">
          <h3><i class="fas fa-piggy-bank"></i> A√±adir fuente de ahorro</h3>
          <button class="modal__close" id="closeSavingsModal">&times;</button>
        </div>
        <div class="modal__body">
          <form id="savingsAccountForm" class="form-single-column">
            <div class="form-group">
              <label for="savingsSourceName" class="form-label-premium"
                >Fuente de ahorro</label
              >
              <input
                type="text"
                id="savingsSourceName"
                class="form-input-premium"
                placeholder="Ej: AFP, Banco Santander, Efectivo"
                required
              />
            </div>
            <div class="form-group">
              <label for="savingsAmount" class="form-label-premium"
                >Monto actual</label
              >
              <input
                type="number"
                id="savingsAmount"
                class="form-input-premium"
                placeholder="0.00"
                step="0.01"
                min="0"
                required
              />
            </div>
            <div class="form-group">
              <label for="savingsType" class="form-label-premium"
                >Tipo de ahorro</label
              >
              <select
                id="savingsType"
                class="form-input-premium form-select-premium"
                required
              >
                <option value="">Selecciona un tipo</option>
                <option value="retirement">Jubilaci√≥n (AFP/Pensi√≥n)</option>
                <option value="emergency">Fondo de emergencia</option>
                <option value="investment">Inversiones</option>
                <option value="savings_account">Cuenta de ahorros</option>
                <option value="cash">Efectivo</option>
                <option value="goal">Meta espec√≠fica</option>
                <option value="other">Otro</option>
              </select>
            </div>
            <div class="form-group">
              <label for="savingsDescription" class="form-label-premium"
                >Descripci√≥n (opcional)</label
              >
              <input
                type="text"
                id="savingsDescription"
                class="form-input-premium"
                placeholder="Para qu√© es este ahorro..."
              />
            </div>
            <div class="form-actions-premium">
              <button
                type="button"
                class="btn-premium btn-premium-secondary"
                id="cancelSavingsBtn"
              >
                Cancelar
              </button>
              <button type="submit" class="btn-premium btn-premium-primary">
                <i class="fas fa-check"></i> Guardar ahorro
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal A√±adir Pago Recurrente -->
    <div class="modal" id="addPaymentModal">
      <div class="modal__content modal--md">
        <div class="modal__header">
          <h3>
            <i class="fas fa-file-invoice-dollar"></i> A√±adir pago recurrente
          </h3>
          <button class="modal__close" id="closePaymentModal">&times;</button>
        </div>
        <div class="modal__body">
          <form id="recurringPaymentForm" class="form-single-column">
            <div class="form-group">
              <label for="paymentServiceName" class="form-label-premium"
                >Nombre del servicio</label
              >
              <input
                type="text"
                id="paymentServiceName"
                class="form-input-premium"
                placeholder="Ej: Luz del hogar"
                required
              />
            </div>
            <div class="form-group">
              <label for="paymentServiceType" class="form-label-premium"
                >Tipo de servicio</label
              >
              <select
                id="paymentServiceType"
                class="form-input-premium form-select-premium"
                required
              >
                <option value="">Selecciona un tipo</option>
                <option value="electricity">Luz</option>
                <option value="water">Agua</option>
                <option value="phone">Tel√©fono</option>
                <option value="internet">Internet/WiFi</option>
                <option value="tv">TV/Cable</option>
                <option value="rent">Alquiler</option>
                <option value="gas">Gas</option>
                <option value="insurance">Seguro</option>
                <option value="subscription">Suscripci√≥n</option>
                <option value="other">Otros Servicios</option>
              </select>
            </div>
            <div class="form-group">
              <label for="paymentAmount" class="form-label-premium"
                >Monto (opcional si var√≠a)</label
              >
              <input
                type="number"
                id="paymentAmount"
                class="form-input-premium"
                placeholder="0.00"
                step="0.01"
                min="0"
              />
            </div>
            <div class="form-group">
              <label for="paymentDueDay" class="form-label-premium"
                >D√≠a de vencimiento</label
              >
              <input
                type="number"
                id="paymentDueDay"
                class="form-input-premium"
                placeholder="1-31"
                min="1"
                max="31"
                required
              />
            </div>
            <div class="form-group">
              <label for="paymentNotes" class="form-label-premium"
                >Notas (opcional)</label
              >
              <input
                type="text"
                id="paymentNotes"
                class="form-input-premium"
                placeholder="Detalles adicionales..."
              />
            </div>
            <div class="form-actions-premium">
              <button
                type="button"
                class="btn-premium btn-premium-secondary"
                id="cancelPaymentBtn"
              >
                Cancelar
              </button>
              <button type="submit" class="btn-premium btn-premium-primary">
                <i class="fas fa-check"></i> Guardar pago
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Estad√≠sticas del Gr√°fico -->
    <div class="modal" id="chartStatsModal">
      <div class="modal__content modal--lg">
        <div class="modal__header">
          <h3><i class="fas fa-chart-line"></i> Estad√≠sticas Detalladas</h3>
          <button class="modal__close" id="closeChartStatsModal">
            &times;
          </button>
        </div>
        <div
          class="modal__body"
          id="chartStatsModalBody"
          style="max-height: 70vh; overflow-y: auto"
        >
          <!-- El contenido se generar√° din√°micamente -->
        </div>
      </div>
    </div>

    <!-- Modal Historial de Balance -->
    <div class="modal modal--xl" id="balanceHistoryModal">
      <div class="modal__content">
        <div class="modal__header">
          <h3><i class="fas fa-chart-area"></i> Historial de Balance</h3>
          <button class="modal__close" onclick="closeBalanceHistoryModal()">
            &times;
          </button>
        </div>
        <div class="modal__body" style="padding: 2rem">
          <!-- Resumen Superior -->
          <div class="balance-summary-cards">
            <div class="balance-summary-card">
              <div class="summary-icon">üí∞</div>
              <div class="summary-info">
                <span class="summary-label">Balance Inicial</span>
                <span class="summary-value" id="balanceInitial">$0</span>
              </div>
            </div>
            <div class="balance-summary-card">
              <div class="summary-icon">üìâ</div>
              <div class="summary-info">
                <span class="summary-label">Total Gastado</span>
                <span class="summary-value decline" id="balanceTotalSpent"
                  >$0</span
                >
              </div>
            </div>
            <div class="balance-summary-card">
              <div class="summary-icon">üíµ</div>
              <div class="summary-info">
                <span class="summary-label">Balance Actual</span>
                <span class="summary-value" id="balanceCurrent">$0</span>
              </div>
            </div>
            <div class="balance-summary-card">
              <div class="summary-icon">üìä</div>
              <div class="summary-info">
                <span class="summary-label">D√≠as Registrados</span>
                <span class="summary-value" id="balanceDaysCount">0</span>
              </div>
            </div>
          </div>

          <!-- Gr√°fico de Balance en el Tiempo -->
          <div class="balance-chart-container">
            <canvas id="balanceHistoryChart"></canvas>
          </div>

          <!-- Tooltip personalizado para mostrar detalles de gastos -->
          <div
            id="balanceTooltip"
            class="balance-tooltip"
            style="display: none"
          >
            <div class="tooltip-date"></div>
            <div class="tooltip-balance"></div>
            <div class="tooltip-expenses"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Seguridad -->
    <!-- Modal Seguridad -->
    <div class="modal" id="securityModal">
      <div class="modal-dialog">
        <div class="modal-illustration">
          <img
            data-src="img/ahorro.png"
            alt="Ilustraci√≥n ahorro"
            class="lazy-load"
          />
        </div>
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title" id="securityModalTitle">
              Confirmar eliminacion
            </h2>
            <button
              class="modal-close"
              type="button"
              aria-label="Cerrar"
              id="closeSecurityModalBtn"
            >
              &times;
            </button>
          </div>

          <!-- Formulario de cambio de contrase√±a personal -->
          <form id="securityForm">
            <div class="modal-body">
              <div class="input-group">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="currentPassword"
                  placeholder="Contrase√±a actual"
                  autocomplete="current-password"
                  aria-label="Contrase√±a actual"
                />
                <i
                  class="fas fa-eye toggle-pass"
                  data-target="currentPassword"
                ></i>
              </div>

              <div
                id="newPasswordSection"
                style="display: none; margin-top: 16px"
              >
                <div class="input-group">
                  <i class="fas fa-lock"></i>
                  <input
                    type="password"
                    id="newPassword"
                    placeholder="Nueva contrase√±a"
                    autocomplete="new-password"
                    aria-label="Nueva contrase√±a"
                  />
                  <i
                    class="fas fa-eye toggle-pass"
                    data-target="newPassword"
                  ></i>
                </div>

                <div class="input-group">
                  <i class="fas fa-lock"></i>
                  <input
                    type="password"
                    id="confirmPassword"
                    placeholder="Confirmar nueva contrase√±a"
                    autocomplete="new-password"
                  />
                  <i
                    class="fas fa-eye toggle-pass"
                    data-target="confirmPassword"
                  ></i>
                </div>
              </div>
            </div>

            <div class="modal-footer">
              <button class="btn-cancel" type="button" id="cancelSecurityBtn">
                Cancelar
              </button>
              <button
                class="btn-primary"
                id="modalSavePasswordsBtn"
                type="submit"
              >
                Guardar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Librer√≠as externas -->
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.2.0/crypto-js.js"></script>

    <script>
      // Opcional: setup para toggle pass visual del modal
      document.addEventListener('click', function (e) {
        if (e.target.classList.contains('toggle-pass')) {
          const input = document.getElementById(
            e.target.getAttribute('data-target')
          );
          if (input) {
            if (input.type === 'password') {
              input.type = 'text';
              e.target.classList.remove('fa-eye');
              e.target.classList.add('fa-eye-slash');
            } else {
              input.type = 'password';
              e.target.classList.remove('fa-eye-slash');
              e.target.classList.add('fa-eye');
            }
          }
        }
      });
    </script>

    <!-- Account Type Selection Modal -->
    <div class="modal" id="accountTypeModal">
      <div class="modal-dialog account-type-dialog-premium">
        <div class="modal-content account-type-modal-premium">
          <button
            class="modal-close-premium"
            type="button"
            aria-label="Cerrar"
            data-close-modal="accountTypeModal"
          >
            <i class="fas fa-times"></i>
          </button>

          <div class="modal-header-premium">
            <h2 class="modal-title-premium">Elige tu tipo de cuenta</h2>
            <p class="modal-subtitle-premium">
              Selecciona la opci√≥n que mejor se adapte a tus necesidades
            </p>
          </div>

          <div class="account-cards-container">
            <div
              class="account-card personal-card"
              onclick="selectAccountType('personal')"
              data-type="personal"
            >
              <div class="account-card-glow"></div>
              <div class="account-card-content">
                <div class="account-card-icon personal-icon">
                  <i class="fas fa-user"></i>
                </div>
                <h3 class="account-card-title">Personal</h3>
                <p class="account-card-description">
                  Para tus finanzas individuales
                </p>
              </div>
              <div class="account-card-footer">
                <div class="account-card-arrow">
                  <i class="fas fa-arrow-right"></i>
                </div>
              </div>
            </div>

            <div
              class="account-card shared-card"
              onclick="selectAccountType('shared')"
              data-type="shared"
            >
              <div class="account-card-glow"></div>
              <div class="account-card-content">
                <div class="account-card-icon shared-icon">
                  <i class="fas fa-users"></i>
                </div>
                <h3 class="account-card-title">Mancomunada</h3>
                <p class="account-card-description">
                  Para compartir finanzas en pareja o grupo
                </p>
              </div>
              <div class="account-card-footer">
                <div class="account-card-arrow">
                  <i class="fas fa-arrow-right"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
      <div class="modal-dialog auth-dialog">
        <div class="modal-illustration">
          <img
            src="img/ahorro.png"
            alt="Ilustraci√≥n de una persona ahorrando dinero en una alcanc√≠a"
          />
          <h3>Controla tus finanzas, alcanza tus metas.</h3>
          <p>Tu futuro financiero comienza aqu√≠.</p>
        </div>
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title" id="authModalTitle">¬°Bienvenido!</h2>
            <button
              class="modal-close"
              type="button"
              aria-label="Cerrar"
              data-close-modal="authModal"
            >
              &times;
            </button>
          </div>
          <div class="modal-body">
            <form id="loginForm">
              <div class="input-group">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="loginEmail"
                  placeholder="Tu correo electr√≥nico"
                  required
                  autocomplete="email"
                />
              </div>
              <div class="input-group">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="loginPassword"
                  placeholder="Tu contrase√±a"
                  required
                  autocomplete="current-password"
                />
                <i
                  class="fas fa-eye password-toggle"
                  onclick="togglePasswordVisibility('loginPassword', this)"
                ></i>
              </div>
              <a href="#" class="form-link" id="forgotPasswordLink"
                >¬øOlvidaste tu contrase√±a?</a
              >
              <button type="submit" class="btn btn--primary btn--full-width">
                Iniciar Sesi√≥n
              </button>

              <div class="auth-divider">
                <span>O contin√∫a con</span>
              </div>

              <div class="social-login-buttons">
                <button
                  type="button"
                  class="btn-social btn-google"
                  onclick="window.app?.loginWithGoogle()"
                >
                  <i class="fab fa-google"></i>
                  <span>Google</span>
                </button>
                <button
                  type="button"
                  class="btn-social btn-facebook"
                  onclick="window.app?.loginWithFacebook()"
                >
                  <i class="fab fa-facebook-f"></i>
                  <span>Facebook</span>
                </button>
              </div>
            </form>
            <form id="registerForm" class="hidden">
              <div class="input-group">
                <i class="fas fa-user"></i>
                <input
                  type="text"
                  id="registerName"
                  placeholder="Tu nombre o seud√≥nimo"
                  required
                  autocomplete="name"
                />
              </div>
              <div class="input-group">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="registerEmail"
                  placeholder="Tu correo electr√≥nico"
                  required
                  autocomplete="email"
                />
              </div>
              <div class="input-group">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="registerPassword"
                  placeholder="Crea una contrase√±a"
                  required
                  autocomplete="new-password"
                />
                <i
                  class="fas fa-eye password-toggle"
                  onclick="togglePasswordVisibility('registerPassword', this)"
                ></i>
              </div>
              <button type="submit" class="btn btn--primary btn--full-width">
                Crear Cuenta
              </button>

              <div class="auth-divider">
                <span>O contin√∫a con</span>
              </div>

              <div class="social-login-buttons">
                <button
                  type="button"
                  class="btn-social btn-google"
                  onclick="window.app?.loginWithGoogle()"
                >
                  <i class="fab fa-google"></i>
                  <span>Google</span>
                </button>
                <button
                  type="button"
                  class="btn-social btn-facebook"
                  onclick="window.app?.loginWithFacebook()"
                >
                  <i class="fab fa-facebook-f"></i>
                  <span>Facebook</span>
                </button>
              </div>
            </form>
          </div>
          <div class="modal-footer auth-footer">
            <p id="authSwitchLink">
              ¬øNo tienes una cuenta? <a href="#">Reg√≠strate aqu√≠</a>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Password Reset Modal -->
    <div class="modal" id="resetPasswordModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title">üîë Recuperar Contrase√±a</h2>
            <button
              class="modal-close"
              type="button"
              aria-label="Cerrar"
              data-close-modal="resetPasswordModal"
            >
              &times;
            </button>
          </div>
          <div class="modal-body">
            <p
              style="
                margin-bottom: var(--space-20);
                color: var(--color-text-secondary);
              "
            >
              Ingresa tu correo electr√≥nico y te enviaremos un enlace para
              restablecer tu contrase√±a.
            </p>
            <form id="resetPasswordForm">
              <div class="input-group">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="resetEmail"
                  placeholder="Tu correo electr√≥nico"
                  required
                  autocomplete="email"
                />
              </div>
              <button type="submit" class="btn btn--primary btn--full-width">
                Enviar Correo de Recuperaci√≥n
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Invitation Modal -->
    <div class="modal" id="invitationModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title">Invitar Usuario</h2>
            <button
              class="modal-close"
              type="button"
              aria-label="Cerrar"
              data-close-modal="invitationModal"
            >
              &times;
            </button>
          </div>
          <div class="modal-body">
            <div class="invitation-steps">
              <div class="step-item active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h4>Generar Invitaci√≥n</h4>
                  <p>
                    Crea un c√≥digo √∫nico para invitar a tu pareja o familiar.
                  </p>
                  <form id="generateInviteForm">
                    <div class="input-group">
                      <i class="fas fa-user"></i>
                      <input
                        type="text"
                        id="inviteeName"
                        placeholder="Nombre de la persona a invitar"
                        required
                      />
                    </div>
                    <button type="submit" class="btn btn--primary">
                      <i class="fas fa-plus"></i> Generar Invitaci√≥n
                    </button>
                  </form>
                </div>
              </div>

              <div class="step-item" data-step="2">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h4>Compartir C√≥digo</h4>
                  <p>
                    Comparte este c√≥digo con la persona que quieres invitar:
                  </p>
                  <div class="invite-code-display">
                    <div class="code-container">
                      <span id="generatedInviteCode">-----</span>
                      <button class="copy-btn" id="copyInviteCode">
                        <i class="fas fa-copy"></i>
                      </button>
                    </div>
                  </div>
                  <div class="invite-instructions">
                    <p><strong>Instrucciones:</strong></p>
                    <ol>
                      <li>Comparte este c√≥digo con la persona</li>
                      <li>P√≠dele que se registre en la aplicaci√≥n</li>
                      <li>Durante el registro, debe ingresar este c√≥digo</li>
                      <li>Una vez registrado, tendr√°n acceso compartido</li>
                    </ol>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ... al final de index.html, despu√©s de  -->
    <script>
      // Abrir modal en modo cambio de contrase√±as
      document
        .getElementById('changePasswordsBtn')
        ?.addEventListener('click', () => {
          if (
            window.app &&
            typeof window.app.openSecurityModal === 'function'
          ) {
            window.app.openSecurityModal('change');
          } else {
            // Fallback visual si la clase a√∫n no expone el m√©todo
            const modal = document.getElementById('securityModal');
            document.getElementById('securityModalTitle').textContent =
              'Cambiar Contrase√±as';
            document.getElementById('modalSavePasswordsBtn').textContent =
              'Guardar';
            document.getElementById('newPassSection').style.display = '';
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
          }
        });

      // Cerrar modal
      const closeButtons = ['closeSecurityModalBtn', 'cancelSecurityBtn'];
      closeButtons.forEach((id) => {
        document.getElementById(id)?.addEventListener('click', () => {
          const modal = document.getElementById('securityModal');
          modal.classList.remove('show');
          document.body.style.overflow = '';
        });
      });

      // Submit del form: delegar a la app si existe, si no, fallback
      document
        .getElementById('securityForm')
        ?.addEventListener('submit', (e) => {
          e.preventDefault();
          if (
            window.app &&
            typeof window.app.savePasswordsFromModal === 'function'
          ) {
            window.app.savePasswordsFromModal();
          } else {
            // Fallback m√≠nimo: solo cerrar
            const modal = document.getElementById('securityModal');
            modal.classList.remove('show');
            document.body.style.overflow = '';
          }
        });

      // Cerrar al click en el backdrop
      document
        .getElementById('securityModal')
        ?.addEventListener('click', (e) => {
          if (e.target.id === 'securityModal') {
            e.currentTarget.classList.remove('show');
            document.body.style.overflow = '';
          }
        });
    </script>

    <!-- Professional Footer -->
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-main">
          <div class="footer-brand">
            <div class="footer-logo">
              <div class="logo-icon-footer">
                <svg
                  class="logo-svg"
                  viewBox="0 0 40 40"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <defs>
                    <linearGradient
                      id="footerLogoGradient"
                      x1="0%"
                      y1="0%"
                      x2="100%"
                      y2="100%"
                    >
                      <stop
                        offset="0%"
                        style="stop-color: #0ea5e9; stop-opacity: 1"
                      />
                      <stop
                        offset="100%"
                        style="stop-color: #00a9e0; stop-opacity: 1"
                      />
                    </linearGradient>
                  </defs>
                  <circle
                    cx="20"
                    cy="20"
                    r="18"
                    fill="url(#footerLogoGradient)"
                  />
                  <path
                    d="M12 28 L16 22 L20 25 L24 18 L28 20"
                    stroke="white"
                    stroke-width="2.5"
                    fill="none"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <circle cx="16" cy="22" r="2.5" fill="white" />
                  <circle cx="20" cy="25" r="2.5" fill="white" />
                  <circle cx="24" cy="18" r="2.5" fill="white" />
                  <text
                    x="20"
                    y="15"
                    text-anchor="middle"
                    fill="white"
                    font-size="10"
                    font-weight="bold"
                  >
                    $
                  </text>
                </svg>
              </div>
              <span class="footer-brand-text">Financia Suite</span>
            </div>
            <p class="footer-tagline">Tu aliado financiero inteligente</p>
            <p class="footer-description">
              Controla tus gastos, alcanza tus metas y toma decisiones
              financieras inteligentes con an√°lisis en tiempo real.
            </p>
          </div>

          <div class="footer-columns">
            <div class="footer-column">
              <h4 class="footer-column-title">Plataforma</h4>
              <ul class="footer-links-list">
                <li><a href="#" class="footer-link-item">Inicio</a></li>
                <li><a href="#" class="footer-link-item">An√°lisis</a></li>
                <li>
                  <a href="#" class="footer-link-item">Metas Financieras</a>
                </li>
                <li><a href="#" class="footer-link-item">Configuraci√≥n</a></li>
                <li>
                  <a href="#" class="footer-link-item" id="footerLoginLink"
                    >Iniciar Sesi√≥n</a
                  >
                </li>
              </ul>
            </div>

            <div class="footer-column">
              <h4 class="footer-column-title">Soporte</h4>
              <ul class="footer-links-list">
                <li>
                  <a href="#" class="footer-link-item" id="helpCenterLink"
                    >Centro de Ayuda</a
                  >
                </li>
                <li><a href="#" class="footer-link-item">Tutoriales</a></li>
                <li><a href="#" class="footer-link-item">Contacto</a></li>
                <li><a href="#" class="footer-link-item">FAQ</a></li>
              </ul>
            </div>

            <div class="footer-column">
              <h4 class="footer-column-title">Legal</h4>
              <ul class="footer-links-list">
                <li>
                  <a
                    href="terminos-y-politicas.html"
                    target="_blank"
                    class="footer-link-item"
                  >
                    T√©rminos de Servicio
                  </a>
                </li>
                <li>
                  <a
                    href="terminos-y-politicas.html#politica-privacidad"
                    target="_blank"
                    class="footer-link-item"
                  >
                    Pol√≠tica de Privacidad
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div class="footer-divider"></div>

        <div class="footer-bottom">
          <div class="footer-copyright">
            <p>
              &copy; 2025 Financia Suite. Dise√±ado con pasi√≥n por las finanzas.
            </p>
          </div>
          <div class="footer-social">
            <!-- Aqu√≠ ir√° Instagram -->
            <!-- Aqu√≠ ir√° Twitter -->
            <!-- Aqu√≠ ir√° Facebook -->
            <!-- Aqu√≠ ir√° LinkedIn -->
          </div>
        </div>
      </div>
    </footer>

    <!-- Onboarding Tour Overlay -->
    <div id="tourOverlay" class="tour-overlay hidden">
      <div class="tour-backdrop"></div>
      <div class="tour-spotlight"></div>
      <div class="tour-tooltip">
        <div class="tour-tooltip-content">
          <div class="tour-header">
            <h3 class="tour-title"></h3>
            <button class="tour-close" aria-label="Cerrar tour">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="tour-body">
            <p class="tour-description"></p>
          </div>
          <div class="tour-footer">
            <div class="tour-progress">
              <span class="tour-step-counter"></span>
              <div class="tour-progress-bar">
                <div class="tour-progress-fill"></div>
              </div>
            </div>
            <div class="tour-actions">
              <button class="tour-btn tour-skip-prominent">
                <i class="fas fa-times"></i> Saltar tour
              </button>
              <div class="tour-nav-buttons">
                <button class="tour-btn tour-prev">
                  <i class="fas fa-chevron-left"></i> Anterior
                </button>
                <button class="tour-btn tour-next">
                  Siguiente <i class="fas fa-chevron-right"></i>
                </button>
                <button class="tour-btn tour-finish hidden">
                  <i class="fas fa-check"></i> Finalizar
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tour Start Button (floating) -->
    <button
      id="startTourBtn"
      class="tour-start-btn"
      title="Iniciar tour de la aplicaci√≥n"
    >
      <i class="fas fa-question-circle"></i>
    </button>

    <!-- Partner Invitation Modal -->
    <div id="partnerInviteModal" class="modal-overlay hidden">
      <div class="modal-dialog invitation-modal">
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-icon warning">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="modal-title-section">
              <h3 class="modal-title">Invitar a un socio</h3>
              <p class="modal-subtitle">
                Compartir√°s el control total de esta cuenta
              </p>
            </div>
            <button class="modal-close" id="closeInviteModalBtn">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="modal-body">
            <div class="invitation-steps">
              <div class="step-item active" id="inviteStep1">
                <div class="step-content">
                  <div class="warning-message">
                    <div class="warning-icon">
                      <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="warning-text">
                      <h4>‚ö†Ô∏è Importante: Acceso completo</h4>
                      <p>La persona invitada tendr√° acceso total a:</p>
                      <ul>
                        <li>Ver, editar y eliminar todos los gastos</li>
                        <li>Crear y modificar metas financieras</li>
                        <li>Acceder a todos los datos y an√°lisis</li>
                        <li>Cambiar configuraciones de la cuenta</li>
                      </ul>
                      <p>
                        <strong
                          >Solo invita a personas de absoluta confianza.</strong
                        >
                      </p>
                    </div>
                  </div>
                  <div class="step-actions">
                    <button class="btn-secondary" id="cancelInviteBtn">
                      <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button class="btn-primary" id="proceedInviteBtn">
                      <i class="fas fa-check"></i> Continuar
                    </button>
                  </div>
                </div>
              </div>

              <div class="step-item hidden" id="inviteStep2">
                <div class="step-content">
                  <div class="success-message">
                    <div class="success-icon">
                      <i class="fas fa-link"></i>
                    </div>
                    <div class="success-text">
                      <h4>‚úÖ Enlace de invitaci√≥n generado</h4>
                      <p>Comparte este enlace seguro con tu socio:</p>
                    </div>
                  </div>

                  <div class="invite-link-container">
                    <div class="invite-link-display">
                      <input
                        type="text"
                        class="invite-link-input"
                        id="generatedInviteLink"
                        readonly
                      />
                      <button class="copy-link-btn" id="copyInviteLinkBtn">
                        <i class="fas fa-copy"></i>
                      </button>
                    </div>
                  </div>

                  <div class="invite-instructions">
                    <div class="instruction-icon">
                      <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="instruction-text">
                      <p><strong>Instrucciones:</strong></p>
                      <ol>
                        <li>Copia el enlace usando el bot√≥n de copiar</li>
                        <li>Env√≠alo de forma segura a tu socio</li>
                        <li>El enlace expira en 24 horas</li>
                        <li>Solo puede ser usado una vez</li>
                      </ol>
                    </div>
                  </div>

                  <div class="step-actions">
                    <button class="btn-secondary" id="generateNewLinkBtn">
                      <i class="fas fa-redo"></i> Generar nuevo enlace
                    </button>
                    <button class="btn-primary" id="finishInviteBtn">
                      <i class="fas fa-check"></i> Finalizar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Detalle de Ahorros -->
    <div class="modal" id="savingsDetailModal">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">
              <i class="fas fa-piggy-bank"></i> Desglose de Ahorros
            </h3>
            <button class="modal-close" id="closeSavingsDetail">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <div class="savings-detail-summary">
              <div class="detail-summary-card">
                <i class="fas fa-wallet"></i>
                <div>
                  <p>Total Ahorrado</p>
                  <h2 id="modalTotalSavings">$0</h2>
                </div>
              </div>
              <div class="detail-summary-card">
                <i class="fas fa-layer-group"></i>
                <div>
                  <p>Fuentes Activas</p>
                  <h2 id="modalTotalSources">0</h2>
                </div>
              </div>
            </div>
            <div class="savings-breakdown" id="savingsBreakdownList">
              <!-- Se llenar√° din√°micamente -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Payments Detail Modal -->
    <div class="modal" id="paymentsDetailModal">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">
              <i class="fas fa-money-bill-wave"></i> Pagos Recurrentes del Mes
            </h3>
            <button class="modal-close" id="closePaymentsDetail">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <div class="payments-detail-summary">
              <div class="detail-summary-card pending-card">
                <i class="fas fa-exclamation-circle"></i>
                <div>
                  <p>Por Pagar</p>
                  <h2 id="modalPendingPayments">0</h2>
                </div>
              </div>
              <div class="detail-summary-card paid-card">
                <i class="fas fa-check-circle"></i>
                <div>
                  <p>Pagados</p>
                  <h2 id="modalPaidPayments">0</h2>
                </div>
              </div>
              <div class="detail-summary-card total-card">
                <i class="fas fa-calculator"></i>
                <div>
                  <p>Total del Mes</p>
                  <h2 id="modalTotalMonthlyAmount">$0</h2>
                </div>
              </div>
            </div>
            <div class="payments-breakdown">
              <div class="payments-section-title">
                <i class="fas fa-exclamation-triangle"></i>
                <h4>Pendientes de Pago</h4>
              </div>
              <div id="pendingPaymentsList" class="payment-items-list">
                <!-- Se llenar√° din√°micamente -->
              </div>

              <div class="payments-section-title paid-section">
                <i class="fas fa-check-circle"></i>
                <h4>Pagados este mes</h4>
              </div>
              <div id="paidPaymentsList" class="payment-items-list">
                <!-- Se llenar√° din√°micamente -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Expenses Detail Modal -->
    <div class="modal" id="expensesDetailModal">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">
              <i class="fas fa-chart-line"></i> Resumen Financiero del Mes
            </h3>
            <button class="modal-close" id="closeExpensesDetail">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <!-- Summary Section -->
            <div class="expenses-summary-header">
              <div class="summary-period">
                <i class="fas fa-calendar-alt"></i>
                <div>
                  <h4>Per√≠odo analizado</h4>
                  <p id="expensesPeriod">1 de Enero - Hoy</p>
                </div>
              </div>
              <div class="summary-total-expenses">
                <h4>Total gastado este mes</h4>
                <h2 id="modalTotalExpenses">$0</h2>
              </div>
            </div>

            <!-- Statistics Grid -->
            <div class="expenses-stats-container">
              <button class="scroll-btn scroll-btn-left" id="scrollStatsLeft">
                <i class="fas fa-chevron-left"></i>
              </button>
              <div class="expenses-stats-grid" id="expensesStatsGrid">
                <div class="expense-stat-card transactions">
                  <div class="stat-icon">
                    <i class="fas fa-receipt"></i>
                  </div>
                  <div class="stat-content">
                    <h4>Transacciones</h4>
                    <p class="stat-number" id="modalTotalTransactions">0</p>
                    <span class="stat-label">operaciones realizadas</span>
                  </div>
                </div>

                <div class="expense-stat-card necessity">
                  <div class="stat-icon">
                    <i class="fas fa-exclamation-circle"></i>
                  </div>
                  <div class="stat-content">
                    <h4>Gastos Necesarios</h4>
                    <p class="stat-number" id="modalNecessaryPercentage">0%</p>
                    <span class="stat-label" id="modalNecessaryAmount"
                      >$0 en gastos esenciales</span
                    >
                  </div>
                </div>

                <div class="expense-stat-card unnecessary">
                  <div class="stat-icon">
                    <i class="fas fa-shopping-bag"></i>
                  </div>
                  <div class="stat-content">
                    <h4>Gastos No Necesarios</h4>
                    <p class="stat-number" id="modalUnnecessaryPercentage">
                      0%
                    </p>
                    <span class="stat-label" id="modalUnnecessaryAmount"
                      >$0 en gastos prescindibles</span
                    >
                  </div>
                </div>

                <div class="expense-stat-card services">
                  <div class="stat-icon">
                    <i class="fas fa-hand-holding-usd"></i>
                  </div>
                  <div class="stat-content">
                    <h4>Servicios Pagados</h4>
                    <p class="stat-number" id="modalServicesPaid">0</p>
                    <span class="stat-label" id="modalServicesAmount"
                      >$0 en servicios</span
                    >
                  </div>
                </div>
              </div>
              <button class="scroll-btn scroll-btn-right" id="scrollStatsRight">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>

            <!-- Necessity Breakdown -->
            <div class="expenses-necessity-section">
              <div class="section-title-row">
                <h4>
                  <i class="fas fa-chart-pie"></i> Distribuci√≥n por Necesidad
                </h4>
              </div>
              <div class="necessity-bars" id="necessityBarsContainer">
                <!-- Se llenar√° din√°micamente -->
              </div>
            </div>

            <!-- Services Paid Section -->
            <div class="expenses-services-section">
              <div class="section-title-row">
                <h4>
                  <i class="fas fa-money-check-alt"></i> Servicios Pagados Este
                  Mes
                </h4>
              </div>
              <div class="services-paid-list" id="servicesPaidList">
                <!-- Se llenar√° din√°micamente -->
              </div>
            </div>

            <!-- Category Breakdown -->
            <div class="expenses-categories-section">
              <div class="section-title-row">
                <h4><i class="fas fa-tags"></i> Gastos por Categor√≠a</h4>
              </div>
              <div class="categories-breakdown" id="categoriesBreakdown">
                <!-- Se llenar√° din√°micamente -->
              </div>
            </div>

            <!-- Recent Transactions -->
            <div class="expenses-transactions-section">
              <div class="section-title-row">
                <h4><i class="fas fa-history"></i> √öltimas Transacciones</h4>
              </div>
              <div class="transactions-list" id="recentTransactionsList">
                <!-- Se llenar√° din√°micamente -->
              </div>
            </div>

            <!-- Financial Insights -->
            <div class="financial-insights">
              <div class="insight-card">
                <i class="fas fa-lightbulb"></i>
                <div class="insight-content">
                  <h5>An√°lisis Financiero</h5>
                  <p id="financialInsight">
                    <!-- Se llenar√° din√°micamente con recomendaciones -->
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de Enlace de Invitaci√≥n Despu√©s de Registro -->
    <div class="modal" id="sharedAccountInviteModal">
      <div class="modal-dialog invitation-success-modal">
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-icon success">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="modal-title-section">
              <h3 class="modal-title">¬°Cuenta Mancomunada Creada!</h3>
              <p class="modal-subtitle">
                Comparte este enlace con tu socio para que se una
              </p>
            </div>
            <button class="modal-close" id="closeSharedInviteModalBtn">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="modal-body">
            <div class="invite-success-content">
              <div class="success-message-box">
                <div class="success-icon-large">
                  <i class="fas fa-users"></i>
                </div>
                <div class="success-text">
                  <h4>üéâ Tu cuenta mancomunada est√° lista</h4>
                  <p>
                    Ahora puedes invitar a tu socio usando el enlace √∫nico
                    generado
                  </p>
                </div>
              </div>

              <div class="invite-link-section">
                <label class="invite-label">
                  <i class="fas fa-link"></i> Enlace de Invitaci√≥n
                </label>
                <div class="invite-link-display-modern">
                  <input
                    type="text"
                    class="invite-link-input-modern"
                    id="sharedAccountInviteLink"
                    readonly
                  />
                  <button
                    class="btn-copy-modern"
                    id="copySharedInviteLinkBtn"
                    title="Copiar enlace"
                  >
                    <i class="fas fa-copy"></i>
                    <span>Copiar</span>
                  </button>
                  <button
                    class="btn-share-modern"
                    id="shareSharedInviteLinkBtn"
                    title="Compartir"
                  >
                    <i class="fas fa-share-alt"></i>
                    <span>Compartir</span>
                  </button>
                </div>
              </div>

              <div class="invite-info-box">
                <div class="info-icon">
                  <i class="fas fa-info-circle"></i>
                </div>
                <div class="info-content">
                  <h5>Importante:</h5>
                  <ul>
                    <li><strong>El enlace expira en 24 horas</strong></li>
                    <li>Solo puede ser usado una vez</li>
                    <li>Tambi√©n puedes encontrarlo en tus notificaciones</li>
                    <li>Comparte solo con personas de confianza</li>
                  </ul>
                </div>
              </div>

              <div class="invite-timer-section">
                <div class="timer-icon">
                  <i class="fas fa-clock"></i>
                </div>
                <div class="timer-text">
                  <span>Tiempo restante: </span>
                  <strong id="inviteLinkTimer">24:00:00</strong>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer">
            <button class="btn-secondary" id="viewNotificationsBtn">
              <i class="fas fa-bell"></i>
              Ver en Notificaciones
            </button>
            <button class="btn-primary" id="closeSharedInviteModalFinishBtn">
              <i class="fas fa-check"></i>
              Entendido
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- FAB (Floating Action Button) for Quick Expense Entry -->
    <button class="fab" id="fabQuickExpense" aria-label="Agregar gasto r√°pido">
      <i class="fas fa-plus"></i>
    </button>

    <!-- Instagram-style Quick Actions Button (Mobile Only) -->
    <button
      class="fab-instagram"
      id="fabInstagram"
      aria-label="Acciones r√°pidas"
    >
      <i class="fas fa-plus"></i>
    </button>

    <!-- Quick Actions Menu Desplegable -->
    <div class="fab-quick-menu hidden" id="quickExpenseModal">
      <!-- Opci√≥n 1: Registrar Gasto (Principal) -->
      <button
        class="fab-menu-item fab-menu-primary"
        id="quickActionFullExpense"
      >
        <div
          class="fab-menu-icon"
          style="background: linear-gradient(135deg, #ef4444, #dc2626)"
        >
          <i class="fas fa-receipt"></i>
        </div>
        <span class="fab-menu-label">Registrar Gasto</span>
      </button>

      <!-- Opci√≥n 2: Registrar Gasto con Fin (IA) -->
      <button class="fab-menu-item" id="quickActionConversationalExpense">
        <div
          class="fab-menu-icon"
          style="background: linear-gradient(135deg, #00c2ff, #00a9e0)"
        >
          <i class="fas fa-robot"></i>
        </div>
        <span class="fab-menu-label">Registrar con Fin</span>
      </button>

      <!-- Opci√≥n 3: Modo R√°pido -->
      <button class="fab-menu-item" id="quickActionFastMode">
        <div
          class="fab-menu-icon"
          style="background: linear-gradient(135deg, #f59e0b, #d97706)"
        >
          <i class="fas fa-bolt"></i>
        </div>
        <span class="fab-menu-label">Modo R√°pido</span>
      </button>

      <!-- Opci√≥n 5: Registrar Sueldo -->
      <button class="fab-menu-item" id="quickActionSalary">
        <div
          class="fab-menu-icon"
          style="background: linear-gradient(135deg, #10b981, #059669)"
        >
          <i class="fas fa-wallet"></i>
        </div>
        <span class="fab-menu-label">Registrar Sueldo</span>
      </button>

      <!-- Opci√≥n 6: Entrada Extra -->
      <button class="fab-menu-item" id="quickActionExtraIncome">
        <div
          class="fab-menu-icon"
          style="background: linear-gradient(135deg, #8b5cf6, #7c3aed)"
        >
          <i class="fas fa-coins"></i>
        </div>
        <span class="fab-menu-label">Entrada Extra</span>
      </button>
    </div>

    <!-- Modal Modo R√°pido (solo monto y descripci√≥n) -->
    <div class="modal" id="fastModeModal">
      <div class="modal__content modal--sm">
        <div class="modal__header">
          <h2><i class="fas fa-bolt"></i> Modo R√°pido</h2>
          <button class="modal__close" id="closeFastModeModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal__body">
          <form id="fastModeForm">
            <div class="form-group">
              <label class="form-label" for="fastAmount">
                <i class="fas fa-dollar-sign"></i> Monto
              </label>
              <input
                type="number"
                id="fastAmount"
                class="form-control form-control--lg"
                placeholder="0.00"
                step="0.01"
                min="0"
                required
                autofocus
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="fastDescription">
                <i class="fas fa-pencil-alt"></i> Descripci√≥n
              </label>
              <input
                type="text"
                id="fastDescription"
                class="form-control"
                placeholder="Ej. Caf√©, Uber, Compras..."
                required
              />
            </div>

            <div style="display: flex; gap: 12px; margin-top: 24px">
              <button
                type="button"
                class="btn btn--secondary"
                id="cancelFastMode"
                style="flex: 1"
              >
                Cancelar
              </button>
              <button type="submit" class="btn btn--primary" style="flex: 1">
                <i class="fas fa-check"></i> Guardar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Registrar Sueldo -->
    <div class="modal" id="salaryModal">
      <div class="modal__content modal--sm">
        <div class="modal__header">
          <h2><i class="fas fa-wallet"></i> Registrar Sueldo</h2>
          <button class="modal__close" id="closeSalaryModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal__body">
          <form id="salaryForm">
            <div class="form-group">
              <label class="form-label" for="salaryAmount">
                <i class="fas fa-dollar-sign"></i> Monto del Sueldo
              </label>
              <input
                type="text"
                id="salaryAmount"
                class="form-control form-control--lg"
                placeholder="Ej: 1500000"
                required
                autofocus
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="salaryDate">
                <i class="fas fa-calendar"></i> Fecha
              </label>
              <input
                type="date"
                id="salaryDate"
                class="form-control"
                required
              />
            </div>

            <div style="display: flex; gap: 12px; margin-top: 24px">
              <button
                type="button"
                class="btn btn--secondary"
                id="cancelSalary"
                style="flex: 1"
              >
                Cancelar
              </button>
              <button type="submit" class="btn btn--primary" style="flex: 1">
                <i class="fas fa-check"></i> Guardar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Entrada Extra -->
    <div class="modal" id="extraIncomeModal">
      <div class="modal__content modal--sm">
        <div class="modal__header">
          <h2><i class="fas fa-coins"></i> Entrada Extra</h2>
          <button class="modal__close" id="closeExtraIncomeModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal__body">
          <form id="extraIncomeForm">
            <div class="form-group">
              <label class="form-label" for="extraAmount">
                <i class="fas fa-dollar-sign"></i> Monto
              </label>
              <input
                type="text"
                id="extraAmount"
                class="form-control form-control--lg"
                placeholder="Ej: 500000"
                required
                autofocus
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="extraDescription">
                <i class="fas fa-pencil-alt"></i> Descripci√≥n
              </label>
              <input
                type="text"
                id="extraDescription"
                class="form-control"
                placeholder="Ej. Bono, Freelance, Venta..."
                required
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="extraDate">
                <i class="fas fa-calendar"></i> Fecha
              </label>
              <input type="date" id="extraDate" class="form-control" required />
            </div>

            <div style="display: flex; gap: 12px; margin-top: 24px">
              <button
                type="button"
                class="btn btn--secondary"
                id="cancelExtra"
                style="flex: 1"
              >
                Cancelar
              </button>
              <button type="submit" class="btn btn--primary" style="flex: 1">
                <i class="fas fa-check"></i> Guardar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Confirmaci√≥n de Eliminaci√≥n -->
    <div class="modal" id="deleteConfirmModal">
      <div class="modal__content modal--sm">
        <div class="modal__header">
          <h2>
            <i class="fas fa-exclamation-triangle" style="color: #ff5459"></i>
            ¬øSeguro quieres eliminar este gasto?
          </h2>
          <button class="modal__close" id="closeDeleteConfirmModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal__body">
          <!-- Informaci√≥n del gasto a eliminar -->
          <div class="delete-expense-info">
            <div class="expense-detail">
              <i class="fas fa-dollar-sign"></i>
              <span id="deleteExpenseAmount">$0.00</span>
            </div>
            <div class="expense-detail">
              <i class="fas fa-tag"></i>
              <span id="deleteExpenseCategory">Categor√≠a</span>
            </div>
            <div class="expense-detail">
              <i class="fas fa-align-left"></i>
              <span id="deleteExpenseDescription">Descripci√≥n</span>
            </div>
          </div>

          <!-- Campo opcional de motivo -->
          <div class="form-group" style="margin-top: var(--space-20)">
            <label
              class="form-label"
              style="
                font-size: var(--font-size-sm);
                color: var(--color-text-secondary);
              "
            >
              <i class="fas fa-comment"></i>
              Motivo de eliminaci√≥n <span style="opacity: 0.6">(opcional)</span>
            </label>
            <textarea
              id="deleteReasonInput"
              class="form-control"
              placeholder="Ej: Gasto duplicado, error de registro, compra cancelada..."
              rows="3"
              style="resize: vertical; min-height: 60px"
            ></textarea>
            <small
              class="form-text"
              style="
                display: block;
                margin-top: var(--space-8);
                color: var(--color-text-secondary);
              "
            >
              Este motivo quedar√° visible en tus notificaciones para futuras
              referencias
            </small>
          </div>

          <!-- Advertencia -->
          <div class="delete-warning">
            <i class="fas fa-info-circle"></i>
            <span
              >Esta acci√≥n no se puede deshacer, pero quedar√° registrada en tu
              historial</span
            >
          </div>

          <!-- Botones de acci√≥n -->
          <div class="modal-actions">
            <button
              type="button"
              class="btn btn--secondary"
              id="cancelDeleteBtn"
            >
              <i class="fas fa-times"></i>
              Cancelar
            </button>
            <button type="button" class="btn btn--danger" id="confirmDeleteBtn">
              <i class="fas fa-trash-alt"></i>
              S√≠, eliminar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Funcionalidad en Desarrollo -->
    <div class="modal" id="comingSoonModal">
      <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content coming-soon-modal">
          <button
            class="modal-close"
            type="button"
            aria-label="Cerrar"
            onclick="closeComingSoonModal()"
          >
            &times;
          </button>
          <div class="modal-body">
            <div class="coming-soon-icon">
              <i class="fas fa-tools"></i>
            </div>
            <h3 class="coming-soon-title">¬°Estamos Trabajando en Ello!</h3>
            <p class="coming-soon-message">
              Esta funcionalidad estar√° disponible muy pronto. Te notificaremos
              cuando est√© lista.
            </p>
            <div class="coming-soon-features">
              <div class="coming-soon-feature">
                <i class="fas fa-bolt"></i>
                <span>Gastos r√°pidos con un click</span>
              </div>
              <div class="coming-soon-feature">
                <i class="fas fa-repeat"></i>
                <span>Gastos recurrentes autom√°ticos</span>
              </div>
            </div>
            <button
              class="btn btn--primary btn--full-width"
              onclick="closeComingSoonModal()"
            >
              <i class="fas fa-check"></i> Entendido
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Premium En Desarrollo -->
    <div class="modal" id="premiumComingSoonModal">
      <div class="modal-dialog modal-dialog-centered modal-md">
        <div class="modal-content premium-coming-soon-modal">
          <button
            class="modal-close"
            type="button"
            aria-label="Cerrar"
            onclick="closePremiumComingSoonModal()"
          >
            &times;
          </button>
          <div class="modal-body">
            <div class="premium-coming-soon-icon">
              <i class="fas fa-crown"></i>
            </div>
            <h3 class="premium-coming-soon-title">
              ¬°Estamos Trabajando en Premium!
            </h3>
            <p class="premium-coming-soon-message">
              Nuestra versi√≥n Premium est√° en desarrollo. Te notificaremos
              cuando est√© disponible para que puedas disfrutar de todas las
              caracter√≠sticas exclusivas.
            </p>
            <div class="premium-coming-soon-features">
              <div class="premium-coming-soon-feature">
                <i class="fas fa-sparkles"></i>
                <span>Avatares personalizados ilimitados</span>
              </div>
              <div class="premium-coming-soon-feature">
                <i class="fas fa-chart-line"></i>
                <span>An√°lisis avanzados con IA</span>
              </div>
              <div class="premium-coming-soon-feature">
                <i class="fas fa-palette"></i>
                <span>Estilos de gr√°ficos premium</span>
              </div>
              <div class="premium-coming-soon-feature">
                <i class="fas fa-cloud-upload-alt"></i>
                <span>Sincronizaci√≥n prioritaria</span>
              </div>
            </div>
            <button
              class="btn btn--primary btn--full-width premium-cta-btn"
              onclick="closePremiumComingSoonModal()"
            >
              <i class="fas fa-bell"></i> Notificarme cuando est√© listo
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Registro Requerido -->
    <div class="modal" id="registerPromptModal">
      <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content register-prompt-modal">
          <button
            class="modal-close-elegant"
            id="closeRegisterPromptModal"
            aria-label="Cerrar"
          >
            <i class="fas fa-times"></i>
          </button>
          <div class="modal-body">
            <div class="register-prompt-icon">
              <i class="fas fa-user-plus"></i>
            </div>
            <h3 class="register-prompt-title">¬°Contin√∫a tu experiencia!</h3>
            <p class="register-prompt-message">
              Reg√≠strate o inicia sesi√≥n para desbloquear todas las funciones y
              guardar tus datos de forma segura.
            </p>
            <div class="register-prompt-features">
              <div class="prompt-feature">
                <i class="fas fa-check-circle"></i>
                <span>Sincronizaci√≥n en la nube</span>
              </div>
              <div class="prompt-feature">
                <i class="fas fa-check-circle"></i>
                <span>Acceso desde cualquier dispositivo</span>
              </div>
              <div class="prompt-feature">
                <i class="fas fa-check-circle"></i>
                <span>An√°lisis y gr√°ficos avanzados</span>
              </div>
            </div>
            <button
              class="btn btn--primary btn--full-width register-prompt-btn"
              id="registerPromptBtn"
            >
              <i class="fas fa-user-plus"></i>
              Registrarme ahora
            </button>
            <button class="btn-text" id="loginPromptBtn">
              ¬øYa tienes cuenta? Inicia sesi√≥n
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Confirmaci√≥n Cerrar Sesi√≥n -->
    <div class="modal" id="logoutConfirmModal">
      <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content logout-confirm-modal">
          <div class="modal-header">
            <div class="modal-icon warning">
              <i class="fas fa-sign-out-alt"></i>
            </div>
            <h3 class="modal-title">¬øCerrar sesi√≥n?</h3>
            <button
              class="modal-close"
              id="closeLogoutConfirmModal"
              aria-label="Cerrar"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <p class="logout-confirm-message">
              Est√°s a punto de cerrar tu sesi√≥n. ¬øDeseas continuar?
            </p>
          </div>
          <div class="modal-footer">
            <button class="btn btn--secondary" id="cancelLogoutBtn">
              <i class="fas fa-times"></i>
              Cancelar
            </button>
            <button class="btn btn--danger" id="confirmLogoutBtn">
              <i class="fas fa-sign-out-alt"></i>
              Cerrar sesi√≥n
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Cookie Consent Banner -->
    <div class="cookie-banner" id="cookieBanner">
      <div class="cookie-banner__content">
        <div class="cookie-banner__icon">üç™</div>
        <div class="cookie-banner__text">
          <h3>Valoramos tu privacidad</h3>
          <p>
            Usamos cookies para mejorar tu experiencia, analizar el uso de la
            app y personalizar el contenido. Puedes aceptar todas o
            configurarlas.
          </p>
        </div>
        <div class="cookie-banner__actions">
          <button class="btn-cookie btn-cookie--settings" id="cookieSettings">
            <i class="fas fa-cog"></i> Configurar
          </button>
          <button class="btn-cookie btn-cookie--reject" id="cookieReject">
            Rechazar
          </button>
          <button class="btn-cookie btn-cookie--accept" id="cookieAccept">
            <i class="fas fa-check"></i> Aceptar todas
          </button>
        </div>
      </div>
    </div>

    <!-- Cookie Settings Modal -->
    <div class="cookie-modal hidden" id="cookieModal">
      <div class="cookie-modal__overlay" id="cookieModalOverlay"></div>
      <div class="cookie-modal__content">
        <div class="cookie-modal__header">
          <h2><i class="fas fa-shield-alt"></i> Configuraci√≥n de Cookies</h2>
          <button class="cookie-modal__close" id="cookieModalClose">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div class="cookie-modal__body">
          <div class="cookie-category">
            <div class="cookie-category__header">
              <div class="cookie-category__info">
                <h4>üîí Cookies Esenciales</h4>
                <p>Necesarias para el funcionamiento b√°sico de la aplicaci√≥n</p>
              </div>
              <label class="cookie-toggle cookie-toggle--disabled">
                <input type="checkbox" checked disabled />
                <span class="cookie-toggle__slider"></span>
              </label>
            </div>
            <div class="cookie-category__details">
              <small
                >Incluye: sesi√≥n de usuario, preferencias de interfaz, datos
                guardados localmente</small
              >
            </div>
          </div>

          <div class="cookie-category">
            <div class="cookie-category__header">
              <div class="cookie-category__info">
                <h4>üìä Cookies Anal√≠ticas</h4>
                <p>Nos ayudan a entender c√≥mo usas la app para mejorarla</p>
              </div>
              <label class="cookie-toggle">
                <input type="checkbox" id="cookieAnalytics" />
                <span class="cookie-toggle__slider"></span>
              </label>
            </div>
            <div class="cookie-category__details">
              <small
                >Firebase Analytics, m√©tricas de uso, estad√≠sticas
                an√≥nimas</small
              >
            </div>
          </div>

          <div class="cookie-category">
            <div class="cookie-category__header">
              <div class="cookie-category__info">
                <h4>üéØ Cookies Funcionales</h4>
                <p>Mejoran la experiencia con funciones personalizadas</p>
              </div>
              <label class="cookie-toggle">
                <input type="checkbox" id="cookieFunctional" />
                <span class="cookie-toggle__slider"></span>
              </label>
            </div>
            <div class="cookie-category__details">
              <small
                >Recordar preferencias, sincronizaci√≥n de datos,
                notificaciones</small
              >
            </div>
          </div>
        </div>

        <div class="cookie-modal__footer">
          <button class="btn-cookie btn-cookie--reject" id="cookieRejectAll">
            Rechazar todas
          </button>
          <button
            class="btn-cookie btn-cookie--accept"
            id="cookieSavePreferences"
          >
            <i class="fas fa-save"></i> Guardar preferencias
          </button>
        </div>

        <div class="cookie-modal__legal">
          <small>
            Al usar Financia Suite, aceptas nuestro uso de cookies seg√∫n tu
            configuraci√≥n. Puedes cambiar tus preferencias en cualquier momento
            desde Configuraci√≥n.
          </small>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

    <!-- Terms Acceptance - Must load BEFORE main app -->
    <script src="terms-acceptance.js"></script>

    <!-- Core systems - Must load BEFORE app.js -->
    <script src="achievements-system.js"></script>
    <script src="notifications-system.js"></script>
    <script src="ai-recommendations.js"></script>
    <script src="balance-history.js"></script>
    <script src="premium-manager.js"></script>
    <script src="promo-codes-system.js"></script>

    <!-- Main app -->
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="push-notifications.js"></script>
    <script type="module" src="app.js?v=4.2"></script>

    <!-- ‚ö†Ô∏è SCRIPT PROBLEM√ÅTICO COMENTADO - Causaba reset de valores -->
    <!-- <script src="fix-dropdowns-v2.js"></script> -->

    <!-- Nuevo sistema de gastos con personalizaci√≥n -->
    <script src="nuevo-expense-system.js"></script>

    <!-- Landing Page Animations -->
    <script src="landing-animations.js"></script>

    <!-- Additional features -->
    <script type="module" src="avatar-sidebar.js"></script>
    <script src="smart-forms.js?v=1.1"></script>
    <script src="tour.js?v=1.4"></script>
    <script src="fin-memory.js"></script>
    <script src="fin-response-optimizer.js"></script>
    <script src="fin-conversation-guide.js"></script>
    <script src="premium-status-widget.js"></script>
    <script src="premium-modal.js"></script>
    <script src="conversational-expense.js"></script>
    <script src="conversational-expense-ui.js"></script>
    <script src="custom-dropdown-mobile.js"></script>
    <script src="mobile-dropdown-fix.js"></script>
    <!-- onboarding-manager.js solo debe cargarse en onboarding.html -->
    <!-- <script src="onboarding-manager.js"></script> -->
    <script src="fin-widget.js"></script>
    <link rel="stylesheet" href="fin-conversation-styles.css" />

    <!-- ============================================
         MODALES DE SELECCI√ìN M√ìVIL (NUEVO SISTEMA)
         ============================================ -->

    <!-- ‚ö†Ô∏è MODALES ANTIGUOS COMENTADOS - Ya no se usan en el nuevo sistema

         Los siguientes modales usaban el sistema problem√°tico con triggers
         y handleModalOptionClick() que causaba el reset de valores.

         Han sido reemplazados por los nuevos modales de personalizaci√≥n
         ubicados al final del archivo (antes de </body>)
         -->

    <!-- MODALES ANTIGUOS - COMENTADOS

    <div class="select-modal" id="categoryModal">
      <div class="select-modal-overlay"></div>
      <div class="select-modal-content">
        <div class="select-modal-header">
          <h3>Selecciona una categor√≠a</h3>
          <button class="select-modal-close" onclick="closeSelectModal('categoryModal')">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="select-modal-body">
          <div class="select-modal-option" data-value="Alimentaci√≥n" onclick="handleModalOptionClick('categoryModal', 'category', 'Alimentaci√≥n')">
            <div class="option-icon">üçΩÔ∏è</div>
            <div class="option-text">Alimentaci√≥n</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div class="select-modal-option" data-value="Transporte" onclick="handleModalOptionClick('categoryModal', 'category', 'Transporte')">
            <div class="option-icon">üöó</div>
            <div class="option-text">Transporte</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div class="select-modal-option" data-value="Entretenimiento" onclick="handleModalOptionClick('categoryModal', 'category', 'Entretenimiento')">
            <div class="option-icon">üé¨</div>
            <div class="option-text">Entretenimiento</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div class="select-modal-option" data-value="Salud" onclick="handleModalOptionClick('categoryModal', 'category', 'Salud')">
            <div class="option-icon">üè•</div>
            <div class="option-text">Salud</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div class="select-modal-option" data-value="Servicios" onclick="handleModalOptionClick('categoryModal', 'category', 'Servicios')">
            <div class="option-icon">‚ö°</div>
            <div class="option-text">Servicios</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div class="select-modal-option" data-value="Compras" onclick="handleModalOptionClick('categoryModal', 'category', 'Compras')">
            <div class="option-icon">üõçÔ∏è</div>
            <div class="option-text">Compras</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div class="select-modal-option" data-value="Otros" onclick="handleModalOptionClick('categoryModal', 'category', 'Otros')">
            <div class="option-icon">üì¶</div>
            <div class="option-text">Otros</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>

          <!-- Bot√≥n para agregar categor√≠a personalizada 
          <div class="select-modal-option add-custom-option" onclick="handleModalOptionClick('categoryModal', 'category', '__add_custom__')">
            <div class="option-icon">‚ûï</div>
            <div class="option-text">Agregar categor√≠a personalizada</div>
            <div class="option-check"></div>
          </div>
        </div>
      </div>
    </div>-->

    <!-- Modal: Selecci√≥n de Prioridad/Necesidad 
    <div class="select-modal" id="necessityModal">
      <div class="select-modal-overlay"></div>
      <div class="select-modal-content">
        <div class="select-modal-header">
          <h3>Nivel de necesidad</h3>
          <button class="select-modal-close" onclick="closeSelectModal('necessityModal')">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="select-modal-body">
          <div class="select-modal-option" data-value="Muy Indispensable" onclick="handleModalOptionClick('necessityModal', 'necessity', 'Muy Indispensable')">
            <div class="option-icon">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <div class="option-text">Muy Indispensable</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div class="select-modal-option" data-value="Muy Necesario" onclick="handleModalOptionClick('necessityModal', 'necessity', 'Muy Necesario')">
            <div class="option-icon">‚≠ê‚≠ê‚≠ê‚≠ê</div>
            <div class="option-text">Muy Necesario</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div class="select-modal-option" data-value="Necesario" onclick="handleModalOptionClick('necessityModal', 'necessity', 'Necesario')">
            <div class="option-icon">‚≠ê‚≠ê‚≠ê</div>
            <div class="option-text">Necesario</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div class="select-modal-option" data-value="Poco Necesario" onclick="handleModalOptionClick('necessityModal', 'necessity', 'Poco Necesario')">
            <div class="option-icon">‚≠ê‚≠ê</div>
            <div class="option-text">Poco Necesario</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div class="select-modal-option" data-value="Nada Necesario" onclick="handleModalOptionClick('necessityModal', 'necessity', 'Nada Necesario')">
            <div class="option-icon">‚≠ê</div>
            <div class="option-text">Nada Necesario</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div class="select-modal-option" data-value="Malgasto" onclick="handleModalOptionClick('necessityModal', 'necessity', 'Malgasto')">
            <div class="option-icon">‚ùå</div>
            <div class="option-text">Malgasto/Arrepentimiento</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>

          <!-- Bot√≥n para agregar necesidad personalizada 
          <div class="select-modal-option add-custom-option" onclick="handleModalOptionClick('necessityModal', 'necessity', '__add_custom__')">
            <div class="option-icon">‚ûï</div>
            <div class="option-text">Agregar nivel personalizado</div>
            <div class="option-check"></div>
          </div>
        </div>
      </div>
    </div>-->

    <!-- Modal: Selecci√≥n/Adici√≥n de Usuario -->
    <div class="select-modal" id="userModal">
      <div class="select-modal-overlay"></div>
      <div class="select-modal-content">
        <div class="select-modal-header">
          <h3>Selecciona usuario</h3>
          <button
            class="select-modal-close"
            onclick="closeSelectModal('userModal')"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="select-modal-body" id="userModalOptions">
          <!-- Opciones base que se completan din√°micamente -->
          <div
            class="select-modal-option"
            data-value=""
            onclick="handleModalOptionClick('userModal', 'user', '')"
          >
            <div class="option-icon">üë§</div>
            <div class="option-text">Sin usuario asignado</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div
            class="select-modal-option"
            data-value="Daniel"
            onclick="handleModalOptionClick('userModal', 'user', 'Daniel')"
          >
            <div class="option-icon">üë®</div>
            <div class="option-text">Daniel</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <div
            class="select-modal-option"
            data-value="Givonik"
            onclick="handleModalOptionClick('userModal', 'user', 'Givonik')"
          >
            <div class="option-icon">üë®‚Äçüíº</div>
            <div class="option-text">Givonik</div>
            <div class="option-check"><i class="fas fa-check"></i></div>
          </div>
          <!-- Usuarios personalizados se agregar√°n din√°micamente aqu√≠ -->
        </div>
        <div class="select-modal-footer">
          <button
            class="btn-add-user"
            onclick="handleModalOptionClick('userModal', 'user', '__add_new__')"
          >
            <i class="fas fa-user-plus"></i>
            A√±adir nuevo usuario
          </button>
        </div>
      </div>
    </div>

    <!-- Modal: A√±adir Nuevo Usuario (Peque√±o) - DESHABILITADO: ID duplicado con el nuevo modal -->
    <!--
    <div class="select-modal select-modal-small" id="addUserModal">
      <div class="select-modal-overlay"></div>
      <div class="select-modal-content">
        <div class="select-modal-header">
          <h3>Nuevo usuario</h3>
          <button class="select-modal-close" onclick="closeSelectModal('addUserModal')">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="select-modal-body">
          <div class="form-group-modal">
            <label for="newUserModalInput">Nombre del usuario</label>
            <input
              type="text"
              id="newUserModalInput"
              class="modal-input"
              placeholder="Escribe el nombre"
              maxlength="30"
            />
          </div>
        </div>
        <div class="select-modal-footer">
          <button class="btn-modal-cancel" onclick="closeSelectModal('addUserModal')">
            Cancelar
          </button>
          <button class="btn-modal-save" onclick="saveNewUserFromModal()">
            <i class="fas fa-check"></i>
            Guardar
          </button>
        </div>
      </div>
    </div>
    -->

    <!-- Modal: A√±adir Categor√≠a Personalizada -->
    <div class="select-modal select-modal-small" id="addCategoryModal">
      <div class="select-modal-overlay"></div>
      <div class="select-modal-content">
        <div class="select-modal-header">
          <h3>Nueva categor√≠a</h3>
          <button
            class="select-modal-close"
            onclick="closeSelectModal('addCategoryModal')"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="select-modal-body">
          <div class="form-group-modal">
            <label for="newCategoryInput">Nombre de la categor√≠a</label>
            <input
              type="text"
              id="newCategoryInput"
              class="modal-input"
              placeholder="Ej: Mascotas, Educaci√≥n, etc."
              maxlength="30"
              onkeypress="if(event.key === 'Enter') saveNewCategoryFromModal()"
            />
          </div>
          <div class="form-group-modal">
            <label for="newCategoryIconModal">Icono (emoji)</label>
            <input
              type="text"
              id="newCategoryIconModal"
              class="modal-input"
              placeholder="üêï üéì üíº ..."
              maxlength="2"
              onkeypress="if(event.key === 'Enter') saveNewCategoryFromModal()"
            />
            <small style="color: #6b7280; font-size: 12px"
              >Opcional - Puedes usar un emoji</small
            >
          </div>
        </div>
        <div class="select-modal-footer">
          <button
            class="btn-modal-cancel"
            onclick="closeSelectModal('addCategoryModal')"
          >
            Cancelar
          </button>
          <button class="btn-modal-save" onclick="saveNewCategoryFromModal()">
            <i class="fas fa-check"></i>
            Guardar
          </button>
        </div>
      </div>
    </div>

    <!-- Modal: A√±adir Necesidad Personalizada 
    <div class="select-modal select-modal-small" id="addNecessityModal">
      <div class="select-modal-overlay"></div>
      <div class="select-modal-content">
        <div class="select-modal-header">
          <h3>Nuevo nivel de necesidad</h3>
          <button class="select-modal-close" onclick="closeSelectModal('addNecessityModal')">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="select-modal-body">
          <div class="form-group-modal">
            <label for="newNecessityInput">Nombre del nivel</label>
            <input
              type="text"
              id="newNecessityInput"
              class="modal-input"
              placeholder="Ej: Urgente, Planificado, etc."
              maxlength="30"
              onkeypress="if(event.key === 'Enter') saveNewNecessityFromModal()"
            />
          </div>
          <div class="form-group-modal">
            <label for="newNecessityIcon">Icono (emoji o estrellas)</label>
            <input
              type="text"
              id="newNecessityIcon"
              class="modal-input"
              placeholder="‚≠ê‚≠ê‚≠ê üî• ‚ö° ..."
              maxlength="10"
              onkeypress="if(event.key === 'Enter') saveNewNecessityFromModal()"
            />
            <small style="color: #6b7280; font-size: 12px;">Opcional - Puedes usar emojis o estrellas</small>
          </div>
        </div>
        <div class="select-modal-footer">
          <button class="btn-modal-cancel" onclick="closeSelectModal('addNecessityModal')">
            Cancelar
          </button>
          <button class="btn-modal-save" onclick="saveNewNecessityFromModal()">
            <i class="fas fa-check"></i>
            Guardar
          </button>
        </div>
      </div>
    </div>

    FIN DE MODALES ANTIGUOS COMENTADOS
    -->
    <!-- FIN DE MODALES ANTIGUOS COMENTADOS -->

    <!-- ============================================ -->
    <!-- MODAL DE PERMISO DE NOTIFICACIONES PUSH     -->
    <!-- ============================================ -->
    <div
      class="push-notification-modal"
      id="pushNotificationModal"
      style="display: none"
    >
      <div class="push-modal-overlay"></div>
      <div class="push-modal-content">
        <button class="push-modal-close" onclick="closePushNotificationModal()">
          <i class="fas fa-times"></i>
        </button>

        <div class="push-modal-header">
          <div class="push-icon-bell">
            <i class="fas fa-bell"></i>
          </div>
          <h2>Activa las Notificaciones üîî</h2>
          <p class="push-subtitle">Recibe alertas importantes en tu m√≥vil</p>
        </div>

        <div class="push-modal-body">
          <div class="push-benefits-list">
            <div class="push-benefit-item">
              <div class="benefit-icon">üéØ</div>
              <div class="benefit-text">
                <strong>Recordatorios de metas</strong>
                <span
                  >Te avisamos cuando est√©s cerca de alcanzar tus
                  objetivos</span
                >
              </div>
            </div>

            <div class="push-benefit-item">
              <div class="benefit-icon">üí∞</div>
              <div class="benefit-text">
                <strong>Alertas de presupuesto</strong>
                <span>Notificaciones si est√°s gastando m√°s de lo planeado</span>
              </div>
            </div>

            <div class="push-benefit-item">
              <div class="benefit-icon">üìä</div>
              <div class="benefit-text">
                <strong>Res√∫menes diarios</strong>
                <span>Recibe un resumen de tus finanzas cada d√≠a</span>
              </div>
            </div>

            <div class="push-benefit-item">
              <div class="benefit-icon">üéÅ</div>
              <div class="benefit-text">
                <strong>Ofertas especiales</strong>
                <span
                  >S√© el primero en conocer promociones y funciones nuevas</span
                >
              </div>
            </div>
          </div>

          <div class="push-privacy-note">
            <i class="fas fa-shield-alt"></i>
            <span
              >Tus datos est√°n seguros. Puedes desactivar las notificaciones en
              cualquier momento.</span
            >
          </div>
        </div>

        <div class="push-modal-footer">
          <button class="btn-push-allow" onclick="handleAllowNotifications()">
            <i class="fas fa-bell"></i>
            Activar Notificaciones
          </button>
          <button class="btn-push-later" onclick="closePushNotificationModal()">
            M√°s tarde
          </button>
        </div>
      </div>
    </div>

    <!-- ============================================ -->
    <!-- MODAL DE BIENVENIDA DE FIN (IA ASSISTANT)   -->
    <!-- ============================================ -->
    <div class="fin-welcome-modal" id="finWelcomeModal">
      <div class="fin-welcome-overlay"></div>
      <div class="fin-welcome-content">
        <button class="fin-welcome-close" onclick="closeFinWelcomeModal()">
          <i class="fas fa-times"></i>
        </button>

        <div class="fin-welcome-header">
          <div class="fin-avatar-large">
            <i class="fas fa-robot"></i>
          </div>
          <h2>¬°Hola! Soy Fin üëã</h2>
          <p class="fin-subtitle">
            Tu asistente financiero personal con inteligencia artificial
          </p>
        </div>

        <div class="fin-welcome-body">
          <div class="fin-feature-card">
            <div class="fin-feature-icon">üí°</div>
            <h3>¬øQu√© puedo hacer por ti?</h3>
            <ul class="fin-feature-list">
              <li>
                <i class="fas fa-check-circle"></i> Configurar tu presupuesto
                personalizado
              </li>
              <li>
                <i class="fas fa-check-circle"></i> Analizar tus gastos y
                patrones
              </li>
              <li>
                <i class="fas fa-check-circle"></i> Ayudarte a alcanzar tus
                metas de ahorro
              </li>
              <li>
                <i class="fas fa-check-circle"></i> Responder preguntas sobre
                finanzas personales
              </li>
              <li>
                <i class="fas fa-check-circle"></i> Darte recomendaciones
                basadas en tus datos
              </li>
            </ul>
          </div>

          <div class="fin-examples-section">
            <h3>üìù Ejemplos de preguntas que puedes hacerme:</h3>
            <div class="fin-examples-grid">
              <button
                class="fin-example-btn"
                onclick="askFinQuestion('¬øC√≥mo puedo ahorrar m√°s dinero cada mes?')"
              >
                <i class="fas fa-piggy-bank"></i>
                <span>¬øC√≥mo puedo ahorrar m√°s?</span>
              </button>
              <button
                class="fin-example-btn"
                onclick="askFinQuestion('Analiza mis gastos del √∫ltimo mes')"
              >
                <i class="fas fa-chart-line"></i>
                <span>Analiza mis gastos</span>
              </button>
              <button
                class="fin-example-btn"
                onclick="askFinQuestion('¬øEn qu√© categor√≠a gasto m√°s dinero?')"
              >
                <i class="fas fa-search-dollar"></i>
                <span>¬øD√≥nde gasto m√°s?</span>
              </button>
              <button
                class="fin-example-btn"
                onclick="askFinQuestion('Dame consejos para reducir gastos')"
              >
                <i class="fas fa-lightbulb"></i>
                <span>Consejos para ahorrar</span>
              </button>
              <button
                class="fin-example-btn"
                onclick="askFinQuestion('¬øC√≥mo puedo crear un presupuesto efectivo?')"
              >
                <i class="fas fa-calculator"></i>
                <span>Crear presupuesto</span>
              </button>
              <button
                class="fin-example-btn"
                onclick="askFinQuestion('¬øCu√°nto deber√≠a ahorrar mensualmente?')"
              >
                <i class="fas fa-question-circle"></i>
                <span>¬øCu√°nto ahorrar?</span>
              </button>
            </div>
          </div>

          <div class="fin-tips-section">
            <div class="fin-tip">
              <i class="fas fa-info-circle"></i>
              <p>
                <strong>Tip:</strong> Puedo analizar tus datos financieros para
                darte recomendaciones personalizadas. Cuanto m√°s uses la app,
                mejores ser√°n mis consejos.
              </p>
            </div>
          </div>
        </div>

        <div class="fin-welcome-footer">
          <button class="btn-fin-start" onclick="startConversationWithFin()">
            <i class="fas fa-comments"></i>
            Empezar conversaci√≥n
          </button>
          <button class="btn-fin-later" onclick="closeFinWelcomeModal()">
            Explorar la app primero
          </button>
        </div>
      </div>
    </div>

    <!-- ============================================ -->
    <!-- INTERFAZ DE CHAT CON FIN (IA ASSISTANT)     -->
    <!-- ============================================ -->
    <div class="section hidden" id="chatInterface">
      <div class="chat-container">
        <div class="chat-header">
          <div class="chat-header-left">
            <div class="fin-avatar-small">
              <i class="fas fa-robot"></i>
            </div>
            <div class="chat-header-info">
              <h2>Fin - Asistente Financiero</h2>
              <p class="chat-status">
                <span class="status-dot"></span>
                Online y listo para ayudarte
              </p>
            </div>
          </div>
          <div class="chat-header-actions">
            <button
              class="btn-icon-chat"
              onclick="showFinHelp()"
              title="Ver ejemplos de preguntas"
            >
              <i class="fas fa-question-circle"></i>
            </button>
            <button
              class="btn-icon-chat"
              onclick="clearChatHistory()"
              title="Limpiar conversaci√≥n"
            >
              <i class="fas fa-trash-alt"></i>
            </button>
            <button
              class="btn-icon-chat"
              onclick="closeChatInterface()"
              title="Cerrar chat"
            >
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>

        <div class="chat-messages" id="chatHistory">
          <!-- Los mensajes se renderizan aqu√≠ din√°micamente -->
        </div>

        <div class="chat-input-container">
          <div class="chat-suggestions" id="chatSuggestions">
            <!-- Sugerencias contextuales aparecer√°n aqu√≠ -->
          </div>
          <form class="chat-input-form" id="chatForm">
            <textarea
              id="chatInput"
              class="chat-textarea"
              placeholder="Escribe tu pregunta o mensaje a Fin..."
              rows="1"
              maxlength="500"
            ></textarea>
            <button type="submit" class="btn-send-chat" title="Enviar mensaje">
              <i class="fas fa-paper-plane"></i>
            </button>
          </form>
          <div class="chat-input-footer">
            <span class="char-counter" id="chatCharCounter">0/500</span>
            <span class="ai-indicator">
              <i class="fas fa-robot"></i>
              Potenciado por IA Gemini
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         MODALES PARA A√ëADIR OPCIONES PERSONALIZADAS
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

    <!-- Modal para a√±adir categor√≠a personalizada -->
    <div class="custom-modal" id="addCategoryModal">
      <div class="custom-modal-overlay"></div>
      <div class="custom-modal-content">
        <div class="custom-modal-header">
          <h3><i class="fas fa-tag"></i> A√±adir Categor√≠a Personalizada</h3>
          <button
            class="custom-modal-close"
            onclick="closeCustomModal('addCategoryModal')"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="custom-modal-body">
          <div class="form-group-premium">
            <label class="form-label-premium">Nombre de la categor√≠a</label>
            <input
              type="text"
              id="newCategoryName"
              class="form-input-premium"
              placeholder="Ej: Mascotas, Educaci√≥n..."
              maxlength="30"
            />
          </div>
          <div class="form-group-premium">
            <label class="form-label-premium">Icono (emoji)</label>
            <div class="emoji-picker-container">
              <input
                type="text"
                id="newCategoryIconForm"
                class="form-input-premium emoji-input"
                placeholder="üéØ"
                maxlength="2"
              />
              <div class="emoji-suggestions">
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newCategoryIconForm', 'üéØ')"
                  >üéØ</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newCategoryIconForm', 'üêæ')"
                  >üêæ</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newCategoryIconForm', 'üìö')"
                  >üìö</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newCategoryIconForm', 'üé®')"
                  >üé®</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newCategoryIconForm', 'üíº')"
                  >üíº</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newCategoryIconForm', 'üè†')"
                  >üè†</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newCategoryIconForm', '‚úàÔ∏è')"
                  >‚úàÔ∏è</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newCategoryIconForm', 'üéÆ')"
                  >üéÆ</span
                >
              </div>
            </div>
          </div>
        </div>
        <div class="custom-modal-footer">
          <button
            class="btn-modal-cancel"
            onclick="closeCustomModal('addCategoryModal')"
          >
            Cancelar
          </button>
          <button class="btn-modal-save" onclick="saveNewCategory()">
            <i class="fas fa-check"></i> Guardar
          </button>
        </div>
      </div>
    </div>

    <!-- Modal para a√±adir necesidad personalizada -->
    <div class="custom-modal" id="addNecessityModal">
      <div class="custom-modal-overlay"></div>
      <div class="custom-modal-content">
        <div class="custom-modal-header">
          <h3><i class="fas fa-chart-line"></i> A√±adir Nivel de Necesidad</h3>
          <button
            class="custom-modal-close"
            onclick="closeCustomModal('addNecessityModal')"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="custom-modal-body">
          <div class="form-group-premium">
            <label class="form-label-premium">Nombre del nivel</label>
            <input
              type="text"
              id="newNecessityName"
              class="form-input-premium"
              placeholder="Ej: Urgente, Opcional..."
              maxlength="30"
            />
          </div>
          <div class="form-group-premium">
            <label class="form-label-premium">Icono (emoji o estrellas)</label>
            <div class="emoji-picker-container">
              <input
                type="text"
                id="newNecessityIcon"
                class="form-input-premium emoji-input"
                placeholder="‚≠ê‚≠ê"
                maxlength="10"
              />
              <div class="emoji-suggestions">
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newNecessityIcon', '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê')"
                  >‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newNecessityIcon', 'üî•')"
                  >üî•</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newNecessityIcon', 'üíé')"
                  >üíé</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newNecessityIcon', '‚úÖ')"
                  >‚úÖ</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newNecessityIcon', '‚ö†Ô∏è')"
                  >‚ö†Ô∏è</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newNecessityIcon', 'üéØ')"
                  >üéØ</span
                >
              </div>
            </div>
          </div>
        </div>
        <div class="custom-modal-footer">
          <button
            class="btn-modal-cancel"
            onclick="closeCustomModal('addNecessityModal')"
          >
            Cancelar
          </button>
          <button class="btn-modal-save" onclick="saveNewNecessity()">
            <i class="fas fa-check"></i> Guardar
          </button>
        </div>
      </div>
    </div>

    <!-- Modal para a√±adir usuario personalizado -->
    <div class="custom-modal" id="addUserModal">
      <div class="custom-modal-overlay"></div>
      <div class="custom-modal-content">
        <div class="custom-modal-header">
          <h3><i class="fas fa-user-plus"></i> A√±adir Usuario Personalizado</h3>
          <button
            class="custom-modal-close"
            onclick="closeCustomModal('addUserModal')"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="custom-modal-body">
          <div class="form-group-premium">
            <label class="form-label-premium">Nombre del usuario</label>
            <input
              type="text"
              id="newUserName"
              class="form-input-premium"
              placeholder="Ej: Mar√≠a, Pedro..."
              maxlength="30"
            />
          </div>
          <div class="form-group-premium">
            <label class="form-label-premium">Icono (emoji)</label>
            <div class="emoji-picker-container">
              <input
                type="text"
                id="newUserIcon"
                class="form-input-premium emoji-input"
                placeholder="üë§"
                maxlength="2"
              />
              <div class="emoji-suggestions">
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newUserIcon', 'üë®')"
                  >üë®</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newUserIcon', 'üë©')"
                  >üë©</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newUserIcon', 'üë¶')"
                  >üë¶</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newUserIcon', 'üëß')"
                  >üëß</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newUserIcon', 'üë∂')"
                  >üë∂</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newUserIcon', 'üë¥')"
                  >üë¥</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newUserIcon', 'üëµ')"
                  >üëµ</span
                >
                <span
                  class="emoji-option"
                  onclick="selectEmoji('newUserIcon', 'üë§')"
                  >üë§</span
                >
              </div>
            </div>
          </div>
        </div>
        <div class="custom-modal-footer">
          <button
            class="btn-modal-cancel"
            onclick="closeCustomModal('addUserModal')"
          >
            Cancelar
          </button>
          <button class="btn-modal-save" onclick="saveNewUser()">
            <i class="fas fa-check"></i> Guardar
          </button>
        </div>
      </div>
    </div>
  </body>
</html>