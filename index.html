<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#6366f1" />

    <!-- SEO Meta Tags -->
    <title>FinanciaPro Suite - Gestor Financiero Personal Inteligente</title>
    <meta
      name="description"
      content="Controla tus finanzas con FinanciaPro Suite: gestor de gastos, metas financieras, análisis inteligente y asistente IA. Gratis, seguro y fácil de usar."
    />
    <meta
      name="keywords"
      content="finanzas personales, control gastos, metas financieras, presupuesto, ahorro, asistente financiero, inteligencia artificial, gestión dinero"
    />
    <meta name="author" content="FinanciaPro Suite" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://financiaprosuite.com" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://financiaprosuite.com/" />
    <meta
      property="og:title"
      content="FinanciaPro Suite - Tu Gestor Financiero Personal"
    />
    <meta
      property="og:description"
      content="Transforma tu relación con el dinero. Controla gastos, establece metas y recibe consejos personalizados con IA."
    />
    <meta
      property="og:image"
      content="https://financiaprosuite.com/assets/og-image.jpg"
    />
    <meta property="og:site_name" content="FinanciaPro Suite" />
    <meta property="og:locale" content="es_ES" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://financiaprosuite.com/" />
    <meta
      name="twitter:title"
      content="FinanciaPro Suite - Gestor Financiero Inteligente"
    />
    <meta
      name="twitter:description"
      content="Controla tus finanzas con herramientas inteligentes y asistente IA personalizado."
    />
    <meta
      name="twitter:image"
      content="https://financiaprosuite.com/assets/twitter-image.jpg"
    />

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- Performance & Security -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Nunito+Sans:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="user-system.css" />
    <link rel="stylesheet" href="store.css" />
    <link rel="stylesheet" href="config.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Navbar -->
    <header class="navbar">
      <div class="navbar__container">
        <div class="navbar__logo">
          <div class="logo-icon">
            <svg
              class="logo-svg"
              viewBox="0 0 40 40"
              xmlns="http://www.w3.org/2000/svg"
            >
              <defs>
                <linearGradient
                  id="logoGradient"
                  x1="0%"
                  y1="0%"
                  x2="100%"
                  y2="100%"
                >
                  <stop
                    offset="0%"
                    style="stop-color: var(--color-primary); stop-opacity: 1"
                  />
                  <stop
                    offset="100%"
                    style="stop-color: var(--color-teal-600); stop-opacity: 1"
                  />
                </linearGradient>
              </defs>
              <!-- Círculo base -->
              <circle
                cx="20"
                cy="20"
                r="18"
                fill="url(#logoGradient)"
                stroke="white"
                stroke-width="2"
              />
              <!-- Gráfico estilizado -->
              <path
                d="M12 28 L16 22 L20 25 L24 18 L28 20"
                stroke="white"
                stroke-width="2.5"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <!-- Puntos de datos -->
              <circle cx="16" cy="22" r="2.5" fill="white" />
              <circle cx="20" cy="25" r="2.5" fill="white" />
              <circle cx="24" cy="18" r="2.5" fill="white" />
              <!-- Símbolo de moneda $ -->
              <text
                x="20"
                y="15"
                text-anchor="middle"
                fill="white"
                font-size="8"
                font-weight="bold"
              >
                $
              </text>
            </svg>
          </div>
          <span class="logo-text">
            <span class="brand-name">Financia</span>
            <span class="brand-suite"
              >Suite Pro <span class="beta-badge">BETA</span></span
            >
          </span>
        </div>
        <button
          class="icon-btn hamburger-menu"
          id="hamburgerBtn"
          aria-label="Abrir menú"
        >
          <i class="fas fa-bars"></i>
        </button>
        <div class="navbar__actions">
          <div
            id="notificationArea"
            class="notifications icon-btn"
            style="position: relative"
          >
            <i id="notificationBell" class="fas fa-bell"></i>
            <span
              id="notificationCount"
              class="notification-badge"
              style="display: none"
            >
              <i class="fas fa-exclamation"></i>
            </span>
          </div>

          <div id="notificationDropdown" class="notification-dropdown hidden">
            <div class="notification-header">
              <h4>Notificaciones</h4>
              <button
                class="notification-header-action"
                id="markAllReadBtn"
                title="Marcar todo como leído"
              >
                <i class="fas fa-check-double"></i>
              </button>
            </div>

            <div class="notification-body" id="notificationBody">
              <div class="notification-list" id="notificationList">
                <!-- Notifications will be rendered here -->
              </div>

              <div class="notification-empty hidden" id="notificationEmpty">
                <div class="notification-empty-icon">
                  <i class="fas fa-bell-slash"></i>
                </div>
                <h5>¡Todo al día!</h5>
                <p>No tienes notificaciones pendientes</p>
              </div>
            </div>

            <div class="notification-footer">
              <button
                class="notification-settings-btn"
                id="notificationSettingsBtn"
                title="Configuración de notificaciones"
              >
                <i class="fas fa-cog"></i>
                <span>Configuración</span>
              </button>
            </div>
          </div>
          <button class="icon-btn" id="settingsBtn" aria-label="Configuración">
            <i class="fas fa-cog"></i>
          </button>
          <button class="icon-btn" id="themeToggle" aria-label="Cambio de tema">
            <i class="fas fa-moon"></i>
          </button>
          <!-- Login Button (shown when not logged in) -->
          <button class="btn btn--primary" id="navbarLoginBtn">
            <i class="fas fa-sign-in-alt"></i>
            <span>Iniciar sesión</span>
          </button>

          <!-- Profile Menu (shown when logged in) -->
          <div
            class="profile-menu-container"
            id="profileMenuContainer"
            style="display: none"
          >
            <button
              class="profile-avatar-btn"
              id="profileAvatarBtn"
              aria-label="Abrir menú de perfil"
            >
              <div class="profile-avatar-wrapper" id="profileAvatarWrapper">
                <!-- Animated ring for Pro users -->
                <div class="profile-ring" id="profileRing">
                  <svg class="profile-ring-svg" viewBox="0 0 60 60">
                    <circle
                      class="profile-ring-track"
                      cx="30"
                      cy="30"
                      r="28"
                      fill="none"
                      stroke-width="2"
                    ></circle>
                    <circle
                      class="profile-ring-progress"
                      cx="30"
                      cy="30"
                      r="28"
                      fill="none"
                      stroke-width="2"
                    ></circle>
                  </svg>
                </div>

                <!-- Avatar image -->
                <img
                  class="profile-avatar"
                  id="profileAvatar"
                  src=""
                  alt="Foto de perfil"
                />

                <!-- Verification badge for Pro users -->
                <div class="profile-verification-badge" id="profileBadge">
                  <i class="fas fa-check"></i>
                </div>
              </div>
            </button>

            <!-- Profile Dropdown Menu -->
            <div class="profile-dropdown hidden" id="profileDropdown">
              <div class="profile-dropdown-header">
                <div class="profile-header-avatar">
                  <img
                    class="profile-header-img"
                    id="profileHeaderImg"
                    src=""
                    alt="Avatar"
                  />
                  <div class="profile-header-badge" id="profileHeaderBadge">
                    <i class="fas fa-crown"></i>
                  </div>
                </div>
                <div class="profile-header-info">
                  <h4 class="profile-name" id="profileName">Usuario</h4>
                  <span class="profile-plan" id="profilePlan">Plan Free</span>
                </div>
              </div>

              <div class="profile-dropdown-menu">
                <button class="profile-menu-item" id="viewProfileBtn">
                  <i class="fas fa-user"></i>
                  <span>Ver Perfil</span>
                </button>
                <button class="profile-menu-item" id="profileSettingsBtn">
                  <i class="fas fa-cog"></i>
                  <span>Configuración</span>
                </button>
                <div class="profile-menu-divider"></div>
                <button
                  class="profile-menu-item profile-menu-logout"
                  id="profileLogoutBtn"
                >
                  <i class="fas fa-sign-out-alt"></i>
                  <span>Cerrar Sesión</span>
                </button>
              </div>

              <div class="profile-dropdown-footer">
                <button class="profile-upgrade-btn" id="profileUpgradeBtn">
                  <i class="fas fa-star"></i>
                  <span>Actualizar a Pro</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar">
      <nav class="sidebar-nav">
        <button class="nav-item active" data-section="dashboard">
          <i class="fas fa-chart-line"></i>
          <span>Dashboard</span>
        </button>
        <button class="nav-item" data-section="expenses">
          <i class="fas fa-plus-circle"></i>
          <span>Registrar Gasto</span>
        </button>
        <button class="nav-item" data-section="goals">
          <i class="fas fa-bullseye"></i>
          <span>Metas Financieras</span>
        </button>
        <button class="nav-item" data-section="budget">
          <i class="fas fa-wallet"></i>
          <span>Presupuesto</span>
        </button>
        <button class="nav-item" data-section="analysis">
          <i class="fas fa-chart-pie"></i>
          <span>Análisis</span>
        </button>
        <button class="nav-item" data-section="achievements">
          <i class="fas fa-trophy"></i>
          <span>Logros</span>
        </button>
        <button class="nav-item" data-section="shopping">
          <i class="fas fa-shopping-cart"></i>
          <span>Lista de Compras</span>
        </button>
        <button
          class="nav-item premium-only"
          data-section="store"
          style="display: none"
        >
          <i class="fas fa-store"></i>
          <span>Tienda</span>
        </button>
        <button class="nav-item" data-section="audit">
          <i class="fas fa-history"></i>
          <span>Historial de Cambios</span>
        </button>
        <button class="nav-item" data-section="config">
          <i class="fas fa-cog"></i>
          <span>Configuración</span>
        </button>
        <button class="nav-item nav-auth" id="sidebarLoginBtn">
          <i class="fas fa-sign-in-alt"></i>
          <span>Iniciar sesión</span>
        </button>
        <button
          class="nav-item nav-auth"
          id="sidebarLogoutBtn"
          style="display: none"
        >
          <i class="fas fa-sign-out-alt"></i>
          <span>Cerrar sesión</span>
        </button>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Dashboard Section -->
      <section id="dashboard" class="section active">
        <div class="section-header">
          <h1>¡Bienvenido a tu asistente financiero!</h1>
          <p>Gestiona tus finanzas de manera inteligente y alcanza tus metas</p>
        </div>
        <!-- Financial Summary -->
        <div class="stats-grid">
          <!-- Tarjeta de Balance Total -->
          <div
            class="stat-card stat-card--primary animate-on-scroll"
            data-animation="fadeInUp"
            data-delay="100"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-wallet stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Balance Total</h3>
              <p class="stat-value" id="totalBalance">$0</p>
              <span class="stat-change">&nbsp;</span>
            </div>
          </div>

          <!-- Tarjeta de Gastos Totales -->
          <div
            class="stat-card stat-card--clickable animate-on-scroll"
            id="totalExpensesCard"
            data-animation="fadeInUp"
            data-delay="200"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-chart-bar stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Gastos Totales</h3>
              <p class="stat-value" id="totalExpenses">$0</p>
              <span class="stat-change negative" id="expensesChange"
                >+0% vs mes anterior</span
              >
            </div>
          </div>

          <!-- Tarjeta de Ahorros -->
          <div
            class="stat-card stat-card--savings animate-on-scroll"
            id="savingsCard"
            data-animation="fadeInUp"
            data-delay="300"
          >
            <div class="stat-icon-wrapper savings-icon-wrapper">
              <div class="savings-progress-ring" id="savingsProgressRing">
                <svg class="progress-circle" width="48" height="48">
                  <circle
                    class="progress-circle-bg"
                    cx="24"
                    cy="24"
                    r="20"
                    fill="none"
                    stroke-width="4"
                  ></circle>
                  <circle
                    class="progress-circle-fill"
                    cx="24"
                    cy="24"
                    r="20"
                    fill="none"
                    stroke-width="4"
                    stroke-dasharray="125.6"
                    stroke-dashoffset="125.6"
                    id="savingsProgressCircle"
                  ></circle>
                </svg>
                <i class="fas fa-piggy-bank stat-icon"></i>
              </div>
            </div>
            <div class="stat-details">
              <div class="savings-header">
                <h3>Ahorros</h3>
                <i class="fas fa-check savings-check" id="savingsCheck"></i>
              </div>
              <p class="stat-value" id="totalSavings">$0</p>
              <span
                class="stat-change savings-progress-text"
                id="savingsProgressText"
                >0% de la meta</span
              >
            </div>
          </div>

          <!-- Tarjeta de Transacciones -->
          <div
            class="stat-card animate-on-scroll"
            data-animation="fadeInUp"
            data-delay="400"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-receipt stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Transacciones</h3>
              <p class="stat-value" id="totalTransactions">0</p>
              <span class="stat-change">Este mes</span>
            </div>
          </div>

          <!-- Tarjeta de Progreso Mensual -->
          <div
            class="stat-card stat-card--progress animate-on-scroll"
            data-animation="fadeInUp"
            data-delay="500"
          >
            <div class="stat-icon-wrapper">
              <i class="fas fa-calendar-alt stat-icon"></i>
            </div>
            <div class="stat-details">
              <h3>Progreso Mensual</h3>
              <p class="stat-value" id="monthlyProgress">75%</p>
              <span class="stat-change positive">Meta alcanzada</span>
            </div>
          </div>
        </div>

        <!-- Premium Interactive Dashboard -->
        <div
          class="premium-dashboard animate-on-scroll"
          data-animation="fadeIn"
          data-delay="600"
        >
          <div class="dashboard-grid">
            <!-- Left Column: Chart -->
            <div
              class="chart-column animate-on-scroll"
              data-animation="slideInLeft"
              data-delay="700"
            >
              <div class="chart-container-premium">
                <div class="chart-header">
                  <h3 class="chart-title">Distribución de Gastos</h3>
                  <div class="chart-subtitle">
                    Análisis detallado de tus finanzas
                  </div>
                </div>
                <div class="burger-chart-wrapper">
                  <canvas id="premiumChart" width="400" height="400"></canvas>
                  <div class="chart-center-info">
                    <div class="total-amount" id="totalAmount">$0</div>
                    <div class="total-label">Total gastado</div>
                  </div>
                </div>
                <div class="chart-legend" id="chartLegend"></div>
              </div>

              <!-- Tendencia de Gastos Chart -->
              <div class="chart-container-premium">
                <div class="chart-header">
                  <h3 class="chart-title">Tendencia de Gastos</h3>
                  <div class="chart-subtitle">Últimos 6 meses</div>
                </div>
                <div class="trend-chart-wrapper">
                  <canvas id="trendChart"></canvas>
                </div>
              </div>
            </div>

            <!-- Right Column: Individual Cards -->
            <div
              class="cards-column animate-on-scroll"
              data-animation="slideInRight"
              data-delay="800"
            >
              <!-- Cash Flow Card -->
              <div class="card">
                <div class="card__header">
                  <h3>Flujo de Caja</h3>
                  <span class="main-value" id="cashFlowTotal">$2,000</span>
                </div>
                <div class="card__body">
                  <div class="progress-bars">
                    <div class="progress-item">
                      <div class="progress-label">
                        <span>Gastos Necesarios</span>
                        <span class="progress-value" id="necessaryValue"
                          >$1,200</span
                        >
                      </div>
                      <div class="progress-bar">
                        <div
                          class="progress-fill necessary"
                          id="necessaryProgress"
                        ></div>
                      </div>
                    </div>
                    <div class="progress-item">
                      <div class="progress-label">
                        <span>Gastos No Necesarios</span>
                        <span class="progress-value" id="unnecessaryValue"
                          >$800</span
                        >
                      </div>
                      <div class="progress-bar">
                        <div
                          class="progress-fill unnecessary"
                          id="unnecessaryProgress"
                        ></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Upcoming Payments Card -->
              <div
                class="card upcoming-payments-card"
                id="upcomingPaymentsCard"
              >
                <div class="card__header">
                  <h3>Próximos Pagos</h3>
                  <span class="payment-count" id="paymentCount"
                    >0 pendientes</span
                  >
                </div>
                <div class="card__body">
                  <div
                    class="payments-scroll-container"
                    id="paymentsScrollContainer"
                  >
                    <div class="payments-list" id="paymentsList">
                      <!-- Payments will be dynamically inserted -->
                      <div class="empty-state-small">
                        <i class="fas fa-money-bill-wave"></i>
                        <p>No hay pagos registrados</p>
                        <p class="empty-state-hint">
                          Configura tus pagos recurrentes en Configuración
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Goals Progress Card -->
              <div class="card">
                <div class="card__header">
                  <h3>Progreso de Metas</h3>
                  <button class="cta-button" id="addGoalBtn">
                    <i class="fas fa-plus"></i> Nueva Meta
                  </button>
                </div>
                <div class="card__body">
                  <div class="goals-summary">
                    <div class="circular-progress">
                      <svg class="progress-ring" width="80" height="80">
                        <circle
                          class="progress-ring-bg"
                          cx="40"
                          cy="40"
                          r="35"
                          stroke-width="6"
                        ></circle>
                        <circle
                          class="progress-ring-fill"
                          cx="40"
                          cy="40"
                          r="35"
                          stroke-width="6"
                          id="goalsProgressRing"
                        ></circle>
                      </svg>
                      <div class="progress-center">
                        <i class="fas fa-piggy-bank"></i>
                      </div>
                    </div>
                    <div class="goals-info">
                      <div class="goals-text" id="goalsProgressText">
                        $4,200 / $6,000
                      </div>
                      <div
                        class="goals-percentage"
                        id="goalsProgressPercentage"
                      >
                        70%
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Quick Access Card -->
              <div class="card">
                <div class="card__header">
                  <h3>Acceso Rápido</h3>
                  <span class="greeting" id="quickAccessGreeting"
                    >¡Hola, Usuario!</span
                  >
                </div>
                <div class="card__body">
                  <div class="quick-access-content">
                    <div class="last-transaction" id="lastTransactionInfo">
                      <div class="transaction-label">Última transacción:</div>
                      <div
                        class="transaction-detail"
                        id="lastTransactionDetail"
                      >
                        <span class="transaction-desc">Sin transacciones</span>
                        <span class="transaction-amount">$0</span>
                      </div>
                    </div>
                    <button class="quick-action-btn" id="quickAddExpenseBtn">
                      <i class="fas fa-plus"></i>
                      <span>Registrar Gasto</span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Bottom Panel: Floating Keywords & Insights -->
          <!-- <div class="insights-panel">
            <div class="floating-keywords">
              <div class="keyword-cloud">
                <span class="keyword" data-delay="0">Ahorro Inteligente</span>
                <span class="keyword" data-delay="200">Control Total</span>
                <span class="keyword" data-delay="400">Metas Claras</span>
                <span class="keyword" data-delay="600">Finanzas Sanas</span>
                <span class="keyword" data-delay="800">Inversión Segura</span>
                <span class="keyword" data-delay="1000">Futuro Próspero</span>
                <span class="keyword" data-delay="1200">Decisiones Sabias</span>
                <span class="keyword" data-delay="1400"
                  >Libertad Financiera</span
                >
              </div>
            </div>

            <div class="insights-cards">
              <div class="insight-card" id="insightCard1">
                <div class="insight-icon">💡</div>
                <div class="insight-content">
                  <h4>Consejo del Día</h4>
                  <p id="dailyTip">
                    Revisa tus gastos semanalmente para mantener el control
                  </p>
                </div>
              </div>

              <div class="insight-card" id="insightCard2">
                <div class="insight-icon">📈</div>
                <div class="insight-content">
                  <h4>Tu Progreso</h4>
                  <p id="progressInsight">
                    Vas por buen camino hacia tus metas
                  </p>
                </div>
              </div>

              <div class="insight-card" id="insightCard3">
                <div class="insight-icon">🎯</div>
                <div class="insight-content">
                  <h4>Próximo Objetivo</h4>
                  <p id="nextGoal">Continúa ahorrando para alcanzar tu meta</p>
                </div>
              </div>
            </div>
          </div> -->
        </div>

        <!-- Brand Carousel Section -->
        <div class="brand-carousel-container">
          <div class="brand-carousel-wrapper">
            <div class="brand-carousel-track" id="brandCarouselTrack">
              <!-- Brand Card 1 -->
              <div class="brand-card">
                <div class="brand-icon gradient-blue">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="brand-content">
                  <h3>Análisis Inteligente</h3>
                  <p>Rastrea y analiza gastos</p>
                </div>
              </div>

              <!-- Brand Card 2 -->
              <div class="brand-card">
                <div class="brand-icon gradient-purple">
                  <i class="fas fa-bullseye"></i>
                </div>
                <div class="brand-content">
                  <h3>Metas Personalizadas</h3>
                  <p>Define objetivos financieros</p>
                </div>
              </div>

              <!-- Brand Card 3 -->
              <div class="brand-card">
                <div class="brand-icon gradient-green">
                  <i class="fas fa-brain"></i>
                </div>
                <div class="brand-content">
                  <h3>IA Financiera</h3>
                  <p>Recomendaciones automáticas</p>
                </div>
              </div>

              <!-- Brand Card 4 -->
              <div class="brand-card">
                <div class="brand-icon gradient-orange">
                  <i class="fas fa-trophy"></i>
                </div>
                <div class="brand-content">
                  <h3>Sistema de Logros</h3>
                  <p>Gamificación motivacional</p>
                </div>
              </div>

              <!-- Brand Card 5 -->
              <div class="brand-card">
                <div class="brand-icon gradient-red">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <div class="brand-content">
                  <h3>Seguridad Total</h3>
                  <p>Protección de grado bancario</p>
                </div>
              </div>

              <!-- Brand Card 6 -->
              <div class="brand-card">
                <div class="brand-icon gradient-teal">
                  <i class="fas fa-mobile-alt"></i>
                </div>
                <div class="brand-content">
                  <h3>Multiplataforma</h3>
                  <p>Sincronización en la nube</p>
                </div>
              </div>

              <!-- Brand Card 7 -->
              <div class="brand-card">
                <div class="brand-icon gradient-pink">
                  <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="brand-content">
                  <h3>Lista Inteligente</h3>
                  <p>Compras organizadas</p>
                </div>
              </div>

              <!-- Brand Card 8 -->
              <div class="brand-card">
                <div class="brand-icon gradient-indigo">
                  <i class="fas fa-chart-pie"></i>
                </div>
                <div class="brand-content">
                  <h3>Visualización</h3>
                  <p>Gráficos interactivos</p>
                </div>
              </div>

              <!-- Duplicate set for infinite scroll -->
              <div class="brand-card">
                <div class="brand-icon gradient-blue">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="brand-content">
                  <h3>Análisis Inteligente</h3>
                  <p>Rastrea y analiza gastos</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-purple">
                  <i class="fas fa-bullseye"></i>
                </div>
                <div class="brand-content">
                  <h3>Metas Personalizadas</h3>
                  <p>Define objetivos financieros</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-green">
                  <i class="fas fa-brain"></i>
                </div>
                <div class="brand-content">
                  <h3>IA Financiera</h3>
                  <p>Recomendaciones automáticas</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-orange">
                  <i class="fas fa-trophy"></i>
                </div>
                <div class="brand-content">
                  <h3>Sistema de Logros</h3>
                  <p>Gamificación motivacional</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-red">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <div class="brand-content">
                  <h3>Seguridad Total</h3>
                  <p>Protección de grado bancario</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-teal">
                  <i class="fas fa-mobile-alt"></i>
                </div>
                <div class="brand-content">
                  <h3>Multiplataforma</h3>
                  <p>Sincronización en la nube</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-pink">
                  <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="brand-content">
                  <h3>Lista Inteligente</h3>
                  <p>Compras organizadas</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-indigo">
                  <i class="fas fa-chart-pie"></i>
                </div>
                <div class="brand-content">
                  <h3>Visualización</h3>
                  <p>Gráficos interactivos</p>
                </div>
              </div>

              <!-- Third set for seamless loop -->
              <div class="brand-card">
                <div class="brand-icon gradient-blue">
                  <i class="fas fa-chart-line"></i>
                </div>
                <div class="brand-content">
                  <h3>Análisis Inteligente</h3>
                  <p>Rastrea y analiza gastos</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-purple">
                  <i class="fas fa-bullseye"></i>
                </div>
                <div class="brand-content">
                  <h3>Metas Personalizadas</h3>
                  <p>Define objetivos financieros</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-green">
                  <i class="fas fa-brain"></i>
                </div>
                <div class="brand-content">
                  <h3>IA Financiera</h3>
                  <p>Recomendaciones automáticas</p>
                </div>
              </div>

              <div class="brand-card">
                <div class="brand-icon gradient-orange">
                  <i class="fas fa-trophy"></i>
                </div>
                <div class="brand-content">
                  <h3>Sistema de Logros</h3>
                  <p>Gamificación motivacional</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- AI Recommendations -->
        <div class="card">
          <div class="card__header">
            <h3>Recomendaciones de Ahorro <i class="fas fa-robot"></i></h3>
          </div>
          <div class="card__body">
            <div id="aiRecommendations"></div>
          </div>
        </div>

        <!-- Recent Transactions -->
        <div class="card">
          <div class="card__header">
            <h3>Transacciones Recientes</h3>
          </div>
          <div class="card__body">
            <div id="recentTransactions"></div>
          </div>
        </div>
      </section>

      <!-- Expense Registration Section - Premium Enterprise -->
      <section id="expenses" class="section">
        <div class="section-header">
          <h1>💳 Registro de Gastos</h1>
          <p>Sistema avanzado de registro con validación inteligente</p>
        </div>

        <!-- Premium Expense Form Card -->
        <div class="expense-form-premium">
          <div class="expense-form-tabs">
            <button class="expense-tab-btn active" data-tab="manual">
              <i class="fas fa-keyboard"></i>
              <span>Manual</span>
            </button>
            <button class="expense-tab-btn" data-tab="quick">
              <i class="fas fa-bolt"></i>
              <span>Rápido</span>
            </button>
            <button class="expense-tab-btn" data-tab="recurring">
              <i class="fas fa-repeat"></i>
              <span>Recurrente</span>
            </button>
          </div>

          <form id="expenseForm" class="expense-form-content">
            <!-- Amount Section - Featured -->
            <div class="expense-amount-section">
              <label class="expense-amount-label">Monto del gasto</label>
              <div class="expense-amount-input-wrapper">
                <span class="expense-currency">$</span>
                <input
                  type="number"
                  id="amount"
                  class="expense-amount-input"
                  placeholder="0.00"
                  step="0.01"
                  min="0"
                  required
                  autofocus
                />
              </div>
              <div class="expense-amount-suggestions" id="amountSuggestions">
                <!-- Dynamic suggestions will be added here -->
              </div>
            </div>

            <!-- Description with Autocomplete -->
            <div class="form-group-premium">
              <label class="form-label-premium">
                <i class="fas fa-align-left"></i>
                Descripción
              </label>
              <div class="input-with-icon">
                <input
                  type="text"
                  id="description"
                  class="form-input-premium"
                  placeholder="¿En qué gastaste?"
                  required
                  autocomplete="off"
                />
                <div
                  class="autocomplete-dropdown hidden"
                  id="descriptionAutocomplete"
                ></div>
              </div>
            </div>

            <!-- Grid Layout for Category and Necessity -->
            <div class="form-grid-2">
              <div class="form-group-premium">
                <label class="form-label-premium">
                  <i class="fas fa-tag"></i>
                  Categoría
                </label>
                <div class="category-selector-premium">
                  <select
                    id="category"
                    class="form-input-premium form-select-premium category-select"
                    required
                  >
                    <option value="">Selecciona categoría</option>
                    <option value="Alimentación" data-icon="🍽️">
                      Alimentación
                    </option>
                    <option value="Transporte" data-icon="🚗">
                      Transporte
                    </option>
                    <option value="Entretenimiento" data-icon="🎬">
                      Entretenimiento
                    </option>
                    <option value="Salud" data-icon="🏥">Salud</option>
                    <option value="Servicios" data-icon="⚡">Servicios</option>
                    <option value="Compras" data-icon="🛍️">Compras</option>
                    <option value="Otros" data-icon="📦">Otros</option>
                  </select>
                </div>
              </div>

              <div class="form-group-premium">
                <label class="form-label-premium">
                  <i class="fas fa-chart-line"></i>
                  Prioridad
                </label>
                <select
                  id="necessity"
                  class="form-input-premium form-select-premium"
                  required
                >
                  <option value="">Nivel de necesidad</option>
                  <option value="Muy Necesario">⭐⭐⭐⭐⭐ Esencial</option>
                  <option value="Necesario">⭐⭐⭐⭐ Necesario</option>
                  <option value="Poco Necesario">⭐⭐⭐ Opcional</option>
                  <option value="No Necesario">⭐⭐ Prescindible</option>
                  <option value="Compra por Impulso">⭐ Impulso</option>
                </select>
              </div>
            </div>

            <!-- Grid Layout for Date and User -->
            <div class="form-grid-2">
              <div class="form-group-premium">
                <label class="form-label-premium">
                  <i class="fas fa-calendar-alt"></i>
                  Fecha
                </label>
                <input
                  type="date"
                  id="date"
                  class="form-input-premium"
                  required
                />
              </div>

              <div class="form-group-premium">
                <label class="form-label-premium">
                  <i class="fas fa-user"></i>
                  Usuario
                </label>
                <select
                  id="user"
                  class="form-input-premium form-select-premium"
                >
                  <option value="">Sin asignar</option>
                  <option value="__add_new__">+ Añadir usuario</option>
                </select>
              </div>
            </div>

            <!-- New User Input (Hidden by default) -->
            <div class="form-group-premium hidden" id="newUserGroup">
              <label class="form-label-premium">
                <i class="fas fa-user-plus"></i>
                Nombre del nuevo usuario
              </label>
              <input
                type="text"
                id="newUserName"
                class="form-input-premium"
                placeholder="Presiona Enter para guardar"
              />
            </div>

            <!-- Budget Impact Alert -->
            <div class="budget-impact-alert hidden" id="budgetImpactAlert">
              <i class="fas fa-exclamation-triangle"></i>
              <span id="budgetImpactText"></span>
            </div>

            <!-- Form Actions -->
            <div class="expense-form-actions">
              <button
                type="button"
                class="btn-expense-secondary"
                id="clearExpenseForm"
              >
                <i class="fas fa-eraser"></i>
                Limpiar
              </button>
              <button type="submit" class="btn-expense-primary">
                <i class="fas fa-check-circle"></i>
                Registrar Gasto
              </button>
            </div>

            <!-- Quick Stats Below Form -->
            <div class="expense-form-stats">
              <div class="form-stat-item">
                <span class="stat-value" id="todayExpensesCount">0</span>
                <span class="stat-label">Hoy</span>
              </div>
              <div class="form-stat-item">
                <span class="stat-value" id="todayExpensesTotal">$0</span>
                <span class="stat-label">Total hoy</span>
              </div>
              <div class="form-stat-item">
                <span class="stat-value" id="monthExpensesTotal">$0</span>
                <span class="stat-label">Este mes</span>
              </div>
            </div>
          </form>
        </div>

        <!-- Expense List -->
        <div class="card">
          <div class="card__header">
            <h3>Historial de Gastos</h3>
          </div>
          <div class="card__body">
            <div id="expenseList"></div>
          </div>
        </div>
      </section>

      <!-- Goals Section -->
      <section id="goals" class="section">
        <div class="section-header">
          <h1>Metas Financieras</h1>
          <p>Define y monitorea tus objetivos de ahorro</p>
        </div>
        <div class="card">
          <div class="card__header">
            <h3>Nueva Meta Financiera</h3>
          </div>
          <div class="card__body">
            <div class="goal-form-container">
              <div class="goal-inspiration-panel" id="goalInspirationPanel">
                <div class="inspiration-image-wrapper">
                  <img
                    id="inspirationImage"
                    src=""
                    alt="Inspiración"
                    class="inspiration-image"
                  />
                  <div class="inspiration-overlay">
                    <p class="inspiration-text">✨ Visualiza tu meta</p>
                  </div>
                </div>
              </div>

              <form id="goalForm">
                <div class="form-grid">
                  <div class="form-group">
                    <label class="form-label" for="goalName"
                      >Nombre de la Meta</label
                    >
                    <input
                      type="text"
                      id="goalName"
                      class="form-control"
                      placeholder="Ej. Vacaciones en la playa"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="goalTarget"
                      >Cantidad Objetivo ($)</label
                    >
                    <input
                      type="number"
                      id="goalTarget"
                      class="form-control"
                      placeholder="1000"
                      step="0.01"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label class="form-label" for="goalDeadline"
                      >Fecha Límite</label
                    >
                    <input
                      type="date"
                      id="goalDeadline"
                      class="form-control"
                      required
                    />
                  </div>
                </div>
                <button type="submit" class="btn btn--primary">
                  <i class="fas fa-target"></i> Crear Meta
                </button>
              </form>
            </div>
          </div>
        </div>

        <!-- Goals List -->
        <div id="goalsList"></div>
      </section>

      <!-- Analysis Section -->
      <section id="analysis" class="section">
        <div class="section-header">
          <h1>Análisis de Gastos</h1>
          <p>Visualiza patrones y tendencias en tus finanzas</p>
        </div>

        <div class="analysis-grid">
          <div class="card radar-chart-card">
            <div class="card__header">
              <h3>Balance Financiero Multidimensional</h3>
              <p>Tu perfil financiero en diferentes categorías</p>
            </div>
            <div class="card__body">
              <div class="radar-chart-container">
                <canvas id="radarChart"></canvas>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card__header">
              <h3>Gastos por Usuario</h3>
            </div>
            <div class="card__body">
              <div
                class="chart-container"
                style="position: relative; height: 300px"
              >
                <canvas id="userExpenseChart"></canvas>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card__header">
              <h3>Necesidad vs No Necesario</h3>
            </div>
            <div class="card__body">
              <div
                class="chart-container"
                style="position: relative; height: 300px"
              >
                <canvas id="necessityChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card__header">
            <h3>Gastos Innecesarios del Mes</h3>
          </div>
          <div class="card__body">
            <div id="unnecessaryExpenses"></div>
          </div>
        </div>
      </section>

      <!-- Shopping List Section -->
      <section id="shopping" class="section">
        <div class="section-header">
          <h1>Lista de Compras</h1>
          <p>Organiza tus compras y controla gastos de mercadería</p>
        </div>
        <div class="card">
          <div class="card__header">
            <h3>Agregar Producto</h3>
          </div>
          <div class="card__body">
            <form id="shoppingForm">
              <div class="form-grid">
                <div class="form-group">
                  <label class="form-label" for="product">Producto</label>
                  <input
                    type="text"
                    id="product"
                    class="form-control"
                    placeholder="Ej. Leche, Pan"
                    required
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="quantity">Cantidad</label>
                  <input
                    type="number"
                    id="quantity"
                    class="form-control"
                    placeholder="1"
                    min="1"
                    required
                  />
                </div>
                <div class="form-group">
                  <label class="form-label" for="necessary"
                    >¿Es necesario?</label
                  >
                  <select id="necessary" class="form-control" required>
                    <option value="">Selecciona</option>
                    <option value="true">Sí</option>
                    <option value="false">No</option>
                  </select>
                </div>
              </div>
              <button type="submit" class="btn btn--primary">
                <i class="fas fa-plus"></i> Agregar Producto
              </button>
            </form>
          </div>
        </div>

        <!-- Shopping List -->
        <div class="card">
          <div class="card__header">
            <h3>Lista Actual</h3>
            <button class="btn btn--secondary btn--sm" id="generateList">
              <i class="fas fa-download"></i> Generar Lista
            </button>
          </div>
          <div class="card__body">
            <div id="shoppingList"></div>
          </div>
        </div>
      </section>

      <!-- Budget Section -->
      <section id="budget" class="section">
        <div class="section-header">
          <h1>💰 Presupuesto Mensual</h1>
          <p>
            Controla tus gastos con el sistema de sobres (Envelope Budgeting)
          </p>
        </div>

        <!-- Budget Summary Card -->
        <div class="card budget-summary-card">
          <div class="card__header">
            <h3>Resumen del Mes</h3>
            <div class="budget-month-selector">
              <button class="btn btn--icon" id="prevMonthBtn">
                <i class="fas fa-chevron-left"></i>
              </button>
              <span id="currentBudgetMonth" class="budget-month-label"></span>
              <button class="btn btn--icon" id="nextMonthBtn">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
          <div class="card__body">
            <div class="budget-summary-stats">
              <div class="budget-stat">
                <div class="budget-stat-icon budget-stat-icon--primary">
                  <i class="fas fa-hand-holding-usd"></i>
                </div>
                <div class="budget-stat-content">
                  <span class="budget-stat-label">Presupuesto Total</span>
                  <span class="budget-stat-value" id="totalBudgetLimit"
                    >$0</span
                  >
                </div>
              </div>
              <div class="budget-stat">
                <div class="budget-stat-icon budget-stat-icon--warning">
                  <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="budget-stat-content">
                  <span class="budget-stat-label">Gastado</span>
                  <span class="budget-stat-value" id="totalBudgetSpent"
                    >$0</span
                  >
                </div>
              </div>
              <div class="budget-stat">
                <div class="budget-stat-icon budget-stat-icon--success">
                  <i class="fas fa-piggy-bank"></i>
                </div>
                <div class="budget-stat-content">
                  <span class="budget-stat-label">Disponible</span>
                  <span class="budget-stat-value" id="totalBudgetAvailable"
                    >$0</span
                  >
                </div>
              </div>
            </div>
            <div class="budget-overall-progress">
              <div class="progress-header">
                <span>Progreso General</span>
                <span id="overallBudgetPercentage">0%</span>
              </div>
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  id="overallBudgetProgress"
                  style="width: 0%"
                ></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Budget Setup Card -->
        <div class="card">
          <div class="card__header">
            <h3>Configurar Presupuesto</h3>
            <button class="btn btn--secondary btn--sm" id="resetBudgetBtn">
              <i class="fas fa-redo"></i> Restablecer
            </button>
          </div>
          <div class="card__body">
            <form id="budgetSetupForm">
              <div class="budget-setup-grid">
                <div class="budget-category-item">
                  <div class="budget-category-header">
                    <i
                      class="fas fa-utensils category-icon category-icon--food"
                    ></i>
                    <span class="category-name">Alimentación</span>
                  </div>
                  <div class="form-group">
                    <input
                      type="number"
                      class="form-control"
                      id="budget-Alimentación"
                      placeholder="$0"
                      min="0"
                      step="0.01"
                    />
                  </div>
                </div>

                <div class="budget-category-item">
                  <div class="budget-category-header">
                    <i
                      class="fas fa-bus category-icon category-icon--transport"
                    ></i>
                    <span class="category-name">Transporte</span>
                  </div>
                  <div class="form-group">
                    <input
                      type="number"
                      class="form-control"
                      id="budget-Transporte"
                      placeholder="$0"
                      min="0"
                      step="0.01"
                    />
                  </div>
                </div>

                <div class="budget-category-item">
                  <div class="budget-category-header">
                    <i
                      class="fas fa-film category-icon category-icon--entertainment"
                    ></i>
                    <span class="category-name">Entretenimiento</span>
                  </div>
                  <div class="form-group">
                    <input
                      type="number"
                      class="form-control"
                      id="budget-Entretenimiento"
                      placeholder="$0"
                      min="0"
                      step="0.01"
                    />
                  </div>
                </div>

                <div class="budget-category-item">
                  <div class="budget-category-header">
                    <i
                      class="fas fa-heartbeat category-icon category-icon--health"
                    ></i>
                    <span class="category-name">Salud</span>
                  </div>
                  <div class="form-group">
                    <input
                      type="number"
                      class="form-control"
                      id="budget-Salud"
                      placeholder="$0"
                      min="0"
                      step="0.01"
                    />
                  </div>
                </div>

                <div class="budget-category-item">
                  <div class="budget-category-header">
                    <i
                      class="fas fa-wrench category-icon category-icon--services"
                    ></i>
                    <span class="category-name">Servicios</span>
                  </div>
                  <div class="form-group">
                    <input
                      type="number"
                      class="form-control"
                      id="budget-Servicios"
                      placeholder="$0"
                      min="0"
                      step="0.01"
                    />
                  </div>
                </div>

                <div class="budget-category-item">
                  <div class="budget-category-header">
                    <i
                      class="fas fa-shopping-bag category-icon category-icon--shopping"
                    ></i>
                    <span class="category-name">Compras</span>
                  </div>
                  <div class="form-group">
                    <input
                      type="number"
                      class="form-control"
                      id="budget-Compras"
                      placeholder="$0"
                      min="0"
                      step="0.01"
                    />
                  </div>
                </div>

                <div class="budget-category-item">
                  <div class="budget-category-header">
                    <i
                      class="fas fa-ellipsis-h category-icon category-icon--other"
                    ></i>
                    <span class="category-name">Otros</span>
                  </div>
                  <div class="form-group">
                    <input
                      type="number"
                      class="form-control"
                      id="budget-Otros"
                      placeholder="$0"
                      min="0"
                      step="0.01"
                    />
                  </div>
                </div>
              </div>
              <button type="submit" class="btn btn--primary">
                <i class="fas fa-save"></i> Guardar Presupuesto
              </button>
            </form>
          </div>
        </div>

        <!-- Budget Categories Progress -->
        <div class="card">
          <div class="card__header">
            <h3>Estado por Categoría</h3>
          </div>
          <div class="card__body">
            <div id="budgetCategoriesProgress">
              <!-- Se llenará dinámicamente -->
            </div>
          </div>
        </div>
      </section>

      <!-- Achievements Section -->
      <section id="achievements" class="section">
        <div class="section-header">
          <h1>🏆 Logros y Insignias</h1>
          <p>Desbloquea insignias mientras dominas tus finanzas</p>
        </div>

        <div class="achievements-stats">
          <div class="achievement-stat-card">
            <div class="stat-icon">
              <i class="fas fa-medal"></i>
            </div>
            <div class="stat-content">
              <span class="stat-number" id="unlockedCount">0</span>
              <span class="stat-label">Logros Desbloqueados</span>
            </div>
          </div>
          <div class="achievement-stat-card">
            <div class="stat-icon">
              <i class="fas fa-percentage"></i>
            </div>
            <div class="stat-content">
              <span class="stat-number" id="progressPercentage">0%</span>
              <span class="stat-label">Progreso Total</span>
            </div>
          </div>
        </div>

        <div class="achievements-grid" id="achievementsGrid">
          <!-- Las tarjetas de logros se generarán dinámicamente aquí -->
        </div>
      </section>

      <!-- Store Section -->
      <section id="store" class="section">
        <div class="section-header">
          <h1>Tienda de Estilos</h1>
          <p>Personaliza la apariencia de tus gráficos y avatar</p>
        </div>

        <div class="store-container">
          <div class="store-header">
            <div class="coins-display">
              <i class="fas fa-coins"></i>
              <span id="userCoins">0</span> monedas
            </div>
          </div>

          <!-- Avatar Gallery Section -->
          <div class="store-section">
            <div class="store-section-header">
              <h2><i class="fas fa-user-circle"></i> Galería de Avatares</h2>
              <p>Elige tu avatar personalizado</p>
            </div>
            <div class="avatar-gallery" id="avatarGallery">
              <div class="avatar-option" data-avatar="avatar-1">
                <div class="avatar-icon gradient-blue">
                  <i class="fas fa-user-astronaut"></i>
                </div>
                <span class="avatar-name">Astronauta</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-2">
                <div class="avatar-icon gradient-purple">
                  <i class="fas fa-user-ninja"></i>
                </div>
                <span class="avatar-name">Ninja</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-3">
                <div class="avatar-icon gradient-green">
                  <i class="fas fa-user-tie"></i>
                </div>
                <span class="avatar-name">Ejecutivo</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-4">
                <div class="avatar-icon gradient-orange">
                  <i class="fas fa-user-graduate"></i>
                </div>
                <span class="avatar-name">Graduado</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-5">
                <div class="avatar-icon gradient-red">
                  <i class="fas fa-user-secret"></i>
                </div>
                <span class="avatar-name">Agente</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-6">
                <div class="avatar-icon gradient-teal">
                  <i class="fas fa-user-md"></i>
                </div>
                <span class="avatar-name">Doctor</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-7">
                <div class="avatar-icon gradient-pink">
                  <i class="fas fa-user-crown"></i>
                </div>
                <span class="avatar-name">Realeza</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-8">
                <div class="avatar-icon gradient-indigo">
                  <i class="fas fa-user-robot"></i>
                </div>
                <span class="avatar-name">Robot</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-9">
                <div class="avatar-icon gradient-yellow">
                  <i class="fas fa-user-shield"></i>
                </div>
                <span class="avatar-name">Guardián</span>
              </div>
              <div class="avatar-option" data-avatar="avatar-10">
                <div class="avatar-icon gradient-cyan">
                  <i class="fas fa-user-check"></i>
                </div>
                <span class="avatar-name">Pro</span>
              </div>
            </div>
          </div>

          <!-- Chart Styles Section -->
          <div class="store-section">
            <div class="store-section-header">
              <h2><i class="fas fa-palette"></i> Estilos de Gráficos</h2>
              <p>Cambia los colores de tus gráficos</p>
            </div>
            <div class="store-grid" id="storeGrid">
              <!-- Las tarjetas de productos se generarán dinámicamente aquí -->
            </div>
          </div>
        </div>
      </section>

      <!-- Audit History Section -->
      <section id="audit" class="section">
        <div class="section-header">
          <h1>Historial de Cambios</h1>
          <p>Registro completo de todas las modificaciones realizadas</p>
        </div>

        <div class="audit-container">
          <!-- Filtros de auditoría -->
          <div class="audit-filters">
            <div class="filter-group">
              <label for="auditTypeFilter">Tipo de cambio</label>
              <div class="input-group">
                <i class="fas fa-filter"></i>
                <select id="auditTypeFilter" class="form-select">
                  <option value="all">📋 Todos los cambios</option>
                  <option value="expense_added">➕ Gasto añadido</option>
                  <option value="expense_edited">✏️ Gasto editado</option>
                  <option value="expense_deleted">🗑️ Gasto eliminado</option>
                  <option value="goal_added">🎯 Meta añadida</option>
                  <option value="goal_edited">✏️ Meta editada</option>
                  <option value="goal_deleted">🗑️ Meta eliminada</option>
                  <option value="payment_added">💳 Pago añadido</option>
                  <option value="payment_deleted">🗑️ Pago eliminado</option>
                  <option value="shopping_added">🛒 Compra añadida</option>
                  <option value="shopping_deleted">🗑️ Compra eliminada</option>
                </select>
              </div>
            </div>
            <div class="filter-group">
              <label for="auditDaysFilter">Últimos días</label>
              <div class="input-group">
                <i class="fas fa-calendar-alt"></i>
                <select id="auditDaysFilter" class="form-select">
                  <option value="all">🗓️ Todos los registros</option>
                  <option value="1">Hoy</option>
                  <option value="3">Últimos 3 días</option>
                  <option value="7" selected>Últimos 7 días</option>
                  <option value="14">Últimos 14 días</option>
                  <option value="30">Últimos 30 días</option>
                  <option value="60">Últimos 2 meses</option>
                  <option value="90">Últimos 3 meses</option>
                </select>
              </div>
            </div>
            <button class="btn btn--secondary" id="clearAuditFilters">
              <i class="fas fa-times"></i> Limpiar filtros
            </button>
          </div>

          <!-- Lista de cambios -->
          <div class="audit-list" id="auditList">
            <div class="audit-empty">
              <i class="fas fa-history"></i>
              <p>No hay cambios registrados</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Configuration Section -->
      <section id="config" class="section">
        <div class="section-header">
          <h1>⚙️ Configuración</h1>
          <p>Gestiona tu cuenta y personaliza tu experiencia financiera</p>
        </div>

        <!-- Premium Settings Layout -->
        <div class="settings-layout">
          <!-- Settings Sidebar Navigation -->
          <aside class="settings-sidebar">
            <nav class="settings-nav">
              <button
                class="settings-nav-item active"
                data-settings-tab="profile"
              >
                <div class="settings-nav-icon">
                  <i class="fas fa-user-circle"></i>
                </div>
                <div class="settings-nav-content">
                  <span class="settings-nav-title">Perfil</span>
                  <span class="settings-nav-subtitle"
                    >Información personal</span
                  >
                </div>
                <i class="fas fa-chevron-right settings-nav-arrow"></i>
              </button>

              <button class="settings-nav-item" data-settings-tab="account">
                <div class="settings-nav-icon">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <div class="settings-nav-content">
                  <span class="settings-nav-title">Cuenta y seguridad</span>
                  <span class="settings-nav-subtitle"
                    >Contraseñas y acceso</span
                  >
                </div>
                <i class="fas fa-chevron-right settings-nav-arrow"></i>
              </button>

              <button class="settings-nav-item" data-settings-tab="financial">
                <div class="settings-nav-icon">
                  <i class="fas fa-wallet"></i>
                </div>
                <div class="settings-nav-content">
                  <span class="settings-nav-title">Gestión financiera</span>
                  <span class="settings-nav-subtitle">Ahorros y pagos</span>
                </div>
                <i class="fas fa-chevron-right settings-nav-arrow"></i>
              </button>

              <button class="settings-nav-item" data-settings-tab="appearance">
                <div class="settings-nav-icon">
                  <i class="fas fa-palette"></i>
                </div>
                <div class="settings-nav-content">
                  <span class="settings-nav-title">Apariencia</span>
                  <span class="settings-nav-subtitle"
                    >Tema y preferencias visuales</span
                  >
                </div>
                <i class="fas fa-chevron-right settings-nav-arrow"></i>
              </button>

              <button class="settings-nav-item" data-settings-tab="data">
                <div class="settings-nav-icon">
                  <i class="fas fa-database"></i>
                </div>
                <div class="settings-nav-content">
                  <span class="settings-nav-title">Datos y privacidad</span>
                  <span class="settings-nav-subtitle"
                    >Exportar, importar, backup</span
                  >
                </div>
                <i class="fas fa-chevron-right settings-nav-arrow"></i>
              </button>

              <button class="settings-nav-item" data-settings-tab="advanced">
                <div class="settings-nav-icon">
                  <i class="fas fa-cogs"></i>
                </div>
                <div class="settings-nav-content">
                  <span class="settings-nav-title">Avanzado</span>
                  <span class="settings-nav-subtitle"
                    >Desarrollador y debug</span
                  >
                </div>
                <i class="fas fa-chevron-right settings-nav-arrow"></i>
              </button>
            </nav>
          </aside>

          <!-- Settings Content Area -->
          <div class="settings-content">
            <!-- Profile Tab -->
            <div class="settings-tab active" id="settings-profile">
              <div class="settings-section">
                <div class="settings-section-header">
                  <h2>Información personal</h2>
                  <p>Actualiza tu perfil y preferencias de cuenta</p>
                </div>

                <div class="settings-card">
                  <div class="profile-avatar-section">
                    <div class="current-avatar" id="currentProfileAvatar">
                      <div class="avatar-preview">
                        <i class="fas fa-user"></i>
                      </div>
                      <button class="avatar-edit-badge" id="changeAvatarBtn">
                        <i class="fas fa-camera"></i>
                      </button>
                    </div>
                    <div class="profile-info">
                      <h4 id="profileUserName">Usuario</h4>
                      <p class="profile-email">usuario@financiapro.com</p>
                      <span class="profile-badge">
                        <i class="fas fa-crown"></i> Usuario activo
                      </span>
                    </div>
                  </div>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Detalles de la cuenta</h3>
                  </div>
                  <div class="settings-card-body">
                    <div class="form-group-premium">
                      <label class="form-label-premium"
                        >Nombre de usuario</label
                      >
                      <input
                        type="text"
                        class="form-input-premium"
                        id="profileNameInput"
                        placeholder="Ingresa tu nombre"
                      />
                      <span class="form-hint"
                        >Este nombre aparecerá en tus reportes y resúmenes</span
                      >
                    </div>

                    <div class="form-group-premium">
                      <label class="form-label-premium"
                        >Ingresos mensuales</label
                      >
                      <div class="input-with-icon">
                        <i class="fas fa-dollar-sign input-icon-left"></i>
                        <input
                          type="number"
                          class="form-input-premium input-with-padding-left"
                          id="monthlyIncomeInput"
                          placeholder="0.00"
                          step="0.01"
                        />
                      </div>
                      <span class="form-hint"
                        >Ayuda a calcular tu capacidad de ahorro mensual</span
                      >
                    </div>

                    <div class="form-actions-premium">
                      <button class="btn-premium btn-premium-secondary">
                        <i class="fas fa-times"></i> Cancelar
                      </button>
                      <button
                        class="btn-premium btn-premium-primary"
                        id="saveProfileBtn"
                      >
                        <i class="fas fa-check"></i> Guardar cambios
                      </button>
                    </div>
                  </div>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Estadísticas de uso</h3>
                  </div>
                  <div class="settings-card-body">
                    <div class="stats-grid-premium">
                      <div class="stat-item-premium">
                        <i class="fas fa-receipt stat-icon"></i>
                        <div class="stat-content">
                          <span class="stat-value" id="totalExpensesCount"
                            >0</span
                          >
                          <span class="stat-label">Gastos registrados</span>
                        </div>
                      </div>
                      <div class="stat-item-premium">
                        <i class="fas fa-bullseye stat-icon"></i>
                        <div class="stat-content">
                          <span class="stat-value" id="totalGoalsCount">0</span>
                          <span class="stat-label">Metas creadas</span>
                        </div>
                      </div>
                      <div class="stat-item-premium">
                        <i class="fas fa-calendar stat-icon"></i>
                        <div class="stat-content">
                          <span class="stat-value" id="accountAge">0</span>
                          <span class="stat-label">Días activo</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Account Tab -->
            <div class="settings-tab" id="settings-account">
              <div class="settings-section">
                <div class="settings-section-header">
                  <h2>Cuenta y seguridad</h2>
                  <p>Gestiona tu acceso y configuración de seguridad</p>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Tipo de cuenta</h3>
                  </div>
                  <div class="settings-card-body">
                    <div class="account-badge" id="configAccountBadge">
                      <i class="fas fa-user"></i>
                      <span id="configAccountTypeText">Cuenta Personal</span>
                    </div>
                    <p
                      class="account-description"
                      id="configAccountDescription"
                    >
                      Tu cuenta personal para el control de finanzas
                      individuales.
                    </p>
                    <button
                      class="btn-premium btn-premium-outline"
                      id="configSwitchAccountBtn"
                    >
                      <i class="fas fa-exchange-alt"></i> Cambiar tipo de cuenta
                    </button>
                  </div>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Seguridad</h3>
                  </div>
                  <div class="settings-card-body">
                    <div class="settings-list">
                      <div class="settings-list-item">
                        <div class="settings-list-icon">
                          <i class="fas fa-key"></i>
                        </div>
                        <div class="settings-list-content">
                          <span class="settings-list-title">Contraseña</span>
                          <span class="settings-list-subtitle">••••••••</span>
                        </div>
                        <button
                          class="btn-premium btn-premium-sm"
                          id="configChangePasswordBtn"
                        >
                          Cambiar
                        </button>
                      </div>

                      <div class="settings-list-item">
                        <div class="settings-list-icon">
                          <i class="fas fa-lock"></i>
                        </div>
                        <div class="settings-list-content">
                          <span class="settings-list-title"
                            >Autenticación de dos factores</span
                          >
                          <span class="settings-list-subtitle"
                            >Seguridad adicional para tu cuenta</span
                          >
                        </div>
                        <label class="toggle-switch-premium">
                          <input type="checkbox" id="twoFactorToggle" />
                          <span class="toggle-slider-premium"></span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>

                <div
                  class="settings-card config-invite-card"
                  id="configInviteSection"
                >
                  <div class="settings-card-header">
                    <h3>Compartir cuenta</h3>
                  </div>
                  <div class="settings-card-body">
                    <div class="invite-card-premium">
                      <div class="invite-icon-premium">
                        <i class="fas fa-user-plus"></i>
                      </div>
                      <div class="invite-content-premium">
                        <h5>Invitar a un socio</h5>
                        <p>
                          Comparte el control financiero con otra persona de
                          confianza
                        </p>
                      </div>
                      <button
                        class="btn-premium btn-premium-primary"
                        id="configInvitePartnerBtn"
                      >
                        <i class="fas fa-share"></i> Generar invitación
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Financial Management Tab -->
            <div class="settings-tab" id="settings-financial">
              <div class="settings-section">
                <div class="settings-section-header">
                  <h2>Gestión financiera</h2>
                  <p>Administra tus ahorros y pagos recurrentes</p>
                </div>

                <!-- Savings Management Card -->
                <div class="settings-card savings-config-card">
                  <div class="settings-card-header">
                    <div class="card-header-content">
                      <div>
                        <h3>Gestión de Ahorros</h3>
                        <p>Organiza tus ahorros por fuente y propósito</p>
                      </div>
                      <button
                        class="btn-premium btn-premium-primary"
                        id="addSavingsBtn"
                      >
                        <i class="fas fa-plus"></i> Añadir fuente de ahorro
                      </button>
                    </div>
                  </div>
                  <div class="settings-card-body">
                    <!-- Summary First -->
                    <div class="savings-summary">
                      <div class="summary-item">
                        <i class="fas fa-piggy-bank summary-icon"></i>
                        <div>
                          <span class="summary-label">Total ahorrado</span>
                          <span class="summary-value" id="totalSavingsAmount"
                            >$0</span
                          >
                        </div>
                      </div>
                      <div class="summary-item">
                        <i class="fas fa-wallet summary-icon"></i>
                        <div>
                          <span class="summary-label">Fuentes activas</span>
                          <span class="summary-value" id="totalSavingsSources"
                            >0</span
                          >
                        </div>
                      </div>
                    </div>

                    <!-- List of Savings -->
                    <div id="savingsAccountsList" class="savings-accounts-list">
                      <div class="empty-state-small">
                        <i class="fas fa-wallet"></i>
                        <p>No hay fuentes de ahorro registradas</p>
                        <button
                          class="btn-premium btn-premium-outline"
                          id="addSavingsBtnEmpty"
                        >
                          <i class="fas fa-plus"></i> Añadir tu primera fuente
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Recurring Payments Management Card -->
                <div class="settings-card payments-config-card">
                  <div class="settings-card-header">
                    <div class="card-header-content">
                      <div>
                        <h3>Próximos Pagos</h3>
                        <p>Gestiona tus pagos recurrentes mensuales</p>
                      </div>
                      <button
                        class="btn-premium btn-premium-primary"
                        id="addPaymentBtn"
                      >
                        <i class="fas fa-plus"></i> Añadir pago recurrente
                      </button>
                    </div>
                  </div>
                  <div class="settings-card-body">
                    <!-- Summary First -->
                    <div class="payments-summary">
                      <div class="summary-item">
                        <i class="fas fa-file-invoice-dollar summary-icon"></i>
                        <div>
                          <span class="summary-label"
                            >Total mensual estimado</span
                          >
                          <span class="summary-value" id="totalMonthlyPayments"
                            >$0</span
                          >
                        </div>
                      </div>
                      <div class="summary-item">
                        <i class="fas fa-list-check summary-icon"></i>
                        <div>
                          <span class="summary-label"
                            >Servicios registrados</span
                          >
                          <span class="summary-value" id="totalPaymentServices"
                            >0</span
                          >
                        </div>
                      </div>
                    </div>

                    <!-- List of Payments -->
                    <div id="recurringPaymentsList" class="payments-list">
                      <div class="empty-state-small">
                        <i class="fas fa-money-bill-wave"></i>
                        <p>No hay pagos recurrentes registrados</p>
                        <button
                          class="btn-premium btn-premium-outline"
                          id="addPaymentBtnEmpty"
                        >
                          <i class="fas fa-plus"></i> Añadir tu primer pago
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Appearance Tab -->
            <div class="settings-tab" id="settings-appearance">
              <div class="settings-section">
                <div class="settings-section-header">
                  <h2>Apariencia</h2>
                  <p>Personaliza la interfaz y estilos visuales</p>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Tema de la aplicación</h3>
                  </div>
                  <div class="settings-card-body">
                    <div class="theme-options">
                      <button class="theme-option active" data-theme="light">
                        <div class="theme-preview theme-light">
                          <div class="theme-circle"></div>
                          <div class="theme-circle"></div>
                          <div class="theme-circle"></div>
                        </div>
                        <span>Claro</span>
                      </button>
                      <button class="theme-option" data-theme="dark">
                        <div class="theme-preview theme-dark">
                          <div class="theme-circle"></div>
                          <div class="theme-circle"></div>
                          <div class="theme-circle"></div>
                        </div>
                        <span>Oscuro</span>
                      </button>
                      <button class="theme-option" data-theme="auto">
                        <div class="theme-preview theme-auto">
                          <div class="theme-circle"></div>
                          <div class="theme-circle"></div>
                          <div class="theme-circle"></div>
                        </div>
                        <span>Automático</span>
                      </button>
                    </div>
                  </div>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Estilo de gráficos</h3>
                  </div>
                  <div class="settings-card-body">
                    <div
                      class="current-chart-style"
                      id="configCurrentChartStyle"
                    >
                      <div class="chart-style-preview">
                        <div class="mini-chart-dots">
                          <div
                            class="chart-dot"
                            style="background: var(--color-primary)"
                          ></div>
                          <div
                            class="chart-dot"
                            style="background: var(--color-secondary)"
                          ></div>
                          <div
                            class="chart-dot"
                            style="background: var(--color-accent)"
                          ></div>
                        </div>
                      </div>
                      <div class="chart-style-info">
                        <span class="chart-style-name" id="configChartStyleName"
                          >Clásico</span
                        >
                        <p>Colores tradicionales y elegantes</p>
                      </div>
                      <button
                        class="btn-premium btn-premium-outline"
                        id="configChangeChartStyleBtn"
                      >
                        <i class="fas fa-paint-brush"></i> Cambiar
                      </button>
                    </div>
                  </div>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Preferencias de interfaz</h3>
                  </div>
                  <div class="settings-card-body">
                    <div class="settings-list">
                      <div class="settings-list-item">
                        <div class="settings-list-icon">
                          <i class="fas fa-magic"></i>
                        </div>
                        <div class="settings-list-content">
                          <span class="settings-list-title">Animaciones</span>
                          <span class="settings-list-subtitle"
                            >Efectos de transición y animaciones</span
                          >
                        </div>
                        <label class="toggle-switch-premium">
                          <input
                            type="checkbox"
                            id="animationsToggle"
                            checked
                          />
                          <span class="toggle-slider-premium"></span>
                        </label>
                      </div>

                      <div class="settings-list-item">
                        <div class="settings-list-icon">
                          <i class="fas fa-bell"></i>
                        </div>
                        <div class="settings-list-content">
                          <span class="settings-list-title"
                            >Notificaciones de metas</span
                          >
                          <span class="settings-list-subtitle"
                            >Recordatorios de progreso de objetivos</span
                          >
                        </div>
                        <label class="toggle-switch-premium">
                          <input
                            type="checkbox"
                            id="goalNotificationsToggle"
                            checked
                          />
                          <span class="toggle-slider-premium"></span>
                        </label>
                      </div>

                      <div class="settings-list-item">
                        <div class="settings-list-icon">
                          <i class="fas fa-layer-group"></i>
                        </div>
                        <div class="settings-list-content">
                          <span class="settings-list-title"
                            >Modo de demostración</span
                          >
                          <span class="settings-list-subtitle"
                            >Datos de ejemplo para nuevos usuarios</span
                          >
                        </div>
                        <label class="toggle-switch-premium">
                          <input type="checkbox" id="demoModeToggle" />
                          <span class="toggle-slider-premium"></span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Data & Privacy Tab -->
            <div class="settings-tab" id="settings-data">
              <div class="settings-section">
                <div class="settings-section-header">
                  <h2>Datos y privacidad</h2>
                  <p>Gestiona tus datos, respaldos y privacidad</p>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Exportar datos</h3>
                    <p>Descarga una copia de tu información</p>
                  </div>
                  <div class="settings-card-body">
                    <div class="export-actions">
                      <button
                        class="btn-premium btn-premium-outline"
                        id="exportJSONBtn"
                      >
                        <i class="fas fa-file-code"></i> Exportar como JSON
                      </button>
                      <button
                        class="btn-premium btn-premium-outline"
                        id="exportCSVBtn"
                      >
                        <i class="fas fa-file-csv"></i> Exportar como CSV
                      </button>
                    </div>
                    <p class="form-hint" style="margin-top: var(--space-12)">
                      Los archivos incluyen gastos, metas, presupuestos y
                      configuraciones
                    </p>
                  </div>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Importar datos</h3>
                    <p>Restaura o migra información desde un archivo</p>
                  </div>
                  <div class="settings-card-body">
                    <input
                      type="file"
                      id="importFileInput"
                      accept=".json"
                      style="display: none"
                    />
                    <button
                      class="btn-premium btn-premium-outline"
                      id="importJSONBtn"
                    >
                      <i class="fas fa-file-upload"></i> Importar desde JSON
                    </button>
                    <p class="form-hint" style="margin-top: var(--space-12)">
                      Solo archivos JSON exportados desde esta aplicación
                    </p>
                  </div>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Sincronización en la nube</h3>
                  </div>
                  <div class="settings-card-body">
                    <div class="settings-list">
                      <div class="settings-list-item">
                        <div class="settings-list-icon">
                          <i class="fas fa-cloud"></i>
                        </div>
                        <div class="settings-list-content">
                          <span class="settings-list-title"
                            >Auto-sincronización</span
                          >
                          <span class="settings-list-subtitle"
                            >Respaldar automáticamente en Firebase</span
                          >
                        </div>
                        <label class="toggle-switch-premium">
                          <input type="checkbox" id="autoSyncToggle" checked />
                          <span class="toggle-slider-premium"></span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="settings-card settings-card-danger">
                  <div class="settings-card-header">
                    <h3>Zona de peligro</h3>
                  </div>
                  <div class="settings-card-body">
                    <div class="settings-list">
                      <div class="settings-list-item">
                        <div class="settings-list-content">
                          <span class="settings-list-title"
                            >Borrar todos los datos</span
                          >
                          <span class="settings-list-subtitle"
                            >Esta acción no se puede deshacer</span
                          >
                        </div>
                        <button
                          class="btn-premium btn-premium-danger"
                          id="deleteAllDataBtn"
                        >
                          <i class="fas fa-trash"></i> Borrar todo
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Advanced Tab -->
            <div class="settings-tab" id="settings-advanced">
              <div class="settings-section">
                <div class="settings-section-header">
                  <h2>Configuración avanzada</h2>
                  <p>Opciones para usuarios avanzados</p>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Modo desarrollador</h3>
                  </div>
                  <div class="settings-card-body">
                    <div class="settings-list">
                      <div class="settings-list-item">
                        <div class="settings-list-icon">
                          <i class="fas fa-code"></i>
                        </div>
                        <div class="settings-list-content">
                          <span class="settings-list-title">Modo debug</span>
                          <span class="settings-list-subtitle"
                            >Mostrar logs en consola del navegador</span
                          >
                        </div>
                        <label class="toggle-switch-premium">
                          <input type="checkbox" id="debugModeToggle" />
                          <span class="toggle-slider-premium"></span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Información del sistema</h3>
                  </div>
                  <div class="settings-card-body">
                    <div class="info-grid">
                      <div class="info-item">
                        <span class="info-label">Versión de la app</span>
                        <span class="info-value">2.1.0</span>
                      </div>
                      <div class="info-item">
                        <span class="info-label">Última actualización</span>
                        <span class="info-value" id="lastUpdateDate">-</span>
                      </div>
                      <div class="info-item">
                        <span class="info-label">Tamaño de datos</span>
                        <span class="info-value" id="dataSize">-</span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="settings-card">
                  <div class="settings-card-header">
                    <h3>Acerca de Dan&Giv Control</h3>
                  </div>
                  <div class="settings-card-body">
                    <p
                      style="
                        color: var(--color-text-secondary);
                        line-height: 1.6;
                      "
                    >
                      Dan&Giv Control es una aplicación de gestión financiera
                      personal desarrollada para ayudarte a controlar tus
                      gastos, establecer metas y tomar decisiones financieras
                      inteligentes.
                    </p>
                    <div style="margin-top: var(--space-16)">
                      <button class="btn-premium btn-premium-outline">
                        <i class="fas fa-book"></i> Ver documentación
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Toast Notifications -->
    <div id="toast" class="toast hidden">
      <div class="toast-content">
        <i class="toast-icon"></i>
        <span class="toast-message"></span>
      </div>
    </div>

    <!-- Modal Añadir Ahorro -->
    <div class="modal" id="addSavingsModal">
      <div class="modal__content modal--md">
        <div class="modal__header">
          <h3><i class="fas fa-piggy-bank"></i> Añadir fuente de ahorro</h3>
          <button class="modal__close" id="closeSavingsModal">&times;</button>
        </div>
        <div class="modal__body">
          <form id="savingsAccountForm" class="form-single-column">
            <div class="form-group">
              <label for="savingsSourceName" class="form-label-premium"
                >Fuente de ahorro</label
              >
              <input
                type="text"
                id="savingsSourceName"
                class="form-input-premium"
                placeholder="Ej: AFP, Banco Santander, Efectivo"
                required
              />
            </div>
            <div class="form-group">
              <label for="savingsAmount" class="form-label-premium"
                >Monto actual</label
              >
              <input
                type="number"
                id="savingsAmount"
                class="form-input-premium"
                placeholder="0.00"
                step="0.01"
                min="0"
                required
              />
            </div>
            <div class="form-group">
              <label for="savingsType" class="form-label-premium"
                >Tipo de ahorro</label
              >
              <select
                id="savingsType"
                class="form-input-premium form-select-premium"
                required
              >
                <option value="">Selecciona un tipo</option>
                <option value="retirement">Jubilación (AFP/Pensión)</option>
                <option value="emergency">Fondo de emergencia</option>
                <option value="investment">Inversiones</option>
                <option value="savings_account">Cuenta de ahorros</option>
                <option value="cash">Efectivo</option>
                <option value="goal">Meta específica</option>
                <option value="other">Otro</option>
              </select>
            </div>
            <div class="form-group">
              <label for="savingsDescription" class="form-label-premium"
                >Descripción (opcional)</label
              >
              <input
                type="text"
                id="savingsDescription"
                class="form-input-premium"
                placeholder="Para qué es este ahorro..."
              />
            </div>
            <div class="form-actions-premium">
              <button
                type="button"
                class="btn-premium btn-premium-secondary"
                id="cancelSavingsBtn"
              >
                Cancelar
              </button>
              <button type="submit" class="btn-premium btn-premium-primary">
                <i class="fas fa-check"></i> Guardar ahorro
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Añadir Pago Recurrente -->
    <div class="modal" id="addPaymentModal">
      <div class="modal__content modal--md">
        <div class="modal__header">
          <h3>
            <i class="fas fa-file-invoice-dollar"></i> Añadir pago recurrente
          </h3>
          <button class="modal__close" id="closePaymentModal">&times;</button>
        </div>
        <div class="modal__body">
          <form id="recurringPaymentForm" class="form-single-column">
            <div class="form-group">
              <label for="paymentServiceName" class="form-label-premium"
                >Nombre del servicio</label
              >
              <input
                type="text"
                id="paymentServiceName"
                class="form-input-premium"
                placeholder="Ej: Luz del hogar"
                required
              />
            </div>
            <div class="form-group">
              <label for="paymentServiceType" class="form-label-premium"
                >Tipo de servicio</label
              >
              <select
                id="paymentServiceType"
                class="form-input-premium form-select-premium"
                required
              >
                <option value="">Selecciona un tipo</option>
                <option value="electricity">Luz</option>
                <option value="water">Agua</option>
                <option value="phone">Teléfono</option>
                <option value="internet">Internet/WiFi</option>
                <option value="tv">TV/Cable</option>
                <option value="rent">Alquiler</option>
                <option value="gas">Gas</option>
                <option value="insurance">Seguro</option>
                <option value="subscription">Suscripción</option>
                <option value="other">Otros Servicios</option>
              </select>
            </div>
            <div class="form-group">
              <label for="paymentAmount" class="form-label-premium"
                >Monto (opcional si varía)</label
              >
              <input
                type="number"
                id="paymentAmount"
                class="form-input-premium"
                placeholder="0.00"
                step="0.01"
                min="0"
              />
            </div>
            <div class="form-group">
              <label for="paymentDueDay" class="form-label-premium"
                >Día de vencimiento</label
              >
              <input
                type="number"
                id="paymentDueDay"
                class="form-input-premium"
                placeholder="1-31"
                min="1"
                max="31"
                required
              />
            </div>
            <div class="form-group">
              <label for="paymentNotes" class="form-label-premium"
                >Notas (opcional)</label
              >
              <input
                type="text"
                id="paymentNotes"
                class="form-input-premium"
                placeholder="Detalles adicionales..."
              />
            </div>
            <div class="form-actions-premium">
              <button
                type="button"
                class="btn-premium btn-premium-secondary"
                id="cancelPaymentBtn"
              >
                Cancelar
              </button>
              <button type="submit" class="btn-premium btn-premium-primary">
                <i class="fas fa-check"></i> Guardar pago
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Seguridad -->
    <!-- Modal Seguridad -->
    <div class="modal" id="securityModal">
      <div class="modal-dialog">
        <div class="modal-illustration">
          <img
            data-src="img/ahorro.png"
            alt="Ilustración ahorro"
            class="lazy-load"
          />
        </div>
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title" id="securityModalTitle">
              Confirmar eliminacion
            </h2>
            <button
              class="modal-close"
              type="button"
              aria-label="Cerrar"
              id="closeSecurityModalBtn"
            >
              &times;
            </button>
          </div>

          <!-- Formulario de cambio de contraseña personal -->
          <form id="securityForm">
            <div class="modal-body">
              <div class="input-group">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="currentPassword"
                  placeholder="Contraseña actual"
                  autocomplete="current-password"
                />
                <i
                  class="fas fa-eye toggle-pass"
                  data-target="currentPassword"
                ></i>
              </div>

              <div
                id="newPasswordSection"
                style="display: none; margin-top: 16px"
              >
                <div class="input-group">
                  <i class="fas fa-lock"></i>
                  <input
                    type="password"
                    id="newPassword"
                    placeholder="Nueva contraseña"
                    autocomplete="new-password"
                  />
                  <i
                    class="fas fa-eye toggle-pass"
                    data-target="newPassword"
                  ></i>
                </div>

                <div class="input-group">
                  <i class="fas fa-lock"></i>
                  <input
                    type="password"
                    id="confirmPassword"
                    placeholder="Confirmar nueva contraseña"
                    autocomplete="new-password"
                  />
                  <i
                    class="fas fa-eye toggle-pass"
                    data-target="confirmPassword"
                  ></i>
                </div>
              </div>
            </div>

            <div class="modal-footer">
              <button class="btn-cancel" type="button" id="cancelSecurityBtn">
                Cancelar
              </button>
              <button
                class="btn-primary"
                id="modalSavePasswordsBtn"
                type="submit"
              >
                Guardar
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Librerías externas -->
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.2.0/crypto-js.js"></script>

    <script>
      // Opcional: setup para toggle pass visual del modal
      document.addEventListener('click', function (e) {
        if (e.target.classList.contains('toggle-pass')) {
          const input = document.getElementById(
            e.target.getAttribute('data-target')
          );
          if (input) {
            if (input.type === 'password') {
              input.type = 'text';
              e.target.classList.remove('fa-eye');
              e.target.classList.add('fa-eye-slash');
            } else {
              input.type = 'password';
              e.target.classList.remove('fa-eye-slash');
              e.target.classList.add('fa-eye');
            }
          }
        }
      });
    </script>

    <!-- Account Type Selection Modal -->
    <div class="modal" id="accountTypeModal">
      <div class="modal-dialog account-type-dialog-premium">
        <div class="modal-content account-type-modal-premium">
          <button
            class="modal-close-premium"
            type="button"
            aria-label="Cerrar"
            data-close-modal="accountTypeModal"
          >
            <i class="fas fa-times"></i>
          </button>

          <div class="modal-header-premium">
            <h2 class="modal-title-premium">Elige tu tipo de cuenta</h2>
            <p class="modal-subtitle-premium">
              Selecciona la opción que mejor se adapte a tus necesidades
            </p>
          </div>

          <div class="account-cards-container">
            <div
              class="account-card personal-card"
              onclick="selectAccountType('personal')"
              data-type="personal"
            >
              <div class="account-card-glow"></div>
              <div class="account-card-content">
                <div class="account-card-icon personal-icon">
                  <i class="fas fa-user"></i>
                </div>
                <h3 class="account-card-title">Personal</h3>
                <p class="account-card-description">
                  Para tus finanzas individuales
                </p>
              </div>
              <div class="account-card-footer">
                <div class="account-card-arrow">
                  <i class="fas fa-arrow-right"></i>
                </div>
              </div>
            </div>

            <div
              class="account-card shared-card"
              onclick="selectAccountType('shared')"
              data-type="shared"
            >
              <div class="account-card-glow"></div>
              <div class="account-card-content">
                <div class="account-card-icon shared-icon">
                  <i class="fas fa-users"></i>
                </div>
                <h3 class="account-card-title">Mancomunada</h3>
                <p class="account-card-description">
                  Para compartir finanzas en pareja o grupo
                </p>
              </div>
              <div class="account-card-footer">
                <div class="account-card-arrow">
                  <i class="fas fa-arrow-right"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
      <div class="modal-dialog auth-dialog">
        <div class="modal-illustration">
          <img
            src="img/ahorro.png"
            alt="Ilustración de una persona ahorrando dinero en una alcancía"
          />
          <h3>Controla tus finanzas, alcanza tus metas.</h3>
          <p>Tu futuro financiero comienza aquí.</p>
        </div>
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title" id="authModalTitle">¡Bienvenido!</h2>
            <button
              class="modal-close"
              type="button"
              aria-label="Cerrar"
              data-close-modal="authModal"
            >
              &times;
            </button>
          </div>
          <div class="modal-body">
            <form id="loginForm">
              <div class="input-group">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="loginEmail"
                  placeholder="Tu correo electrónico"
                  required
                  autocomplete="email"
                />
              </div>
              <div class="input-group">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="loginPassword"
                  placeholder="Tu contraseña"
                  required
                  autocomplete="current-password"
                />
                <i
                  class="fas fa-eye password-toggle"
                  onclick="togglePasswordVisibility('loginPassword', this)"
                ></i>
              </div>
              <a href="#" class="form-link" id="forgotPasswordLink">¿Olvidaste tu contraseña?</a>
              <button type="submit" class="btn btn--primary btn--full-width">
                Iniciar Sesión
              </button>

              <div class="auth-divider">
                <span>O continúa con</span>
              </div>

              <div class="social-login-buttons">
                <button
                  type="button"
                  class="btn-social btn-google"
                  onclick="window.app?.loginWithGoogle()"
                >
                  <i class="fab fa-google"></i>
                  <span>Google</span>
                </button>
                <button
                  type="button"
                  class="btn-social btn-facebook"
                  onclick="window.app?.loginWithFacebook()"
                >
                  <i class="fab fa-facebook-f"></i>
                  <span>Facebook</span>
                </button>
              </div>
            </form>
            <form id="registerForm" class="hidden">
              <div class="input-group">
                <i class="fas fa-user"></i>
                <input
                  type="text"
                  id="registerName"
                  placeholder="Tu nombre o seudónimo"
                  required
                  autocomplete="name"
                />
              </div>
              <div class="input-group">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="registerEmail"
                  placeholder="Tu correo electrónico"
                  required
                  autocomplete="email"
                />
              </div>
              <div class="input-group">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="registerPassword"
                  placeholder="Crea una contraseña"
                  required
                  autocomplete="new-password"
                />
                <i
                  class="fas fa-eye password-toggle"
                  onclick="togglePasswordVisibility('registerPassword', this)"
                ></i>
              </div>
              <button type="submit" class="btn btn--primary btn--full-width">
                Crear Cuenta
              </button>

              <div class="auth-divider">
                <span>O continúa con</span>
              </div>

              <div class="social-login-buttons">
                <button
                  type="button"
                  class="btn-social btn-google"
                  onclick="window.app?.loginWithGoogle()"
                >
                  <i class="fab fa-google"></i>
                  <span>Google</span>
                </button>
                <button
                  type="button"
                  class="btn-social btn-facebook"
                  onclick="window.app?.loginWithFacebook()"
                >
                  <i class="fab fa-facebook-f"></i>
                  <span>Facebook</span>
                </button>
              </div>
            </form>
          </div>
          <div class="modal-footer auth-footer">
            <p id="authSwitchLink">
              ¿No tienes una cuenta? <a href="#">Regístrate aquí</a>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Password Reset Modal -->
    <div class="modal" id="resetPasswordModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title">🔑 Recuperar Contraseña</h2>
            <button
              class="modal-close"
              type="button"
              aria-label="Cerrar"
              data-close-modal="resetPasswordModal"
            >
              &times;
            </button>
          </div>
          <div class="modal-body">
            <p style="margin-bottom: var(--space-20); color: var(--color-text-secondary);">
              Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña.
            </p>
            <form id="resetPasswordForm">
              <div class="input-group">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="resetEmail"
                  placeholder="Tu correo electrónico"
                  required
                  autocomplete="email"
                />
              </div>
              <button type="submit" class="btn btn--primary btn--full-width">
                Enviar Correo de Recuperación
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Invitation Modal -->
    <div class="modal" id="invitationModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title">Invitar Usuario</h2>
            <button
              class="modal-close"
              type="button"
              aria-label="Cerrar"
              data-close-modal="invitationModal"
            >
              &times;
            </button>
          </div>
          <div class="modal-body">
            <div class="invitation-steps">
              <div class="step-item active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h4>Generar Invitación</h4>
                  <p>
                    Crea un código único para invitar a tu pareja o familiar.
                  </p>
                  <form id="generateInviteForm">
                    <div class="input-group">
                      <i class="fas fa-user"></i>
                      <input
                        type="text"
                        id="inviteeName"
                        placeholder="Nombre de la persona a invitar"
                        required
                      />
                    </div>
                    <button type="submit" class="btn btn--primary">
                      <i class="fas fa-plus"></i> Generar Invitación
                    </button>
                  </form>
                </div>
              </div>

              <div class="step-item" data-step="2">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h4>Compartir Código</h4>
                  <p>
                    Comparte este código con la persona que quieres invitar:
                  </p>
                  <div class="invite-code-display">
                    <div class="code-container">
                      <span id="generatedInviteCode">-----</span>
                      <button class="copy-btn" id="copyInviteCode">
                        <i class="fas fa-copy"></i>
                      </button>
                    </div>
                  </div>
                  <div class="invite-instructions">
                    <p><strong>Instrucciones:</strong></p>
                    <ol>
                      <li>Comparte este código con la persona</li>
                      <li>Pídele que se registre en la aplicación</li>
                      <li>Durante el registro, debe ingresar este código</li>
                      <li>Una vez registrado, tendrán acceso compartido</li>
                    </ol>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ... al final de index.html, después de  -->
    <script>
      // Abrir modal en modo cambio de contraseñas
      document
        .getElementById('changePasswordsBtn')
        ?.addEventListener('click', () => {
          if (
            window.app &&
            typeof window.app.openSecurityModal === 'function'
          ) {
            window.app.openSecurityModal('change');
          } else {
            // Fallback visual si la clase aún no expone el método
            const modal = document.getElementById('securityModal');
            document.getElementById('securityModalTitle').textContent =
              'Cambiar Contraseñas';
            document.getElementById('modalSavePasswordsBtn').textContent =
              'Guardar';
            document.getElementById('newPassSection').style.display = '';
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
          }
        });

      // Cerrar modal
      const closeButtons = ['closeSecurityModalBtn', 'cancelSecurityBtn'];
      closeButtons.forEach((id) => {
        document.getElementById(id)?.addEventListener('click', () => {
          const modal = document.getElementById('securityModal');
          modal.classList.remove('show');
          document.body.style.overflow = '';
        });
      });

      // Submit del form: delegar a la app si existe, si no, fallback
      document
        .getElementById('securityForm')
        ?.addEventListener('submit', (e) => {
          e.preventDefault();
          if (
            window.app &&
            typeof window.app.savePasswordsFromModal === 'function'
          ) {
            window.app.savePasswordsFromModal();
          } else {
            // Fallback mínimo: solo cerrar
            const modal = document.getElementById('securityModal');
            modal.classList.remove('show');
            document.body.style.overflow = '';
          }
        });

      // Cerrar al click en el backdrop
      document
        .getElementById('securityModal')
        ?.addEventListener('click', (e) => {
          if (e.target.id === 'securityModal') {
            e.currentTarget.classList.remove('show');
            document.body.style.overflow = '';
          }
        });
    </script>

    <!-- Professional Footer -->
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-main">
          <div class="footer-brand">
            <div class="footer-logo">
              <div class="logo-icon-footer">
                <svg
                  class="logo-svg"
                  viewBox="0 0 40 40"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <defs>
                    <linearGradient
                      id="footerLogoGradient"
                      x1="0%"
                      y1="0%"
                      x2="100%"
                      y2="100%"
                    >
                      <stop
                        offset="0%"
                        style="stop-color: #0ea5e9; stop-opacity: 1"
                      />
                      <stop
                        offset="100%"
                        style="stop-color: #0d9488; stop-opacity: 1"
                      />
                    </linearGradient>
                  </defs>
                  <circle
                    cx="20"
                    cy="20"
                    r="18"
                    fill="url(#footerLogoGradient)"
                  />
                  <path
                    d="M12 28 L16 22 L20 25 L24 18 L28 20"
                    stroke="white"
                    stroke-width="2.5"
                    fill="none"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <circle cx="16" cy="22" r="2.5" fill="white" />
                  <circle cx="20" cy="25" r="2.5" fill="white" />
                  <circle cx="24" cy="18" r="2.5" fill="white" />
                  <text
                    x="20"
                    y="15"
                    text-anchor="middle"
                    fill="white"
                    font-size="10"
                    font-weight="bold"
                  >
                    $
                  </text>
                </svg>
              </div>
              <span class="footer-brand-text">FinanciaPro Suite</span>
            </div>
            <p class="footer-tagline">Tu aliado financiero inteligente</p>
            <p class="footer-description">
              Controla tus gastos, alcanza tus metas y toma decisiones
              financieras inteligentes con análisis en tiempo real.
            </p>
          </div>

          <div class="footer-columns">
            <div class="footer-column">
              <h4 class="footer-column-title">Plataforma</h4>
              <ul class="footer-links-list">
                <li><a href="#" class="footer-link-item">Dashboard</a></li>
                <li><a href="#" class="footer-link-item">Análisis</a></li>
                <li>
                  <a href="#" class="footer-link-item">Metas Financieras</a>
                </li>
                <li><a href="#" class="footer-link-item">Configuración</a></li>
              </ul>
            </div>

            <div class="footer-column">
              <h4 class="footer-column-title">Soporte</h4>
              <ul class="footer-links-list">
                <li>
                  <a href="#" class="footer-link-item">Centro de Ayuda</a>
                </li>
                <li><a href="#" class="footer-link-item">Tutoriales</a></li>
                <li><a href="#" class="footer-link-item">Contacto</a></li>
                <li><a href="#" class="footer-link-item">FAQ</a></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="footer-divider"></div>

        <div class="footer-bottom">
          <div class="footer-copyright">
            <p>
              &copy; 2025 FinanciaPro Suite. Diseñado con pasión por las
              finanzas.
            </p>
          </div>
          <div class="footer-social">
            <!-- Aquí irá Instagram -->
            <!-- Aquí irá Twitter -->
            <!-- Aquí irá Facebook -->
            <!-- Aquí irá LinkedIn -->
          </div>
        </div>
      </div>
    </footer>

    <!-- Onboarding Tour Overlay -->
    <div id="tourOverlay" class="tour-overlay hidden">
      <div class="tour-backdrop"></div>
      <div class="tour-spotlight"></div>
      <div class="tour-tooltip">
        <div class="tour-tooltip-content">
          <div class="tour-header">
            <h3 class="tour-title"></h3>
            <button class="tour-close" aria-label="Cerrar tour">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="tour-body">
            <p class="tour-description"></p>
          </div>
          <div class="tour-footer">
            <div class="tour-progress">
              <span class="tour-step-counter"></span>
              <div class="tour-progress-bar">
                <div class="tour-progress-fill"></div>
              </div>
            </div>
            <div class="tour-actions">
              <button class="tour-btn tour-skip">Omitir tour</button>
              <button class="tour-btn tour-prev">Anterior</button>
              <button class="tour-btn tour-next">Siguiente</button>
              <button class="tour-btn tour-finish hidden">¡Empezar!</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tour Start Button (floating) -->
    <button
      id="startTourBtn"
      class="tour-start-btn"
      title="Iniciar tour de la aplicación"
    >
      <i class="fas fa-question-circle"></i>
    </button>

    <!-- Partner Invitation Modal -->
    <div id="partnerInviteModal" class="modal-overlay hidden">
      <div class="modal-dialog invitation-modal">
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-icon warning">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="modal-title-section">
              <h3 class="modal-title">Invitar a un socio</h3>
              <p class="modal-subtitle">
                Compartirás el control total de esta cuenta
              </p>
            </div>
            <button class="modal-close" id="closeInviteModalBtn">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="modal-body">
            <div class="invitation-steps">
              <div class="step-item active" id="inviteStep1">
                <div class="step-content">
                  <div class="warning-message">
                    <div class="warning-icon">
                      <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="warning-text">
                      <h4>⚠️ Importante: Acceso completo</h4>
                      <p>La persona invitada tendrá acceso total a:</p>
                      <ul>
                        <li>Ver, editar y eliminar todos los gastos</li>
                        <li>Crear y modificar metas financieras</li>
                        <li>Acceder a todos los datos y análisis</li>
                        <li>Cambiar configuraciones de la cuenta</li>
                      </ul>
                      <p>
                        <strong
                          >Solo invita a personas de absoluta confianza.</strong
                        >
                      </p>
                    </div>
                  </div>
                  <div class="step-actions">
                    <button class="btn-secondary" id="cancelInviteBtn">
                      <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button class="btn-primary" id="proceedInviteBtn">
                      <i class="fas fa-check"></i> Continuar
                    </button>
                  </div>
                </div>
              </div>

              <div class="step-item hidden" id="inviteStep2">
                <div class="step-content">
                  <div class="success-message">
                    <div class="success-icon">
                      <i class="fas fa-link"></i>
                    </div>
                    <div class="success-text">
                      <h4>✅ Enlace de invitación generado</h4>
                      <p>Comparte este enlace seguro con tu socio:</p>
                    </div>
                  </div>

                  <div class="invite-link-container">
                    <div class="invite-link-display">
                      <input
                        type="text"
                        class="invite-link-input"
                        id="generatedInviteLink"
                        readonly
                      />
                      <button class="copy-link-btn" id="copyInviteLinkBtn">
                        <i class="fas fa-copy"></i>
                      </button>
                    </div>
                  </div>

                  <div class="invite-instructions">
                    <div class="instruction-icon">
                      <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="instruction-text">
                      <p><strong>Instrucciones:</strong></p>
                      <ol>
                        <li>Copia el enlace usando el botón de copiar</li>
                        <li>Envíalo de forma segura a tu socio</li>
                        <li>El enlace expira en 24 horas</li>
                        <li>Solo puede ser usado una vez</li>
                      </ol>
                    </div>
                  </div>

                  <div class="step-actions">
                    <button class="btn-secondary" id="generateNewLinkBtn">
                      <i class="fas fa-redo"></i> Generar nuevo enlace
                    </button>
                    <button class="btn-primary" id="finishInviteBtn">
                      <i class="fas fa-check"></i> Finalizar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Detalle de Ahorros -->
    <div class="modal" id="savingsDetailModal">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">
              <i class="fas fa-piggy-bank"></i> Desglose de Ahorros
            </h3>
            <button class="modal-close" id="closeSavingsDetail">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <div class="savings-detail-summary">
              <div class="detail-summary-card">
                <i class="fas fa-wallet"></i>
                <div>
                  <p>Total Ahorrado</p>
                  <h2 id="modalTotalSavings">$0</h2>
                </div>
              </div>
              <div class="detail-summary-card">
                <i class="fas fa-layer-group"></i>
                <div>
                  <p>Fuentes Activas</p>
                  <h2 id="modalTotalSources">0</h2>
                </div>
              </div>
            </div>
            <div class="savings-breakdown" id="savingsBreakdownList">
              <!-- Se llenará dinámicamente -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Payments Detail Modal -->
    <div class="modal" id="paymentsDetailModal">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">
              <i class="fas fa-money-bill-wave"></i> Pagos Recurrentes del Mes
            </h3>
            <button class="modal-close" id="closePaymentsDetail">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <div class="payments-detail-summary">
              <div class="detail-summary-card pending-card">
                <i class="fas fa-exclamation-circle"></i>
                <div>
                  <p>Por Pagar</p>
                  <h2 id="modalPendingPayments">0</h2>
                </div>
              </div>
              <div class="detail-summary-card paid-card">
                <i class="fas fa-check-circle"></i>
                <div>
                  <p>Pagados</p>
                  <h2 id="modalPaidPayments">0</h2>
                </div>
              </div>
              <div class="detail-summary-card total-card">
                <i class="fas fa-calculator"></i>
                <div>
                  <p>Total del Mes</p>
                  <h2 id="modalTotalMonthlyAmount">$0</h2>
                </div>
              </div>
            </div>
            <div class="payments-breakdown">
              <div class="payments-section-title">
                <i class="fas fa-exclamation-triangle"></i>
                <h4>Pendientes de Pago</h4>
              </div>
              <div id="pendingPaymentsList" class="payment-items-list">
                <!-- Se llenará dinámicamente -->
              </div>

              <div class="payments-section-title paid-section">
                <i class="fas fa-check-circle"></i>
                <h4>Pagados este mes</h4>
              </div>
              <div id="paidPaymentsList" class="payment-items-list">
                <!-- Se llenará dinámicamente -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Expenses Detail Modal -->
    <div class="modal" id="expensesDetailModal">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">
              <i class="fas fa-chart-line"></i> Resumen Financiero del Mes
            </h3>
            <button class="modal-close" id="closeExpensesDetail">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <!-- Summary Section -->
            <div class="expenses-summary-header">
              <div class="summary-period">
                <i class="fas fa-calendar-alt"></i>
                <div>
                  <h4>Período analizado</h4>
                  <p id="expensesPeriod">1 de Enero - Hoy</p>
                </div>
              </div>
              <div class="summary-total-expenses">
                <h4>Total gastado este mes</h4>
                <h2 id="modalTotalExpenses">$0</h2>
              </div>
            </div>

            <!-- Statistics Grid -->
            <div class="expenses-stats-container">
              <button class="scroll-btn scroll-btn-left" id="scrollStatsLeft">
                <i class="fas fa-chevron-left"></i>
              </button>
              <div class="expenses-stats-grid" id="expensesStatsGrid">
                <div class="expense-stat-card transactions">
                  <div class="stat-icon">
                    <i class="fas fa-receipt"></i>
                  </div>
                  <div class="stat-content">
                    <h4>Transacciones</h4>
                    <p class="stat-number" id="modalTotalTransactions">0</p>
                    <span class="stat-label">operaciones realizadas</span>
                  </div>
                </div>

                <div class="expense-stat-card necessity">
                  <div class="stat-icon">
                    <i class="fas fa-exclamation-circle"></i>
                  </div>
                  <div class="stat-content">
                    <h4>Gastos Necesarios</h4>
                    <p class="stat-number" id="modalNecessaryPercentage">0%</p>
                    <span class="stat-label" id="modalNecessaryAmount"
                      >$0 en gastos esenciales</span
                    >
                  </div>
                </div>

                <div class="expense-stat-card unnecessary">
                  <div class="stat-icon">
                    <i class="fas fa-shopping-bag"></i>
                  </div>
                  <div class="stat-content">
                    <h4>Gastos No Necesarios</h4>
                    <p class="stat-number" id="modalUnnecessaryPercentage">
                      0%
                    </p>
                    <span class="stat-label" id="modalUnnecessaryAmount"
                      >$0 en gastos prescindibles</span
                    >
                  </div>
                </div>

                <div class="expense-stat-card services">
                  <div class="stat-icon">
                    <i class="fas fa-hand-holding-usd"></i>
                  </div>
                  <div class="stat-content">
                    <h4>Servicios Pagados</h4>
                    <p class="stat-number" id="modalServicesPaid">0</p>
                    <span class="stat-label" id="modalServicesAmount"
                      >$0 en servicios</span
                    >
                  </div>
                </div>
              </div>
              <button class="scroll-btn scroll-btn-right" id="scrollStatsRight">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>

            <!-- Necessity Breakdown -->
            <div class="expenses-necessity-section">
              <div class="section-title-row">
                <h4>
                  <i class="fas fa-chart-pie"></i> Distribución por Necesidad
                </h4>
              </div>
              <div class="necessity-bars" id="necessityBarsContainer">
                <!-- Se llenará dinámicamente -->
              </div>
            </div>

            <!-- Services Paid Section -->
            <div class="expenses-services-section">
              <div class="section-title-row">
                <h4>
                  <i class="fas fa-money-check-alt"></i> Servicios Pagados Este
                  Mes
                </h4>
              </div>
              <div class="services-paid-list" id="servicesPaidList">
                <!-- Se llenará dinámicamente -->
              </div>
            </div>

            <!-- Category Breakdown -->
            <div class="expenses-categories-section">
              <div class="section-title-row">
                <h4><i class="fas fa-tags"></i> Gastos por Categoría</h4>
              </div>
              <div class="categories-breakdown" id="categoriesBreakdown">
                <!-- Se llenará dinámicamente -->
              </div>
            </div>

            <!-- Recent Transactions -->
            <div class="expenses-transactions-section">
              <div class="section-title-row">
                <h4><i class="fas fa-history"></i> Últimas Transacciones</h4>
              </div>
              <div class="transactions-list" id="recentTransactionsList">
                <!-- Se llenará dinámicamente -->
              </div>
            </div>

            <!-- Financial Insights -->
            <div class="financial-insights">
              <div class="insight-card">
                <i class="fas fa-lightbulb"></i>
                <div class="insight-content">
                  <h5>Análisis Financiero</h5>
                  <p id="financialInsight">
                    <!-- Se llenará dinámicamente con recomendaciones -->
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de Enlace de Invitación Después de Registro -->
    <div class="modal" id="sharedAccountInviteModal">
      <div class="modal-dialog invitation-success-modal">
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-icon success">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="modal-title-section">
              <h3 class="modal-title">¡Cuenta Mancomunada Creada!</h3>
              <p class="modal-subtitle">
                Comparte este enlace con tu socio para que se una
              </p>
            </div>
            <button class="modal-close" id="closeSharedInviteModalBtn">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="modal-body">
            <div class="invite-success-content">
              <div class="success-message-box">
                <div class="success-icon-large">
                  <i class="fas fa-users"></i>
                </div>
                <div class="success-text">
                  <h4>🎉 Tu cuenta mancomunada está lista</h4>
                  <p>
                    Ahora puedes invitar a tu socio usando el enlace único
                    generado
                  </p>
                </div>
              </div>

              <div class="invite-link-section">
                <label class="invite-label">
                  <i class="fas fa-link"></i> Enlace de Invitación
                </label>
                <div class="invite-link-display-modern">
                  <input
                    type="text"
                    class="invite-link-input-modern"
                    id="sharedAccountInviteLink"
                    readonly
                  />
                  <button
                    class="btn-copy-modern"
                    id="copySharedInviteLinkBtn"
                    title="Copiar enlace"
                  >
                    <i class="fas fa-copy"></i>
                    <span>Copiar</span>
                  </button>
                  <button
                    class="btn-share-modern"
                    id="shareSharedInviteLinkBtn"
                    title="Compartir"
                  >
                    <i class="fas fa-share-alt"></i>
                    <span>Compartir</span>
                  </button>
                </div>
              </div>

              <div class="invite-info-box">
                <div class="info-icon">
                  <i class="fas fa-info-circle"></i>
                </div>
                <div class="info-content">
                  <h5>Importante:</h5>
                  <ul>
                    <li><strong>El enlace expira en 24 horas</strong></li>
                    <li>Solo puede ser usado una vez</li>
                    <li>También puedes encontrarlo en tus notificaciones</li>
                    <li>Comparte solo con personas de confianza</li>
                  </ul>
                </div>
              </div>

              <div class="invite-timer-section">
                <div class="timer-icon">
                  <i class="fas fa-clock"></i>
                </div>
                <div class="timer-text">
                  <span>Tiempo restante: </span>
                  <strong id="inviteLinkTimer">24:00:00</strong>
                </div>
              </div>
            </div>
          </div>

          <div class="modal-footer">
            <button class="btn-secondary" id="viewNotificationsBtn">
              <i class="fas fa-bell"></i>
              Ver en Notificaciones
            </button>
            <button class="btn-primary" id="closeSharedInviteModalFinishBtn">
              <i class="fas fa-check"></i>
              Entendido
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- FAB (Floating Action Button) for Quick Expense Entry -->
    <button class="fab" id="fabQuickExpense" aria-label="Agregar gasto rápido">
      <i class="fas fa-plus"></i>
    </button>

    <!-- Quick Expense Modal -->
    <div class="modal" id="quickExpenseModal">
      <div class="modal__content modal--sm">
        <div class="modal__header">
          <h2><i class="fas fa-bolt"></i> Agregar Gasto Rápido</h2>
          <button class="modal__close" id="closeQuickExpenseModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal__body">
          <!-- Expense Templates -->
          <div class="quick-templates" id="quickTemplates">
            <!-- Se llenará dinámicamente con plantillas -->
          </div>

          <!-- Quick Expense Form -->
          <form id="quickExpenseForm">
            <div class="form-group">
              <label class="form-label" for="quickAmount">
                <i class="fas fa-dollar-sign"></i> Monto
              </label>
              <input
                type="number"
                id="quickAmount"
                class="form-control form-control--lg"
                placeholder="0.00"
                step="0.01"
                min="0"
                required
                autofocus
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="quickCategory">
                <i class="fas fa-tag"></i> Categoría
              </label>
              <select id="quickCategory" class="form-control" required>
                <option value="">Selecciona una categoría</option>
                <option value="Alimentación">🍽️ Alimentación</option>
                <option value="Transporte">🚌 Transporte</option>
                <option value="Entretenimiento">🎬 Entretenimiento</option>
                <option value="Salud">❤️ Salud</option>
                <option value="Servicios">🔧 Servicios</option>
                <option value="Compras">🛍️ Compras</option>
                <option value="Otros">📦 Otros</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label" for="quickDescription">
                <i class="fas fa-pencil-alt"></i> Descripción (opcional)
              </label>
              <input
                type="text"
                id="quickDescription"
                class="form-control"
                placeholder="Ej. Café Starbucks"
              />
            </div>

            <div class="quick-actions">
              <button
                type="button"
                class="btn btn--secondary"
                id="saveAsTemplateBtn"
              >
                <i class="fas fa-bookmark"></i> Guardar Plantilla
              </button>
              <button type="submit" class="btn btn--primary">
                <i class="fas fa-check"></i> Guardar Gasto
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal Funcionalidad en Desarrollo -->
    <div class="modal" id="comingSoonModal">
      <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content coming-soon-modal">
          <button
            class="modal-close"
            type="button"
            aria-label="Cerrar"
            onclick="closeComingSoonModal()"
          >
            &times;
          </button>
          <div class="modal-body">
            <div class="coming-soon-icon">
              <i class="fas fa-tools"></i>
            </div>
            <h3 class="coming-soon-title">¡Estamos Trabajando en Ello!</h3>
            <p class="coming-soon-message">
              Esta funcionalidad estará disponible muy pronto. Te notificaremos
              cuando esté lista.
            </p>
            <div class="coming-soon-features">
              <div class="coming-soon-feature">
                <i class="fas fa-bolt"></i>
                <span>Gastos rápidos con un click</span>
              </div>
              <div class="coming-soon-feature">
                <i class="fas fa-repeat"></i>
                <span>Gastos recurrentes automáticos</span>
              </div>
            </div>
            <button
              class="btn btn--primary btn--full-width"
              onclick="closeComingSoonModal()"
            >
              <i class="fas fa-check"></i> Entendido
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="app.js"></script>
  </body>
</html>
